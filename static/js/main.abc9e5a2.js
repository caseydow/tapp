/*! For license information please see main.abc9e5a2.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),s=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var p=Object.assign,f=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope");var N=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var j=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function x(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function M(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case b:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case C:return"Suspense";case E:return"SuspenseList";case N:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case w:return e.displayName||"Context";case k:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}var I=Array.isArray,A=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},F=[],U=-1;function L(e){return{current:e}}function z(e){0>U||(e.current=F[U],F[U]=null,U--)}function B(e,t){U++,F[U]=e.current,e.current=t}var q,H,G=L(null),K=L(null),W=L(null),V=L(null);function $(e,t){switch(B(W,t),B(K,e),B(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?bd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yd(t=bd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(G),B(G,e)}function J(){z(G),z(K),z(W)}function Q(e){null!==e.memoizedState&&B(V,e);var t=G.current,n=yd(t,e.type);t!==n&&(B(K,e),B(G,n))}function Y(e){K.current===e&&(z(G),z(K)),V.current===e&&(z(V),uh._currentValue=D)}function X(e){if(void 0===q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+q+e+H}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?X(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,se=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,pe=r.unstable_LowPriority,fe=r.unstable_IdlePriority,ge=r.log,me=r.unstable_setDisableYieldValue,be=null,ye=null;function ve(e){if("function"===typeof ge&&me(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(be,e)}catch(t){}}var ke=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/Se|0)|0},we=Math.log,Se=Math.LN2;var Ce=256,Ee=262144,Pe=4194304;function Oe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ne(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=Oe(r):0!==(a&=o)?s=Oe(a):n||0!==(n=o&~e)&&(s=Oe(n)):0!==(o=r&~i)?s=Oe(o):0!==a?s=Oe(a):n||0!==(n=r&~e)&&(s=Oe(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function je(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Te(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xe(){var e=Pe;return 0===(62914560&(Pe<<=1))&&(Pe=4194304),e}function _e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Me(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ke(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Ae(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ke(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Re(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:De(n))&(e.suspendedLanes|t))?0:n}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ue(){var e=R.p;return 0!==e?e:void 0===(e=window.event)?32:Oh(e.type)}function Le(e,t){var n=R.p;try{return R.p=e,t()}finally{R.p=n}}var ze=Math.random().toString(36).slice(2),Be="__reactFiber$"+ze,qe="__reactProps$"+ze,He="__reactContainer$"+ze,Ge="__reactEvents$"+ze,Ke="__reactListeners$"+ze,We="__reactHandles$"+ze,Ve="__reactResources$"+ze,$e="__reactMarker$"+ze;function Je(e){delete e[Be],delete e[qe],delete e[Ge],delete e[Ke],delete e[We]}function Qe(e){var t=e[Be];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[Be]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Dd(e);null!==e;){if(n=e[Be])return n;e=Dd(e)}return t}n=(e=n).parentNode}return null}function Ye(e){if(e=e[Be]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ze(e){var t=e[Ve];return t||(t=e[Ve]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[$e]=!0}var tt=new Set,nt={};function rt(e,t){st(e,t),st(e+"Capture",t)}function st(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},ot={};function lt(e,t,n){if(s=t,re.call(ot,s)||!re.call(at,s)&&(it.test(s)?ot[s]=!0:(at[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function gt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function bt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?kt(e,a,dt(t)):null!=n?kt(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function vt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void pt(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a),pt(e)}function kt(e,t,n){"number"===t&&gt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Ct(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(I(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),pt(e)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Pt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ot(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Pt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Nt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&Ot(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&Ot(e,i,t[i])}function jt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _t(e){return xt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Mt(){}var It=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,Dt=null;function Ft(e){var t=Ye(e);if(t&&(e=t.stateNode)){var n=e[qe]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+bt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[qe]||null;if(!s)throw Error(a(90));yt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ft(r)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ut=!1;function Lt(e,t,n){if(Ut)return e(t,n);Ut=!0;try{return e(t)}finally{if(Ut=!1,(null!==Rt||null!==Dt)&&(Zc(),Rt&&(t=Rt,e=Dt,Dt=Rt=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function zt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[qe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Bt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),qt=!1;if(Bt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){qt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Yh){qt=!1}var Gt=null,Kt=null,Wt=null;function Vt(){if(Wt)return Wt;var e,t,n=Kt,r=n.length,s="value"in Gt?Gt.value:Gt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Wt=s.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function Qt(){return!1}function Yt(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Jt:Qt,this.isPropagationStopped=Qt,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var Xt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Yt(tn),rn=p({},tn,{view:0,detail:0}),sn=Yt(rn),an=p({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Xt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Xt=0,en=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),on=Yt(an),ln=Yt(p({},an,{dataTransfer:0})),cn=Yt(p({},rn,{relatedTarget:0})),un=Yt(p({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Yt(p({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Yt(p({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=gn[e])&&!!t[e]}function bn(){return mn}var yn=Yt(p({},rn,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bn,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),vn=Yt(p({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=Yt(p({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bn})),wn=Yt(p({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Yt(p({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=Yt(p({},tn,{newState:0,oldState:0})),En=[9,13,27,32],Pn=Bt&&"CompositionEvent"in window,On=null;Bt&&"documentMode"in document&&(On=document.documentMode);var Nn=Bt&&"TextEvent"in window&&!On,jn=Bt&&(!Pn||On&&8<On&&11>=On),Tn=String.fromCharCode(32),xn=!1;function _n(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1;var An={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!An[e.type]:"textarea"===t}function Dn(e,t,n,r){Rt?Dt?Dt.push(r):Dt=[r]:Rt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fn=null,Un=null;function Ln(e){Ju(e,0)}function zn(e){if(ft(Xe(e)))return e}function Bn(e,t){if("change"===e)return t}var qn=!1;if(Bt){var Hn;if(Bt){var Gn="oninput"in document;if(!Gn){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),Gn="function"===typeof Kn.oninput}Hn=Gn}else Hn=!1;qn=Hn&&(!document.documentMode||9<document.documentMode)}function Wn(){Fn&&(Fn.detachEvent("onpropertychange",Vn),Un=Fn=null)}function Vn(e){if("value"===e.propertyName&&zn(Un)){var t=[];Dn(t,Un,e,At(e)),Lt(Ln,t)}}function $n(e,t,n){"focusin"===e?(Wn(),Un=n,(Fn=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&Wn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return zn(Un)}function Qn(e,t){if("click"===e)return zn(t)}function Yn(e,t){if("input"===e||"change"===e)return zn(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!re.call(t,s)||!Xn(e[s],t[s]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=gt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=gt((e=t.contentWindow).document)}return t}function sr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Bt&&"documentMode"in document&&11>=document.documentMode,ar=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==ar||ar!==gt(r)||("selectionStart"in(r=ar)&&sr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=rd(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},pr={},fr={};function gr(e){if(pr[e])return pr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return pr[e]=n[t];return e}Bt&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var mr=gr("animationend"),br=gr("animationiteration"),yr=gr("animationstart"),vr=gr("transitionrun"),kr=gr("transitionstart"),wr=gr("transitioncancel"),Sr=gr("transitionend"),Cr=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Cr.set(e,t),rt(t,[e])}Er.push("scrollEnd");var Or="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Nr=[],jr=0,Tr=0;function xr(){for(var e=jr,t=Tr=jr=0;t<e;){var n=Nr[t];Nr[t++]=null;var r=Nr[t];Nr[t++]=null;var s=Nr[t];Nr[t++]=null;var i=Nr[t];if(Nr[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Ar(n,s,i)}}function _r(e,t,n,r){Nr[jr++]=e,Nr[jr++]=t,Nr[jr++]=n,Nr[jr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Mr(e,t,n,r){return _r(e,t,n,r),Rr(e)}function Ir(e,t){return _r(e,null,null,t),Rr(e)}function Ar(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-ke(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Rr(e){if(50<Gc)throw Gc=0,Kc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dr={};function Fr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,n,r){return new Fr(e,t,n,r)}function Lr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Ur(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qr(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)Lr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case N:return(e=Ur(31,n,t,s)).elementType=N,e.lanes=i,e;case b:return Hr(n.children,s,i,t);case y:o=8,s|=24;break;case v:return(e=Ur(12,n,t,2|s)).elementType=v,e.lanes=i,e;case C:return(e=Ur(13,n,t,s)).elementType=C,e.lanes=i,e;case E:return(e=Ur(19,n,t,s)).elementType=E,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:o=10;break e;case k:o=9;break e;case S:o=11;break e;case P:o=14;break e;case O:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Ur(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Hr(e,t,n,r){return(e=Ur(7,e,r,t)).lanes=n,e}function Gr(e,t,n){return(e=Ur(6,e,null,t)).lanes=n,e}function Kr(e){var t=Ur(18,null,null,0);return t.stateNode=e,t}function Wr(e,t,n){return(t=Ur(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=new WeakMap;function $r(e,t){if("object"===typeof e&&null!==e){var n=Vr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Vr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Jr=[],Qr=0,Yr=null,Xr=0,Zr=[],es=0,ts=null,ns=1,rs="";function ss(e,t){Jr[Qr++]=Xr,Jr[Qr++]=Yr,Yr=e,Xr=t}function is(e,t,n){Zr[es++]=ns,Zr[es++]=rs,Zr[es++]=ts,ts=e;var r=ns;e=rs;var s=32-ke(r)-1;r&=~(1<<s),n+=1;var i=32-ke(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ns=1<<32-ke(t)+s|n<<s|r,rs=i+e}else ns=1<<i|n<<s|r,rs=e}function as(e){null!==e.return&&(ss(e,1),is(e,1,0))}function os(e){for(;e===Yr;)Yr=Jr[--Qr],Jr[Qr]=null,Xr=Jr[--Qr],Jr[Qr]=null;for(;e===ts;)ts=Zr[--es],Zr[es]=null,rs=Zr[--es],Zr[es]=null,ns=Zr[--es],Zr[es]=null}function ls(e,t){Zr[es++]=ns,Zr[es++]=rs,Zr[es++]=ts,ns=t.id,rs=t.overflow,ts=e}var cs=null,us=null,ds=!1,hs=null,ps=!1,fs=Error(a(519));function gs(e){throw ws($r(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),fs}function ms(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Be]=e,t[qe]=r,n){case"dialog":Qu("cancel",t),Qu("close",t);break;case"iframe":case"object":case"embed":Qu("load",t);break;case"video":case"audio":for(n=0;n<Vu.length;n++)Qu(Vu[n],t);break;case"source":Qu("error",t);break;case"img":case"image":case"link":Qu("error",t),Qu("load",t);break;case"details":Qu("toggle",t);break;case"input":Qu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Qu("invalid",t);break;case"textarea":Qu("invalid",t),Ct(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&(Qu("beforetoggle",t),Qu("toggle",t)),null!=r.onScroll&&Qu("scroll",t),null!=r.onScrollEnd&&Qu("scrollend",t),null!=r.onClick&&(t.onclick=Mt),t=!0):t=!1,t||gs(e,!0)}function bs(e){for(cs=e.return;cs;)switch(cs.tag){case 5:case 31:case 13:return void(ps=!1);case 27:case 3:return void(ps=!0);default:cs=cs.return}}function ys(e){if(e!==cs)return!1;if(!ds)return bs(e),ds=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||vd(e.type,e.memoizedProps)),t=!t),t&&us&&gs(e),bs(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));us=Rd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));us=Rd(e)}else 27===n?(n=us,Od(e.type)?(e=Ad,Ad=null,us=e):us=n):us=cs?Id(e.stateNode.nextSibling):null;return!0}function vs(){us=cs=null,ds=!1}function ks(){var e=hs;return null!==e&&(null===xc?xc=e:xc.push.apply(xc,e),hs=null),e}function ws(e){null===hs?hs=[e]:hs.push(e)}var Ss=L(null),Cs=null,Es=null;function Ps(e,t,n){B(Ss,t._currentValue),t._currentValue=n}function Os(e){e._currentValue=Ss.current,z(Ss)}function Ns(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function js(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ns(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),Ns(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Ts(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;Xn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===V.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}s=s.return}null!==e&&js(t,e,n,r),t.flags|=262144}function xs(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _s(e){Cs=e,Es=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ms(e){return As(Cs,e)}function Is(e,t){return null===Cs&&_s(e),As(e,t)}function As(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Es){if(null===e)throw Error(a(308));Es=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Es=Es.next=t;return n}var Rs="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ds=r.unstable_scheduleCallback,Fs=r.unstable_NormalPriority,Us={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ls(){return{controller:new Rs,data:new Map,refCount:0}}function zs(e){e.refCount--,0===e.refCount&&Ds(Fs,function(){e.controller.abort()})}var Bs=null,qs=0,Hs=0,Gs=null;function Ks(){if(0===--qs&&null!==Bs){null!==Gs&&(Gs.status="fulfilled");var e=Bs;Bs=null,Hs=0,Gs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ws=A.S;A.S=function(e,t){Ic=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Bs){var n=Bs=[];qs=0,Hs=qu(),Gs={status:"pending",value:void 0,then:function(e){n.push(e)}}}qs++,t.then(Ks,Ks)}(0,t),null!==Ws&&Ws(e,t)};var Vs=L(null);function $s(){var e=Vs.current;return null!==e?e:fc.pooledCache}function Js(e,t){B(Vs,null===t?Vs.current:t.pool)}function Qs(){var e=$s();return null===e?null:{parent:Us._currentValue,pool:e}}var Ys=Error(a(460)),Xs=Error(a(474)),Zs=Error(a(542)),ei={then:function(){}};function ti(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ni(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Mt,Mt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ai(e=t.reason),e;default:if("string"===typeof t.status)t.then(Mt,Mt);else{if(null!==(e=fc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ai(e=t.reason),e}throw si=t,Ys}}function ri(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw si=t,Ys;throw t}}var si=null;function ii(){if(null===si)throw Error(a(459));var e=si;return si=null,e}function ai(e){if(e===Ys||e===Zs)throw Error(a(483))}var oi=null,li=0;function ci(e){var t=li;return li+=1,null===oi&&(oi=[]),ni(oi,e,t)}function ui(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function di(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Gr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===b?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===O&&ri(i)===t.type)?(ui(t=s(t,n.props),n),t.return=e,t):(ui(t=qr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Gr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case g:return ui(n=qr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Wr(t,e.mode,n)).return=e,t;case O:return h(e,t=ri(t),n)}if(I(t)||x(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ci(t),n);if(t.$$typeof===w)return h(e,Is(e,t),n);di(e,t)}return null}function p(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case g:return n.key===s?c(e,t,n,r):null;case m:return n.key===s?u(e,t,n,r):null;case O:return p(e,t,n=ri(n),r)}if(I(n)||x(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,ci(n),r);if(n.$$typeof===w)return p(e,t,Is(e,n),r);di(e,n)}return null}function f(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case g:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case O:return f(e,t,n,r=ri(r),s)}if(I(r)||x(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return f(e,t,n,ci(r),s);if(r.$$typeof===w)return f(e,t,n,Is(t,r),s);di(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===b&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case g:e:{for(var v=u.key;null!==c;){if(c.key===v){if((v=u.type)===b){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===v||"object"===typeof v&&null!==v&&v.$$typeof===O&&ri(v)===c.type){n(l,c.sibling),ui(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===b?((d=Hr(u.props.children,l.mode,d,u.key)).return=l,l=d):(ui(d=qr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case m:e:{for(v=u.key;null!==c;){if(c.key===v){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Wr(u,l.mode,d)).return=l,l=d}return o(l);case O:return y(l,c,u=ri(u),d)}if(I(u))return function(s,a,o,l){for(var c=null,u=null,d=a,g=a=0,m=null;null!==d&&g<o.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var b=p(s,d,o[g],l);if(null===b){null===d&&(d=m);break}e&&d&&null===b.alternate&&t(s,d),a=i(b,a,g),null===u?c=b:u.sibling=b,u=b,d=m}if(g===o.length)return n(s,d),ds&&ss(s,g),c;if(null===d){for(;g<o.length;g++)null!==(d=h(s,o[g],l))&&(a=i(d,a,g),null===u?c=d:u.sibling=d,u=d);return ds&&ss(s,g),c}for(d=r(d);g<o.length;g++)null!==(m=f(d,s,g,o[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),a=i(m,a,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(s,e)}),ds&&ss(s,g),c}(l,c,u,d);if(x(u)){if("function"!==typeof(v=x(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,g=o,m=o=0,b=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(b=g,g=null):b=g.sibling;var v=p(s,g,y.value,c);if(null===v){null===g&&(g=b);break}e&&g&&null===v.alternate&&t(s,g),o=i(v,o,m),null===d?u=v:d.sibling=v,d=v,g=b}if(y.done)return n(s,g),ds&&ss(s,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=h(s,y.value,c))&&(o=i(y,o,m),null===d?u=y:d.sibling=y,d=y);return ds&&ss(s,m),u}for(g=r(g);!y.done;m++,y=l.next())null!==(y=f(g,s,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),o=i(y,o,m),null===d?u=y:d.sibling=y,d=y);return e&&g.forEach(function(e){return t(s,e)}),ds&&ss(s,m),u}(l,c,u=v.call(u),d)}if("function"===typeof u.then)return y(l,c,ci(u),d);if(u.$$typeof===w)return y(l,c,Is(l,u),d);di(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Gr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{li=0;var s=y(e,t,n,r);return oi=null,s}catch(a){if(a===Ys||a===Zs)throw a;var i=Ur(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var pi=hi(!0),fi=hi(!1),gi=!1;function mi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function yi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function vi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Rr(e),Ar(e,null,n),t}return _r(e,r,t,n),Rr(e)}function ki(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ae(e,n)}}function wi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Si=!1;function Ci(){if(Si){if(null!==Gs)throw Gs}}function Ei(e,t,n,r){Si=!1;var s=e.updateQueue;gi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=-536870913&o.lane,f=h!==o.lane;if(f?(mc&h)===h:(r&h)===h){0!==h&&h===Hs&&(Si=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,m=o;h=t;var b=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(b,d,h);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=m.payload)?g.call(b,d,h):g)||void 0===h)break e;d=p({},d,h);break e;case 2:gi=!0}}null!==(h=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=s.callbacks)?s.callbacks=[h]:f.push(h))}else f={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(f=o).next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),Ec|=a,e.lanes=a,e.memoizedState=d}}function Pi(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function Oi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Pi(n[e],t)}var Ni=L(null),ji=L(0);function Ti(e,t){B(ji,e=Sc),B(Ni,t),Sc=e|t.baseLanes}function xi(){B(ji,Sc),B(Ni,Ni.current)}function _i(){Sc=ji.current,z(Ni),z(ji)}var Mi=L(null),Ii=null;function Ai(e){var t=e.alternate;B(Li,1&Li.current),B(Mi,e),null===Ii&&(null===t||null!==Ni.current||null!==t.memoizedState)&&(Ii=e)}function Ri(e){B(Li,Li.current),B(Mi,e),null===Ii&&(Ii=e)}function Di(e){22===e.tag?(B(Li,Li.current),B(Mi,e),null===Ii&&(Ii=e)):Fi()}function Fi(){B(Li,Li.current),B(Mi,Mi.current)}function Ui(e){z(Mi),Ii===e&&(Ii=null),z(Li)}var Li=L(0);function zi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||_d(n)||Md(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bi=0,qi=null,Hi=null,Gi=null,Ki=!1,Wi=!1,Vi=!1,$i=0,Ji=0,Qi=null,Yi=0;function Xi(){throw Error(a(321))}function Zi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function ea(e,t,n,r,s,i){return Bi=i,qi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=null===e||null===e.memoizedState?mo:bo,Vi=!1,i=n(r,s),Vi=!1,Wi&&(i=na(t,n,r,s)),ta(e),i}function ta(e){A.H=go;var t=null!==Hi&&null!==Hi.next;if(Bi=0,Gi=Hi=qi=null,Ki=!1,Ji=0,Qi=null,t)throw Error(a(300));null===e||Io||null!==(e=e.dependencies)&&xs(e)&&(Io=!0)}function na(e,t,n,r){qi=e;var s=0;do{if(Wi&&(Qi=null),Ji=0,Wi=!1,25<=s)throw Error(a(301));if(s+=1,Gi=Hi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}A.H=yo,i=t(n,r)}while(Wi);return i}function ra(){var e=A.H,t=e.useState()[0];return t="function"===typeof t.then?ca(t):t,e=e.useState()[0],(null!==Hi?Hi.memoizedState:null)!==e&&(qi.flags|=1024),t}function sa(){var e=0!==$i;return $i=0,e}function ia(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function aa(e){if(Ki){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ki=!1}Bi=0,Gi=Hi=qi=null,Wi=!1,Ji=$i=0,Qi=null}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Gi?qi.memoizedState=Gi=e:Gi=Gi.next=e,Gi}function la(){if(null===Hi){var e=qi.alternate;e=null!==e?e.memoizedState:null}else e=Hi.next;var t=null===Gi?qi.memoizedState:Gi.next;if(null!==t)Gi=t,Hi=e;else{if(null===e){if(null===qi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Hi=e).memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},null===Gi?qi.memoizedState=Gi=e:Gi=Gi.next=e}return Gi}function ca(e){var t=Ji;return Ji+=1,null===Qi&&(Qi=[]),e=ni(Qi,e,t),t=qi,null===(null===Gi?t.memoizedState:Gi.next)&&(t=t.alternate,A.H=null===t||null===t.memoizedState?mo:bo),e}function ua(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ca(e);if(e.$$typeof===w)return Ms(e)}throw Error(a(438,String(e)))}function da(e){var t=null,n=qi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=qi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=j;return t.index++,n}function ha(e,t){return"function"===typeof t?t(e):t}function pa(e){return fa(la(),Hi,e)}function fa(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(mc&h)===h:(Bi&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Hs&&(d=!0);else{if((Bi&p)===p){u=u.next,p===Hs&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,qi.lanes|=p,Ec|=p}h=u.action,Vi&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else p={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,o=i):c=c.next=p,qi.lanes|=h,Ec|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Xn(i,e.memoizedState)&&(Io=!0,d&&null!==(n=Gs)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ga(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);Xn(i,t.memoizedState)||(Io=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ma(e,t,n){var r=qi,s=la(),i=ds;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Xn((Hi||s).memoizedState,n);if(o&&(s.memoizedState=n,Io=!0),s=s.queue,Ba(va.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==Gi&&1&Gi.memoizedState.tag){if(r.flags|=2048,Da(9,{destroy:void 0},ya.bind(null,r,s,n,t),null),null===fc)throw Error(a(349));i||0!==(127&Bi)||ba(r,t,n)}return n}function ba(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=qi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ya(e,t,n,r){t.value=n,t.getSnapshot=r,ka(t)&&wa(e)}function va(e,t,n){return n(function(){ka(t)&&wa(e)})}function ka(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(r){return!0}}function wa(e){var t=Ir(e,2);null!==t&&$c(t,e,2)}function Sa(e){var t=oa();if("function"===typeof e){var n=e;if(e=n(),Vi){ve(!0);try{n()}finally{ve(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:e},t}function Ca(e,t,n,r){return e.baseState=n,fa(e,Hi,"function"===typeof r?r:ha)}function Ea(e,t,n,r,s){if(ho(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==A.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,Pa(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Pa(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=A.T,a={};A.T=a;try{var o=n(s,r),l=A.S;null!==l&&l(a,o),Oa(e,t,o)}catch(c){ja(e,t,c)}finally{null!==i&&null!==a.types&&(i.types=a.types),A.T=i}}else try{Oa(e,t,i=n(s,r))}catch(u){ja(e,t,u)}}function Oa(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Na(e,t,n)},function(n){return ja(e,t,n)}):Na(e,t,n)}function Na(e,t,n){t.status="fulfilled",t.value=n,Ta(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Pa(e,n)))}function ja(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ta(t),t=t.next}while(t!==r)}e.action=null}function Ta(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function xa(e,t){return t}function _a(e,t){if(ds){var n=fc.formState;if(null!==n){e:{var r=qi;if(ds){if(us){t:{for(var s=us,i=ps;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=Id(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){us=Id(s.nextSibling),r="F!"===s.data;break e}}gs(r)}r=!1}r&&(t=n[0])}}return(n=oa()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},n.queue=r,n=lo.bind(null,qi,r),r.dispatch=n,r=Sa(!1),i=uo.bind(null,qi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=oa()).queue=s,n=Ea.bind(null,qi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ma(e){return Ia(la(),Hi,e)}function Ia(e,t,n){if(t=fa(e,t,xa)[0],e=pa(ha)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ca(t)}catch(a){if(a===Ys)throw Zs;throw a}else r=t;var s=(t=la()).queue,i=s.dispatch;return n!==t.memoizedState&&(qi.flags|=2048,Da(9,{destroy:void 0},Aa.bind(null,s,n),null)),[r,i,e]}function Aa(e,t){e.action=t}function Ra(e){var t=la(),n=Hi;if(null!==n)return Ia(t,n,e);la(),t=t.memoizedState;var r=(n=la()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Da(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=qi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return la().memoizedState}function Ua(e,t,n,r){var s=oa();qi.flags|=e,s.memoizedState=Da(1|t,{destroy:void 0},n,void 0===r?null:r)}function La(e,t,n,r){var s=la();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==Hi&&null!==r&&Zi(r,Hi.memoizedState.deps)?s.memoizedState=Da(t,i,n,r):(qi.flags|=e,s.memoizedState=Da(1|t,i,n,r))}function za(e,t){Ua(8390656,8,e,t)}function Ba(e,t){La(2048,8,e,t)}function qa(e){var t=la().memoizedState;return function(e){qi.flags|=4;var t=qi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Ha(e,t){return La(4,2,e,t)}function Ga(e,t){return La(4,4,e,t)}function Ka(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Wa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,La(4,4,Ka.bind(null,t,e),n)}function Va(){}function $a(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Zi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Zi(t,r[1]))return r[0];if(r=e(),Vi){ve(!0);try{e()}finally{ve(!1)}}return n.memoizedState=[r,t],r}function Qa(e,t,n){return void 0===n||0!==(1073741824&Bi)&&0===(261930&mc)?e.memoizedState=t:(e.memoizedState=n,e=Vc(),qi.lanes|=e,Ec|=e,n)}function Ya(e,t,n,r){return Xn(n,t)?n:null!==Ni.current?(e=Qa(e,n,r),Xn(e,t)||(Io=!0),e):0===(42&Bi)||0!==(1073741824&Bi)&&0===(261930&mc)?(Io=!0,e.memoizedState=n):(e=Vc(),qi.lanes|=e,Ec|=e,t)}function Xa(e,t,n,r,s){var i=R.p;R.p=0!==i&&8>i?i:8;var a=A.T,o={};A.T=o,uo(e,!1,t,n);try{var l=s(),c=A.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)co(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Wc());else co(e,t,r,Wc())}catch(u){co(e,t,{then:function(){},status:"rejected",reason:u},Wc())}finally{R.p=i,null!==a&&null!==o.types&&(a.types=o.types),A.T=a}}function Za(){}function eo(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=to(e).queue;Xa(e,s,t,D,null===n?Za:function(){return no(e),n(r)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),co(e,t.next.queue,{},Wc())}function ro(){return Ms(uh)}function so(){return la().memoizedState}function io(){return la().memoizedState}function ao(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Wc(),r=vi(t,e=yi(n),n);return null!==r&&($c(r,t,n),ki(r,t,n)),t={cache:Ls()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var r=Wc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?po(t,n):null!==(n=Mr(e,t,n,r))&&($c(n,e,r),fo(n,t,r))}function lo(e,t,n){co(e,t,n,Wc())}function co(e,t,n,r){var s={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))po(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Xn(o,a))return _r(e,t,s,0),null===fc&&xr(),!1}catch(l){}if(null!==(n=Mr(e,t,s,r)))return $c(n,e,r),fo(n,t,r),!0}return!1}function uo(e,t,n,r){if(r={lane:2,revertLane:qu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(a(479))}else null!==(t=Mr(e,n,r,2))&&$c(t,e,2)}function ho(e){var t=e.alternate;return e===qi||null!==t&&t===qi}function po(e,t){Wi=Ki=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ae(e,n)}}var go={readContext:Ms,use:ua,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useLayoutEffect:Xi,useInsertionEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useSyncExternalStore:Xi,useId:Xi,useHostTransitionStatus:Xi,useFormState:Xi,useActionState:Xi,useOptimistic:Xi,useMemoCache:Xi,useCacheRefresh:Xi};go.useEffectEvent=Xi;var mo={readContext:Ms,use:ua,useCallback:function(e,t){return oa().memoizedState=[e,void 0===t?null:t],e},useContext:Ms,useEffect:za,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){Ua(4,2,e,t)},useMemo:function(e,t){var n=oa();t=void 0===t?null:t;var r=e();if(Vi){ve(!0);try{e()}finally{ve(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=oa();if(void 0!==n){var s=n(t);if(Vi){ve(!0);try{n(t)}finally{ve(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=oo.bind(null,qi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},oa().memoizedState=e},useState:function(e){var t=(e=Sa(e)).queue,n=lo.bind(null,qi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Va,useDeferredValue:function(e,t){return Qa(oa(),e,t)},useTransition:function(){var e=Sa(!1);return e=Xa.bind(null,qi,e.queue,!0,!1),oa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=qi,s=oa();if(ds){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===fc)throw Error(a(349));0!==(127&mc)||ba(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,za(va.bind(null,r,i,e),[e]),r.flags|=2048,Da(9,{destroy:void 0},ya.bind(null,r,i,n,t),null),n},useId:function(){var e=oa(),t=fc.identifierPrefix;if(ds){var n=rs;t="_"+t+"R_"+(n=(ns&~(1<<32-ke(ns)-1)).toString(32)+n),0<(n=$i++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Yi++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:_a,useActionState:_a,useOptimistic:function(e){var t=oa();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=uo.bind(null,qi,!0,n),n.dispatch=t,[e,t]},useMemoCache:da,useCacheRefresh:function(){return oa().memoizedState=ao.bind(null,qi)},useEffectEvent:function(e){var t=oa(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(a(440));return n.impl.apply(void 0,arguments)}}},bo={readContext:Ms,use:ua,useCallback:$a,useContext:Ms,useEffect:Ba,useImperativeHandle:Wa,useInsertionEffect:Ha,useLayoutEffect:Ga,useMemo:Ja,useReducer:pa,useRef:Fa,useState:function(){return pa(ha)},useDebugValue:Va,useDeferredValue:function(e,t){return Ya(la(),Hi.memoizedState,e,t)},useTransition:function(){var e=pa(ha)[0],t=la().memoizedState;return["boolean"===typeof e?e:ca(e),t]},useSyncExternalStore:ma,useId:so,useHostTransitionStatus:ro,useFormState:Ma,useActionState:Ma,useOptimistic:function(e,t){return Ca(la(),0,e,t)},useMemoCache:da,useCacheRefresh:io};bo.useEffectEvent=qa;var yo={readContext:Ms,use:ua,useCallback:$a,useContext:Ms,useEffect:Ba,useImperativeHandle:Wa,useInsertionEffect:Ha,useLayoutEffect:Ga,useMemo:Ja,useReducer:ga,useRef:Fa,useState:function(){return ga(ha)},useDebugValue:Va,useDeferredValue:function(e,t){var n=la();return null===Hi?Qa(n,e,t):Ya(n,Hi.memoizedState,e,t)},useTransition:function(){var e=ga(ha)[0],t=la().memoizedState;return["boolean"===typeof e?e:ca(e),t]},useSyncExternalStore:ma,useId:so,useHostTransitionStatus:ro,useFormState:Ra,useActionState:Ra,useOptimistic:function(e,t){var n=la();return null!==Hi?Ca(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:da,useCacheRefresh:io};function vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}yo.useEffectEvent=qa;var ko={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Wc(),s=yi(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=vi(e,s,r))&&($c(t,e,r),ki(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Wc(),s=yi(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=vi(e,s,r))&&($c(t,e,r),ki(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wc(),r=yi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=vi(e,r,n))&&($c(t,e,n),ki(t,e,n))}};function wo(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(s,i))}function So(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ko.enqueueReplaceState(t,t.state,null)}function Co(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=p({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function Eo(e){Or(e)}function Po(e){console.error(e)}function Oo(e){Or(e)}function No(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function jo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function To(e,t,n){return(n=yi(n)).tag=3,n.payload={element:null},n.callback=function(){No(e,t)},n}function xo(e){return(e=yi(e)).tag=3,e}function _o(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){jo(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){jo(t,n,r),"function"!==typeof s&&(null===Dc?Dc=new Set([this]):Dc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Mo=Error(a(461)),Io=!1;function Ao(e,t,n,r){t.child=null===e?fi(t,null,n,r):pi(t,e.child,n,r)}function Ro(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return _s(t),r=ea(e,t,n,a,i,s),o=sa(),null===e||Io?(ds&&o&&as(t),t.flags|=1,Ao(e,t,r,s),t.child):(ia(e,t,s),sl(e,t,s))}function Do(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Lr(i)||void 0!==i.defaultProps||null!==n.compare?((e=qr(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Fo(e,t,i,r,s))}if(i=e.child,!il(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(a,r)&&e.ref===t.ref)return sl(e,t,s)}return t.flags|=1,(e=zr(i,r)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Zn(i,r)&&e.ref===t.ref){if(Io=!1,t.pendingProps=r=i,!il(e,s))return t.lanes=e.lanes,sl(e,t,s);0!==(131072&e.flags)&&(Io=!0)}}return Go(e,t,n,r,s)}function Uo(e,t,n,r){var s=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,s=0;null!==r;)s=s|r.lanes|r.childLanes,r=r.sibling;r=s&~i}else r=0,t.child=null;return zo(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,zo(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Js(0,null!==i?i.cachePool:null),null!==i?Ti(t,i):xi(),Di(t)}else null!==i?(Js(0,i.cachePool),Ti(t,i),Fi(),t.memoizedState=null):(null!==e&&Js(0,null),xi(),Fi());return Ao(e,t,s,n),t.child}function Lo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function zo(e,t,n,r,s){var i=$s();return i=null===i?null:{parent:Us._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Js(0,null),xi(),Di(t),null!==e&&Ts(e,t,r,!0),t.childLanes=s,null}function Bo(e,t){return(t=Zo({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function qo(e,t,n){return pi(t,e.child,null,n),(e=Bo(t,t.pendingProps)).flags|=2,Ui(t),t.memoizedState=null,e}function Ho(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Go(e,t,n,r,s){return _s(t),n=ea(e,t,n,r,void 0,s),r=sa(),null===e||Io?(ds&&r&&as(t),t.flags|=1,Ao(e,t,n,s),t.child):(ia(e,t,s),sl(e,t,s))}function Ko(e,t,n,r,s,i){return _s(t),t.updateQueue=null,n=na(t,r,n,s),ta(e),r=sa(),null===e||Io?(ds&&r&&as(t),t.flags|=1,Ao(e,t,n,i),t.child):(ia(e,t,i),sl(e,t,i))}function Wo(e,t,n,r,s){if(_s(t),null===t.stateNode){var i=Dr,a=n.contextType;"object"===typeof a&&null!==a&&(i=Ms(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=ko,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},mi(t),a=n.contextType,i.context="object"===typeof a&&null!==a?Ms(a):Dr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(vo(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&ko.enqueueReplaceState(i,i.state,null),Ei(t,r,i,s),Ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=Co(n,o);i.props=l;var c=i.context,u=n.contextType;a=Dr,"object"===typeof u&&null!==u&&(a=Ms(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&So(t,i,r,a),gi=!1;var h=t.memoizedState;i.state=h,Ei(t,r,i,s),Ci(),c=t.memoizedState,o||h!==c||gi?("function"===typeof d&&(vo(t,n,d,r),c=t.memoizedState),(l=gi||wo(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,bi(e,t),u=Co(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Dr,"object"===typeof c&&null!==c&&(l=Ms(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&So(t,i,r,l),gi=!1,h=t.memoizedState,i.state=h,Ei(t,r,i,s),Ci();var p=t.memoizedState;a!==d||h!==p||gi||null!==e&&null!==e.dependencies&&xs(e.dependencies)?("function"===typeof o&&(vo(t,n,o,r),p=t.memoizedState),(u=gi||wo(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&xs(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Ho(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=pi(t,e.child,null,s),t.child=pi(t,null,n,s)):Ao(e,t,n,s),t.memoizedState=i.state,e=t.child):e=sl(e,t,s),e}function Vo(e,t,n,r){return vs(),t.flags|=256,Ao(e,t,n,r),t.child}var $o={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jo(e){return{baseLanes:e,cachePool:Qs()}}function Qo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Nc),e}function Yo(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Li.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ds){if(i?Ai(t):Fi(),(e=us)?null!==(e=null!==(e=xd(e,ps))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ts?{id:ns,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,cs=t,us=null):e=null,null===e)throw gs(t);return Md(e)?t.lanes=32:t.lanes=536870912,null}var l=s.children;return s=s.fallback,i?(Fi(),l=Zo({mode:"hidden",children:l},i=t.mode),s=Hr(s,i,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,(s=t.child).memoizedState=Jo(n),s.childLanes=Qo(e,r,n),t.memoizedState=$o,Lo(null,s)):(Ai(t),Xo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Ai(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Fi(),t.child=e.child,t.flags|=128,t=null):(Fi(),l=s.fallback,i=t.mode,s=Zo({mode:"visible",children:s.children},i),(l=Hr(l,i,n,null)).flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,pi(t,e.child,null,n),(s=t.child).memoizedState=Jo(n),s.childLanes=Qo(e,r,n),t.memoizedState=$o,t=Lo(null,s));else if(Ai(t),Md(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,ws({value:s,source:null,stack:null}),t=el(e,t,n)}else if(Io||Ts(e,t,n,!1),r=0!==(n&e.childLanes),Io||r){if(null!==(r=fc)&&(0!==(s=Re(r,n))&&s!==c.retryLane))throw c.retryLane=s,Ir(e,s),$c(r,e,s),Mo;_d(l)||au(),t=el(e,t,n)}else _d(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,us=Id(l.nextSibling),cs=t,ds=!0,hs=null,ps=!1,null!==e&&ls(t,e),(t=Xo(t,s.children)).flags|=4096);return t}return i?(Fi(),l=s.fallback,i=t.mode,u=(c=e.child).sibling,(s=zr(c,{mode:"hidden",children:s.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=zr(u,l):(l=Hr(l,i,n,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,Lo(null,s),s=t.child,null===(l=e.child.memoizedState)?l=Jo(n):(null!==(i=l.cachePool)?(c=Us._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=Qs(),l={baseLanes:l.baseLanes|n,cachePool:i}),s.memoizedState=l,s.childLanes=Qo(e,r,n),t.memoizedState=$o,Lo(e.child,s)):(Ai(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Xo(e,t){return(t=Zo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zo(e,t){return(e=Ur(22,e,null,t)).lanes=0,e}function el(e,t,n){return pi(t,e.child,null,n),(e=Xo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ns(e.return,t,n)}function nl(e,t,n,r,s,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,treeForkCount:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s,a.treeForkCount=i)}function rl(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;r=r.children;var a=Li.current,o=0!==(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,B(Li,a),Ao(e,t,r,n),r=ds?Xr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===zi(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),nl(t,!1,s,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===zi(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}nl(t,!0,n,null,i,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function sl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ec|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ts(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function il(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!xs(e))}function al(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Io=!0;else{if(!il(e,n)&&0===(128&t.flags))return Io=!1,function(e,t,n){switch(t.tag){case 3:$(t,t.stateNode.containerInfo),Ps(0,Us,e.memoizedState.cache),vs();break;case 27:case 5:Q(t);break;case 4:$(t,t.stateNode.containerInfo);break;case 10:Ps(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ri(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ai(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Yo(e,t,n):(Ai(t),null!==(e=sl(e,t,n))?e.sibling:null);Ai(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ts(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return rl(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),B(Li,Li.current),r)break;return null;case 22:return t.lanes=0,Uo(e,t,n,t.pendingProps);case 24:Ps(0,Us,e.memoizedState.cache)}return sl(e,t,n)}(e,t,n);Io=0!==(131072&e.flags)}else Io=!1,ds&&0!==(1048576&t.flags)&&is(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ri(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var s=e.$$typeof;if(s===S){t.tag=11,t=Ro(null,t,e,r,n);break e}if(s===P){t.tag=14,t=Do(null,t,e,r,n);break e}}throw t=M(e)||e,Error(a(306,t,""))}Lr(e)?(r=Co(e,r),t.tag=1,t=Wo(null,t,e,r,n)):(t.tag=0,t=Go(null,t,e,r,n))}return t;case 0:return Go(e,t,t.type,t.pendingProps,n);case 1:return Wo(e,t,r=t.type,s=Co(r,t.pendingProps),n);case 3:e:{if($(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,bi(e,t),Ei(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Ps(0,Us,r),r!==i.cache&&js(t,[Us],n,!0),Ci(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Vo(e,t,r,n);break e}if(r!==s){ws(s=$r(Error(a(424)),t)),t=Vo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(us=Id(e.firstChild),cs=t,ds=!0,hs=null,ps=!0,n=fi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(vs(),r===s){t=sl(e,t,n);break e}Ao(e,t,r,n)}t=t.child}return t;case 26:return Ho(e,t),null===e?(n=Kd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ds||(n=t.type,e=t.pendingProps,(r=md(W.current).createElement(n))[Be]=t,r[qe]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&ds&&(r=t.stateNode=Fd(t.type,t.pendingProps,W.current),cs=t,ps=!0,s=us,Od(t.type)?(Ad=s,us=Id(r.firstChild)):us=s),Ao(e,t,t.pendingProps.children,n),Ho(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ds&&((s=r=us)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[$e])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=Id(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ps))?(t.stateNode=r,cs=t,us=Id(r.firstChild),ps=!1,s=!0):s=!1),s||gs(t)),Q(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,vd(s,i)?r=null:null!==o&&vd(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=ea(e,t,ra,null,null,n),uh._currentValue=s),Ho(e,t),Ao(e,t,r,n),t.child;case 6:return null===e&&ds&&((e=n=us)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Id(e.nextSibling)))return null}return e}(n,t.pendingProps,ps))?(t.stateNode=n,cs=t,us=null,e=!0):e=!1),e||gs(t)),null;case 13:return Yo(e,t,n);case 4:return $(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pi(t,null,r,n):Ao(e,t,r,n),t.child;case 11:return Ro(e,t,t.type,t.pendingProps,n);case 7:return Ao(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ao(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ps(0,t.type,r.value),Ao(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,_s(t),r=r(s=Ms(s)),t.flags|=1,Ao(e,t,r,n),t.child;case 14:return Do(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,s=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ds){if("hidden"===r.mode)return e=Bo(t,r),t.lanes=536870912,Lo(null,e);if(Ri(t),(e=us)?null!==(e=null!==(e=xd(e,ps))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ts?{id:ns,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,cs=t,us=null):e=null,null===e)throw gs(t);return t.lanes=536870912,null}return Bo(t,r)}var i=e.memoizedState;if(null!==i){var o=i.dehydrated;if(Ri(t),s)if(256&t.flags)t.flags&=-257,t=qo(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Io||Ts(e,t,n,!1),s=0!==(n&e.childLanes),Io||s){if(null!==(r=fc)&&0!==(o=Re(r,n))&&o!==i.retryLane)throw i.retryLane=o,Ir(e,o),$c(r,e,o),Mo;au(),t=qo(e,t,n)}else e=i.treeContext,us=Id(o.nextSibling),cs=t,ds=!0,hs=null,ps=!1,null!==e&&ls(t,e),(t=Bo(t,r)).flags|=4096;return t}return(e=zr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Uo(e,t,n,t.pendingProps);case 24:return _s(t),r=Ms(Us),null===e?(null===(s=$s())&&(s=fc,i=Ls(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},mi(t),Ps(0,Us,s)):(0!==(e.lanes&n)&&(bi(e,t),Ei(t,null,null,n),Ci()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),Ps(0,Us,r)):(r=i.cache,Ps(0,Us,r),r!==s.cache&&js(t,[Us],n,!0))),Ao(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,r,s){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&s)===s)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw si=ei,Xs;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!sh(t)){if(!ru())throw si=ei,Xs;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,jc|=t)}function dl(e,t){if(!ds)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(os(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Os(Us),J(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ys(t)?ol(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ks())),hl(t),null;case 26:var s=t.type,i=t.memoizedState;return null===e?(ol(t),null!==i?(hl(t),cl(t,i)):(hl(t),ll(t,s,0,0,n))):i?i!==e.memoizedState?(ol(t),hl(t),cl(t,i)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),hl(t),ll(t,s,0,0,n)),null;case 27:if(Y(t),n=W.current,s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hl(t),null}e=G.current,ys(t)?ms(t):(e=Fd(s,r,n),t.stateNode=e,ol(t))}return hl(t),null;case 5:if(Y(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hl(t),null}if(i=G.current,ys(t))ms(t);else{var o=md(W.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(i=o.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?o.createElement(s,{is:r.is}):o.createElement(s)}}i[Be]=t,i[qe]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)i.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=i;e:switch(hd(i,s,r),s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=W.current,ys(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=cs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Be]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||gs(t,!0)}else(e=md(e).createTextNode(r))[Be]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=ys(t),null!==n){if(null===e){if(!r)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[Be]=t}else vs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=ks(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Ui(t),t):(Ui(t),null);if(0!==(128&t.flags))throw Error(a(558))}return hl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=ys(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[Be]=t}else vs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),s=!1}else s=ks(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(Ui(t),t):(Ui(t),null)}return Ui(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return J(),null===e&&Zu(t.stateNode.containerInfo),hl(t),null;case 10:return Os(t.type),hl(t),null;case 19:if(z(Li),null===(r=t.memoizedState))return hl(t),null;if(s=0!==(128&t.flags),null===(i=r.rendering))if(s)dl(r,!1);else{if(0!==Cc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=zi(e))){for(t.flags|=128,dl(r,!1),e=i.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return B(Li,1&Li.current|2),ds&&ss(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Ac&&(t.flags|=128,s=!0,dl(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=zi(i))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!ds)return hl(t),null}else 2*le()-r.renderingStartTime>Ac&&536870912!==n&&(t.flags|=128,s=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Li.current,B(Li,s?1&n|2:1&n),ds&&ss(t,r.treeForkCount),e):(hl(t),null);case 22:case 23:return Ui(t),_i(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(Vs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Os(Us),hl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function fl(e,t){switch(os(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Os(Us),J(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 31:if(null!==t.memoizedState){if(Ui(t),null===t.alternate)throw Error(a(340));vs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Ui(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));vs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(Li),null;case 4:return J(),null;case 10:return Os(t.type),null;case 22:case 23:return Ui(t),_i(),null!==e&&z(Vs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Os(Us),null;default:return null}}function gl(e,t){switch(os(t),t.tag){case 3:Os(Us),J();break;case 26:case 27:case 5:Y(t);break;case 4:J();break;case 31:null!==t.memoizedState&&Ui(t);break;case 13:Ui(t);break;case 19:z(Li);break;case 10:Os(t.type);break;case 22:case 23:Ui(t),_i(),null!==e&&z(Vs);break;case 24:Os(Us)}}function ml(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){Cu(t,t.return,o)}}function bl(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){Cu(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){Cu(t,t.return,u)}}function yl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Oi(t,n)}catch(r){Cu(e,e.return,r)}}}function vl(e,t,n){n.props=Co(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Cu(e,t,r)}}function kl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){Cu(e,t,s)}}function wl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){Cu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){Cu(e,t,i)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){Cu(e,e.return,s)}}function Cl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||ud(e,t,f,null,r,h)}}for(var p in r){var f=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":i=f;break;case"name":s=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:f!==h&&ud(e,t,p,f,r,h)}}return void yt(e,o,l,c,u,d,i,s);case"select":for(i in f=o=l=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(i)||ud(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":p=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&ud(e,t,s,i,r,c)}return t=l,n=o,r=f,void(null!=p?wt(e,!!n,p,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":p=s;break;case"defaultValue":f=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&ud(e,t,o,s,r,i)}return void St(e,p,f);case"option":for(var g in n)if(p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else ud(e,t,g,null,r,p);for(c in r)if(p=r[c],f=n[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else ud(e,t,c,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m)&&ud(e,t,m,null,r,p);for(u in r)if(p=r[u],f=n[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:ud(e,t,u,p,r,f)}return;default:if(jt(t)){for(var b in n)p=n[b],n.hasOwnProperty(b)&&void 0!==p&&!r.hasOwnProperty(b)&&dd(e,t,b,void 0,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||dd(e,t,d,p,r,f);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!r.hasOwnProperty(y)&&ud(e,t,y,null,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||null==p&&null==f||ud(e,t,h,p,r,f)}(r,e.type,n,t),r[qe]=t}catch(s){Cu(e,e.return,s)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Od(e.type)||4===e.tag}function Pl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Od(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Mt));else if(4!==r&&(27===r&&Od(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Ol(e,t,n),e=e.sibling;null!==e;)Ol(e,t,n),e=e.sibling}function Nl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Od(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Nl(e,t,n),e=e.sibling;null!==e;)Nl(e,t,n),e=e.sibling}function jl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);hd(t,r,n),t[Be]=e,t[qe]=n}catch(i){Cu(e,e.return,i)}}var Tl=!1,xl=!1,_l=!1,Ml="function"===typeof WeakSet?WeakSet:Set,Il=null;function Al(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:$l(e,n),4&r&&ml(5,n);break;case 1:if($l(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Cu(n,n.return,a)}else{var s=Co(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Cu(n,n.return,o)}}64&r&&yl(n),512&r&&kl(n,n.return);break;case 3:if($l(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Oi(e,t)}catch(a){Cu(n,n.return,a)}}break;case 27:null===t&&4&r&&jl(n);case 26:case 5:$l(e,n),null===t&&4&r&&Sl(n),512&r&&kl(n,n.return);break;case 12:$l(e,n);break;case 31:$l(e,n),4&r&&zl(e,n);break;case 13:$l(e,n),4&r&&Bl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Nu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Tl)){t=null!==t&&null!==t.memoizedState||xl,s=Tl;var i=xl;Tl=r,(xl=t)&&!i?Ql(e,n,0!==(8772&n.subtreeFlags)):$l(e,n),Tl=s,xl=i}break;case 30:break;default:$l(e,n)}}function Rl(e){var t=e.alternate;null!==t&&(e.alternate=null,Rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Dl=null,Fl=!1;function Ul(e,t,n){for(n=n.child;null!==n;)Ll(e,t,n),n=n.sibling}function Ll(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(be,n)}catch(i){}switch(n.tag){case 26:xl||wl(n,t),Ul(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||wl(n,t);var r=Dl,s=Fl;Od(n.type)&&(Dl=n.stateNode,Fl=!1),Ul(e,t,n),Ud(n.stateNode),Dl=r,Fl=s;break;case 5:xl||wl(n,t);case 6:if(r=Dl,s=Fl,Dl=null,Ul(e,t,n),Fl=s,null!==(Dl=r))if(Fl)try{(9===Dl.nodeType?Dl.body:"HTML"===Dl.nodeName?Dl.ownerDocument.body:Dl).removeChild(n.stateNode)}catch(a){Cu(n,t,a)}else try{Dl.removeChild(n.stateNode)}catch(a){Cu(n,t,a)}break;case 18:null!==Dl&&(Fl?(Nd(9===(e=Dl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gh(e)):Nd(Dl,n.stateNode));break;case 4:r=Dl,s=Fl,Dl=n.stateNode.containerInfo,Fl=!0,Ul(e,t,n),Dl=r,Fl=s;break;case 0:case 11:case 14:case 15:bl(2,n,t),xl||bl(4,n,t),Ul(e,t,n);break;case 1:xl||(wl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&vl(n,t,r)),Ul(e,t,n);break;case 21:Ul(e,t,n);break;case 22:xl=(r=xl)||null!==n.memoizedState,Ul(e,t,n),xl=r;break;default:Ul(e,t,n)}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gh(e)}catch(n){Cu(t,t.return,n)}}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gh(e)}catch(n){Cu(t,t.return,n)}}function ql(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ml),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ml),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=ju.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Od(l.type)){Dl=l.stateNode,Fl=!1;break e}break;case 5:Dl=l.stateNode,Fl=!1;break e;case 3:case 4:Dl=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===Dl)throw Error(a(160));Ll(i,o,s),Dl=null,Fl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Gl=null;function Kl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Wl(e),4&r&&(bl(3,e,e.return),ml(3,e),bl(5,e,e.return));break;case 1:Hl(t,e),Wl(e),512&r&&(xl||null===n||wl(n,n.return)),64&r&&Tl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Gl;if(Hl(t,e),Wl(e),512&r&&(xl||null===n||wl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[$e]||i[Be]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),hd(i,r,n),i[Be]=e,et(i),r=i;break e;case"link":var o=nh("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}hd(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=nh("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}hd(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[Be]=e,et(i),r=i}e.stateNode=r}else rh(s,e.type,e.stateNode);else e.stateNode=Yd(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?rh(s,e.type,e.stateNode):Yd(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Cl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Wl(e),512&r&&(xl||null===n||wl(n,n.return)),null!==n&&4&r&&Cl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Wl(e),512&r&&(xl||null===n||wl(n,n.return)),32&e.flags){s=e.stateNode;try{Et(s,"")}catch(g){Cu(e,e.return,g)}}4&r&&null!=e.stateNode&&Cl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(_l=!0);break;case 6:if(Hl(t,e),Wl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(g){Cu(e,e.return,g)}}break;case 3:if(th=null,s=Gl,Gl=Bd(t.containerInfo),Hl(t,e),Gl=s,Wl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gh(t.containerInfo)}catch(g){Cu(e,e.return,g)}_l&&(_l=!1,Vl(e));break;case 4:r=Gl,Gl=Bd(e.stateNode.containerInfo),Hl(t,e),Wl(e),Gl=r;break;case 12:default:Hl(t,e),Wl(e);break;case 31:case 19:Hl(t,e),Wl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 13:Hl(t,e),Wl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Mc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Tl,d=xl;if(Tl=u||s,xl=d||c,Hl(t,e),xl=d,Tl=u,Wl(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||Tl||xl||Jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(g){Cu(c,c.return,g)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(g){Cu(c,c.return,g)}}}else if(18===t.tag){if(null===n){c=t;try{var f=c.stateNode;s?jd(f,!0):jd(c.stateNode,!1)}catch(g){Cu(c,c.return,g)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,ql(e,n))));case 30:case 21:}}function Wl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(El(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;Nl(e,Pl(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(Et(i,""),n.flags&=-33),Nl(e,Pl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;Ol(e,Pl(e),o);break;default:throw Error(a(161))}}catch(l){Cu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Vl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Vl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function $l(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Al(e,t.alternate,t),t=t.sibling}function Jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:bl(4,t,t.return),Jl(t);break;case 1:wl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&vl(t,t.return,n),Jl(t);break;case 27:Ud(t.stateNode);case 26:case 5:wl(t,t.return),Jl(t);break;case 22:null===t.memoizedState&&Jl(t);break;default:Jl(t)}e=e.sibling}}function Ql(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Ql(s,i,n),ml(4,i);break;case 1:if(Ql(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){Cu(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)Pi(l[s],o)}catch(c){Cu(r,r.return,c)}}n&&64&a&&yl(i),kl(i,i.return);break;case 27:jl(i);case 26:case 5:Ql(s,i,n),n&&null===r&&4&a&&Sl(i),kl(i,i.return);break;case 12:Ql(s,i,n);break;case 31:Ql(s,i,n),n&&4&a&&zl(s,i);break;case 13:Ql(s,i,n),n&&4&a&&Bl(s,i);break;case 22:null===i.memoizedState&&Ql(s,i,n),kl(i,i.return);break;case 30:break;default:Ql(s,i,n)}t=t.sibling}}function Yl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&zs(n))}function Xl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zs(e))}function Zl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Zl(e,t,n,r),2048&s&&ml(9,t);break;case 1:case 31:case 13:default:Zl(e,t,n,r);break;case 3:Zl(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zs(e)));break;case 12:if(2048&s){Zl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Cu(t,t.return,l)}}else Zl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Zl(e,t,n,r):nc(e,t):2&i._visibility?Zl(e,t,n,r):(i._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&s&&Yl(a,t);break;case 24:Zl(e,t,n,r),2048&s&&Xl(t.alternate,t)}}function tc(e,t,n,r,s){for(s=s&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:tc(i,a,o,l,s),ml(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?tc(i,a,o,l,s):nc(i,a):(u._visibility|=2,tc(i,a,o,l,s)),s&&2048&c&&Yl(a.alternate,a);break;case 24:tc(i,a,o,l,s),s&&2048&c&&Xl(a.alternate,a);break;default:tc(i,a,o,l,s)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:nc(n,r),2048&s&&Yl(r.alternate,r);break;case 24:nc(n,r),2048&s&&Xl(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function sc(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)ic(e,t,n),e=e.sibling}function ic(e,t,n){switch(e.tag){case 26:sc(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var s=Wd(r.href),i=t.querySelector(Vd(s));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ah.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=$d(r),(s=Ld.get(s))&&Zd(r,s),et(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),hd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ah.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Gl,e.memoizedState,e.memoizedProps);break;case 5:default:sc(e,t,n);break;case 3:case 4:var r=Gl;Gl=Bd(e.stateNode.containerInfo),sc(e,t,n),Gl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,sc(e,t,n),rc=r):sc(e,t,n))}}function ac(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Il=r,uc(r,e)}ac(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&bl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):oc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Il=r,uc(r,e)}ac(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:bl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Il;){var n=Il;switch(n.tag){case 0:case 11:case 15:bl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:zs(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Il=r;else e:for(n=e;null!==Il;){var s=(r=Il).sibling,i=r.return;if(Rl(r),r===n){Il=null;break e}if(null!==s){s.return=i,Il=s;break e}Il=i}}}var dc={getCacheForType:function(e){var t=Ms(Us),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ms(Us).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,pc=0,fc=null,gc=null,mc=0,bc=0,yc=null,vc=!1,kc=!1,wc=!1,Sc=0,Cc=0,Ec=0,Pc=0,Oc=0,Nc=0,jc=0,Tc=null,xc=null,_c=!1,Mc=0,Ic=0,Ac=1/0,Rc=null,Dc=null,Fc=0,Uc=null,Lc=null,zc=0,Bc=0,qc=null,Hc=null,Gc=0,Kc=null;function Wc(){return 0!==(2&pc)&&0!==mc?mc&-mc:null!==A.T?qu():Ue()}function Vc(){if(0===Nc)if(0===(536870912&mc)||ds){var e=Ee;0===(3932160&(Ee<<=1))&&(Ee=262144),Nc=e}else Nc=536870912;return null!==(e=Mi.current)&&(e.flags|=32),Nc}function $c(e,t,n){(e!==fc||2!==bc&&9!==bc)&&null===e.cancelPendingCommit||(tu(e,0),Xc(e,mc,Nc,!1)),Me(e,n),0!==(2&pc)&&e===fc||(e===fc&&(0===(2&pc)&&(Pc|=n),4===Cc&&Xc(e,mc,Nc,!1)),Ru(e))}function Jc(e,t,n){if(0!==(6&pc))throw Error(a(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||je(e,t),s=r?function(e,t){var n=pc;pc|=2;var r=su(),s=iu();fc!==e||mc!==t?(Rc=null,Ac=le()+500,tu(e,t)):kc=je(e,t);e:for(;;)try{if(0!==bc&&null!==gc){t=gc;var i=yc;t:switch(bc){case 1:bc=0,yc=null,hu(e,t,i,1);break;case 2:case 9:if(ti(i)){bc=0,yc=null,du(t);break}t=function(){2!==bc&&9!==bc||fc!==e||(bc=7),Ru(e)},i.then(t,t);break e;case 3:bc=7;break e;case 4:bc=5;break e;case 7:ti(i)?(bc=0,yc=null,du(t)):(bc=0,yc=null,hu(e,t,i,7));break;case 5:var o=null;switch(gc.tag){case 26:o=gc.memoizedState;case 5:case 27:var l=gc;if(o?sh(o):l.stateNode.complete){bc=0,yc=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,pu(u)):gc=null}break t}}bc=0,yc=null,hu(e,t,i,5);break;case 6:bc=0,yc=null,hu(e,t,i,6);break;case 8:eu(),Cc=6;break e;default:throw Error(a(462))}}cu();break}catch(d){nu(e,d)}return Es=Cs=null,A.H=r,A.A=s,pc=n,null!==gc?0:(fc=null,mc=0,xr(),Cc)}(e,t):ou(e,t,!0),i=r;;){if(0===s){kc&&!r&&Xc(e,t,0,!1);break}if(n=e.current.alternate,!i||Yc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=Tc;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,o).flags|=256),2!==(o=ou(l,o,!1))){if(wc&&!c){l.errorRecoveryDisabledLanes|=i,Pc|=i,s=4;break e}i=xc,xc=s,null!==i&&(null===xc?xc=i:xc.push.apply(xc,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){tu(e,0),Xc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Xc(r,t,Nc,!vc);break e;case 2:xc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=Mc+300-le())){if(Xc(r,t,Nc,!vc),0!==Ne(r,0,!0))break e;zc=t,r.timeoutHandle=wd(Qc.bind(null,r,n,xc,Rc,_c,t,Nc,Pc,jc,vc,i,"Throttled",-0,0),s)}else Qc(r,n,xc,Rc,_c,t,Nc,Pc,jc,vc,i,null,-0,0)}break}s=ou(e,t,!1),i=!1}Ru(e)}function Qc(e,t,n,r,s,i,a,o,l,c,u,d,h,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ic(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mt});var f=(62914560&i)===i?Mc-le():(4194048&i)===i?Ic-le():0;if(null!==(f=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ih&&(ih=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var s=n[r],i=s.transferSize,a=s.initiatorType,o=s.duration;if(i&&o&&pd(a)){for(a=0,o=s.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&pd(d)&&(a+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(i+a)/(s.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var s=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ih?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(s)}}:null}(d,f)))return zc=i,e.cancelPendingCommit=f(gu.bind(null,e,t,i,n,r,s,a,o,l,u,d,null,h,p)),void Xc(e,i,a,!c)}gu(e,t,i,n,r,s,a,o,l)}function Yc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Xn(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xc(e,t,n,r){t&=~Oc,t&=~Pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-ke(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&Ie(e,n,t)}function Zc(){return 0!==(6&pc)||(Du(0,!1),!1)}function eu(){if(null!==gc){if(0===bc)var e=gc.return;else Es=Cs=null,aa(e=gc),oi=null,li=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc=0,eu(),fc=e,gc=n=zr(e.current,null),mc=t,bc=0,yc=null,vc=!1,kc=je(e,t),wc=!1,jc=Nc=Oc=Pc=Ec=Cc=0,xc=Tc=null,_c=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-ke(r),i=1<<s;t|=e[s],r&=~i}return Sc=t,xr(),n}function nu(e,t){qi=null,A.H=go,t===Ys||t===Zs?(t=ii(),bc=3):t===Xs?(t=ii(),bc=4):bc=t===Mo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,yc=t,null===gc&&(Cc=1,No(e,$r(t,e.current)))}function ru(){var e=Mi.current;return null===e||((4194048&mc)===mc?null===Ii:((62914560&mc)===mc||0!==(536870912&mc))&&e===Ii)}function su(){var e=A.H;return A.H=go,null===e?go:e}function iu(){var e=A.A;return A.A=dc,e}function au(){Cc=4,vc||(4194048&mc)!==mc&&null!==Mi.current||(kc=!0),0===(134217727&Ec)&&0===(134217727&Pc)||null===fc||Xc(fc,mc,Nc,!1)}function ou(e,t,n){var r=pc;pc|=2;var s=su(),i=iu();fc===e&&mc===t||(Rc=null,tu(e,t)),t=!1;var a=Cc;e:for(;;)try{if(0!==bc&&null!==gc){var o=gc,l=yc;switch(bc){case 8:eu(),a=6;break e;case 3:case 2:case 9:case 6:null===Mi.current&&(t=!0);var c=bc;if(bc=0,yc=null,hu(e,o,l,c),n&&kc){a=0;break e}break;default:c=bc,bc=0,yc=null,hu(e,o,l,c)}}lu(),a=Cc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,Es=Cs=null,pc=r,A.H=s,A.A=i,null===gc&&(fc=null,mc=0,xr()),a}function lu(){for(;null!==gc;)uu(gc)}function cu(){for(;null!==gc&&!ae();)uu(gc)}function uu(e){var t=al(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ko(n,t,t.pendingProps,t.type,void 0,mc);break;case 11:t=Ko(n,t,t.pendingProps,t.type.render,t.ref,mc);break;case 5:aa(t);default:gl(n,t),t=al(n,t=gc=Br(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function hu(e,t,n,r){Es=Cs=null,aa(t),oi=null,li=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ts(t,n,s,!0),null!==(n=Mi.current)){switch(n.tag){case 31:case 13:return null===Ii?au():null===n.alternate&&0===Cc&&(Cc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Eu(e,r,s)),!1;case 22:return n.flags|=65536,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Eu(e,r,s)),!1}throw Error(a(435,n.tag))}return Eu(e,r,s),au(),!1}if(ds)return null!==(t=Mi.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==fs&&ws($r(e=Error(a(422),{cause:r}),n))):(r!==fs&&ws($r(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=$r(r,n),wi(e,s=To(e.stateNode,r,s)),4!==Cc&&(Cc=2)),!1;var i=Error(a(520),{cause:r});if(i=$r(i,n),null===Tc?Tc=[i]:Tc.push(i),4!==Cc&&(Cc=2),null===t)return!0;r=$r(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,wi(n,e=To(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Dc||!Dc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,_o(s=xo(s),e,n,r),wi(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,mc))return Cc=1,No(e,$r(n,e.current)),void(gc=null)}catch(i){if(null!==s)throw gc=s,i;return Cc=1,No(e,$r(n,e.current)),void(gc=null)}32768&t.flags?(ds||1===r?e=!0:kc||0!==(536870912&mc)?e=!1:(vc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Mi.current)&&13===r.tag&&(r.flags|=16384))),fu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void fu(t,vc);e=t.return;var n=pl(t.alternate,t,Sc);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===Cc&&(Cc=5)}function fu(e,t){do{var n=fl(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);Cc=6,gc=null}function gu(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{ku()}while(0!==Fc);if(0!==(6&pc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-ke(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Ie(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Tr,o,l,c),e===fc&&(gc=fc=null,mc=0),Lc=t,Uc=e,zc=n,Bc=i,qc=s,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,se(he,function(){return wu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=A.T,A.T=null,s=R.p,R.p=2,o=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,fd=vh,sr(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(m){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===s&&(l=o),p===i&&++d===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gd={focusedElem:e,selectionRange:n},vh=!1,Il=t;null!==Il;)if(e=(t=Il).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Il=e;else for(;null!==Il;){switch(i=(t=Il).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(s=e[n]).ref.impl=s.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var g=Co(n.type,s);e=r.getSnapshotBeforeUpdate(g,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(b){Cu(n,n.return,b)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Td(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Td(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Il=e;break}Il=t.return}}(e,t)}finally{pc=o,R.p=s,A.T=r}}Fc=1,mu(),bu(),yu()}}function mu(){if(1===Fc){Fc=0;var e=Uc,t=Lc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=A.T,A.T=null;var r=R.p;R.p=2;var s=pc;pc|=4;try{Kl(t,e);var i=gd,a=rr(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&sr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=o.textContent.length,g=Math.min(l.start,f),m=void 0===l.end?g:Math.min(l.end,f);!p.extend&&g>m&&(a=m,m=g,g=a);var b=tr(o,g),y=tr(o,m);if(b&&y&&(1!==p.rangeCount||p.anchorNode!==b.node||p.anchorOffset!==b.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var v=d.createRange();v.setStart(b.node,b.offset),p.removeAllRanges(),g>m?(p.addRange(v),p.extend(y.node,y.offset)):(v.setEnd(y.node,y.offset),p.addRange(v))}}}}for(d=[],p=o;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var k=d[o];k.element.scrollLeft=k.left,k.element.scrollTop=k.top}}vh=!!fd,gd=fd=null}finally{pc=s,R.p=r,A.T=n}}e.current=t,Fc=2}}function bu(){if(2===Fc){Fc=0;var e=Uc,t=Lc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=A.T,A.T=null;var r=R.p;R.p=2;var s=pc;pc|=4;try{Al(e,t.alternate,t)}finally{pc=s,R.p=r,A.T=n}}Fc=3}}function yu(){if(4===Fc||3===Fc){Fc=0,oe();var e=Uc,t=Lc,n=zc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,Lc=Uc=null,vu(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Dc=null),Fe(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(be,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=A.T,s=R.p,R.p=2,A.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{A.T=t,R.p=s}}0!==(3&zc)&&ku(),Ru(e),s=e.pendingLanes,0!==(261930&n)&&0!==(42&s)?e===Kc?Gc++:(Gc=0,Kc=e):Gc=0,Du(0,!1)}}function vu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,zs(t)))}function ku(){return mu(),bu(),yu(),wu()}function wu(){if(5!==Fc)return!1;var e=Uc,t=Bc;Bc=0;var n=Fe(zc),r=A.T,s=R.p;try{R.p=32>n?32:n,A.T=null,n=qc,qc=null;var i=Uc,o=zc;if(Fc=0,Lc=Uc=null,zc=0,0!==(6&pc))throw Error(a(331));var l=pc;if(pc|=4,lc(i.current),ec(i,i.current,o,n),pc=l,Du(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(be,i)}catch(c){}return!0}finally{R.p=s,A.T=r,vu(e,t)}}function Su(e,t,n){t=$r(n,t),null!==(e=vi(e,t=To(e.stateNode,t,2),2))&&(Me(e,2),Ru(e))}function Cu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Dc||!Dc.has(r))){e=$r(n,e),null!==(r=vi(t,n=xo(2),2))&&(_o(n,r,t,e),Me(r,2),Ru(r));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(wc=!0,s.add(n),e=Pu.bind(null,e,t,n),t.then(e,e))}function Pu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fc===e&&(mc&n)===n&&(4===Cc||3===Cc&&(62914560&mc)===mc&&300>le()-Mc?0===(2&pc)&&tu(e,0):Oc|=n,jc===mc&&(jc=0)),Ru(e)}function Ou(e,t){0===t&&(t=xe()),null!==(e=Ir(e,t))&&(Me(e,t),Ru(e))}function Nu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ou(e,n)}function ju(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ou(e,n)}var Tu=null,xu=null,_u=!1,Mu=!1,Iu=!1,Au=0;function Ru(e){e!==xu&&null===e.next&&(null===xu?Tu=xu=e:xu=xu.next=e),Mu=!0,_u||(_u=!0,Ed(function(){0!==(6&pc)?se(ue,Fu):Uu()}))}function Du(e,t){if(!Iu&&Mu){Iu=!0;do{for(var n=!1,r=Tu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-ke(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Bu(r,i))}else i=mc,0===(3&(i=Ne(r,r===fc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||je(r,i)||(n=!0,Bu(r,i));r=r.next}}while(n);Iu=!1}}function Fu(){Uu()}function Uu(){Mu=_u=!1;var e=0;0!==Au&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==kd&&(kd=e,!0);return kd=null,!1}()&&(e=Au);for(var t=le(),n=null,r=Tu;null!==r;){var s=r.next,i=Lu(r,t);0===i?(r.next=null,null===n?Tu=s:n.next=s,null===s&&(xu=n)):(n=r,(0!==e||0!==(3&i))&&(Mu=!0)),r=s}0!==Fc&&5!==Fc||Du(e,!1),0!==Au&&(Au=0)}function Lu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-ke(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=Te(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=mc,n=Ne(e,e===(t=fc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===bc||9===bc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||je(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Fe(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=fe}return r=zu.bind(null,e),n=se(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function zu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=mc;return 0===(r=Ne(e,e===fc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,r,t),Lu(e,le()),null!=e.callbackNode&&e.callbackNode===n?zu.bind(null,e):null)}function Bu(e,t){if(ku())return null;Jc(e,t,!0)}function qu(){if(0===Au){var e=Hs;0===e&&(e=Ce,0===(261888&(Ce<<=1))&&(Ce=256)),Au=e}return Au}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:_t(""+e)}function Gu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<Er.length;Ku++){var Wu=Er[Ku];Pr(Wu.toLowerCase(),"on"+(Wu[0].toUpperCase()+Wu.slice(1)))}Pr(mr,"onAnimationEnd"),Pr(br,"onAnimationIteration"),Pr(yr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(vr,"onTransitionRun"),Pr(kr,"onTransitionStart"),Pr(wr,"onTransitionCancel"),Pr(Sr,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$u=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vu));function Ju(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){Or(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){Or(u)}s.currentTarget=null,i=l}}}}function Qu(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Yu(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[Xu]){e[Xu]=!0,tt.forEach(function(t){"selectionchange"!==t&&($u.has(t)||Yu(t,!1,e),Yu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xu]||(t[Xu]=!0,Yu("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Oh(t)){case 2:var s=kh;break;case 8:s=wh;break;default:s=Sh}n=s.bind(null,t,n,e),s=void 0,!qt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function td(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=Qe(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}Lt(function(){var r=i,s=At(n),a=[];e:{var o=Cr.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===$t(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=kn;break;case mr:case br:case yr:c=un;break;case Sr:c=wn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=vn;break;case"toggle":case"beforetoggle":c=Cn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==o?o+"Capture":null:o;d=[];for(var f,g=r;null!==g;){var m=g;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===p||null!=(m=zt(g,p))&&d.push(nd(g,m,f)),h)break;g=g.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===It||!(u=n.relatedTarget||n.fromElement)||!Qe(u)&&!u[He])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Qe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,m="onMouseLeave",p="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=vn,m="onPointerLeave",p="onPointerEnter",g="pointer"),h=null==c?o:Xe(c),f=null==u?o:Xe(u),(o=new d(m,g+"leave",c,n,s)).target=h,o.relatedTarget=f,m=null,Qe(s)===r&&((d=new d(p,g+"enter",u,n,s)).target=f,d.relatedTarget=h,m=d),h=m,c&&u)e:{for(d=sd,g=u,f=0,m=p=c;m;m=d(m))f++;m=0;for(var b=g;b;b=d(b))m++;for(;0<f-m;)p=d(p),f--;for(;0<m-f;)g=d(g),m--;for(;f--;){if(p===g||null!==g&&p===g.alternate){d=p;break e}p=d(p),g=d(g)}d=null}else d=null;null!==c&&id(a,o,c,d,!1),null!==u&&null!==h&&id(a,h,u,d,!0)}if("select"===(c=(o=r?Xe(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Bn;else if(Rn(o))if(qn)y=Yn;else{y=Jn;var v=$n}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&jt(r.elementType)&&(y=Bn):y=Qn;switch(y&&(y=y(e,r))?Dn(a,y,n,s):(v&&v(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&kt(o,"number",o.value)),v=r?Xe(r):window,e){case"focusin":(Rn(v)||"true"===v.contentEditable)&&(ar=v,or=r,lr=null);break;case"focusout":lr=or=ar=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(a,n,s);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":ur(a,n,s)}var k;if(Pn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else In?_n(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(jn&&"ko"!==n.locale&&(In||"onCompositionStart"!==w?"onCompositionEnd"===w&&In&&(k=Vt()):(Kt="value"in(Gt=s)?Gt.value:Gt.textContent,In=!0)),0<(v=rd(r,w)).length&&(w=new hn(w,e,null,n,s),a.push({event:w,listeners:v}),k?w.data=k:null!==(k=Mn(n))&&(w.data=k))),(k=Nn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(xn=!0,Tn);case"textInput":return(e=t.data)===Tn&&xn?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!Pn&&_n(e,t)?(e=Vt(),Wt=Kt=Gt=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=rd(r,"onBeforeInput")).length&&(v=new hn("onBeforeInput","beforeinput",null,n,s),a.push({event:v,listeners:w}),v.data=k)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=Hu((s[qe]||null).action),a=r.submitter;a&&null!==(t=(t=a[qe]||null)?Hu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new nn("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Au){var e=a?Gu(s,a):new FormData(s);eo(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Gu(s,a):new FormData(s),eo(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Ju(a,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=zt(e,n))&&r.unshift(nd(e,s,i)),null!=(s=zt(e,t))&&r.push(nd(e,s,i))),3===e.tag)return r;e=e.return}return[]}function sd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=zt(n,i))&&a.unshift(nd(n,c,l)):s||null!=(c=zt(n,i))&&a.push(nd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ad=/\r\n?/g,od=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(ad,"\n").replace(od,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Nt(e,r,i);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=_t(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&ud(e,t,"name",s.name,s,null),ud(e,t,"formEncType",s.formEncType,s,null),ud(e,t,"formMethod",s.formMethod,s,null),ud(e,t,"formTarget",s.formTarget,s,null)):(ud(e,t,"encType",s.encType,s,null),ud(e,t,"method",s.method,s,null),ud(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=_t(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Mt);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=_t(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Qu("beforetoggle",e),Qu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Tt.get(n)||n,r)}}function dd(e,t,n,r,s,i){switch(n){case"style":Nt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Mt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[qe]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qu("error",e),Qu("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,r,o,n,null)}}return i&&ud(e,t,"srcSet",n.srcSet,n,null),void(s&&ud(e,t,"src",n.src,n,null));case"input":Qu("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:ud(e,t,s,d,n,null)}}return void vt(e,r,l,c,u,o,i,!1);case"select":for(i in Qu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:ud(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?wt(e,!!s,t,!1):null!=n&&wt(e,!!s,n,!0));case"textarea":for(o in Qu("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:ud(e,t,o,l,n,null)}return void Ct(e,s,i,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else ud(e,t,c,s,n,null);return;case"dialog":Qu("beforetoggle",e),Qu("toggle",e),Qu("cancel",e),Qu("close",e);break;case"iframe":case"object":Qu("load",e);break;case"video":case"audio":for(s=0;s<Vu.length;s++)Qu(Vu[s],e);break;case"image":Qu("error",e),Qu("load",e);break;case"details":Qu("toggle",e);break;case"embed":case"source":case"link":Qu("error",e),Qu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,u,s,n,null)}return;default:if(jt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&dd(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&ud(e,t,l,s,n,null))}function pd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var fd=null,gd=null;function md(e){return 9===e.nodeType?e:e.ownerDocument}function bd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function vd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var kd=null;var wd="function"===typeof setTimeout?setTimeout:void 0,Sd="function"===typeof clearTimeout?clearTimeout:void 0,Cd="function"===typeof Promise?Promise:void 0,Ed="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Cd?function(e){return Cd.resolve(null).then(e).catch(Pd)}:wd;function Pd(e){setTimeout(function(){throw e})}function Od(e){return"head"===e}function Nd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)||"/&"===n){if(0===r)return e.removeChild(s),void Gh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Ud(e.ownerDocument.documentElement);else if("head"===n){Ud(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var a=i.nextSibling,o=i.nodeName;i[$e]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=a}}else"body"===n&&Ud(e.ownerDocument.body);n=s}while(n);Gh(t)}function jd(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Td(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Td(n),Je(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function xd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Id(e.nextSibling)))return null}return e}function _d(e){return"$?"===e.data||"$~"===e.data}function Md(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Id(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Ad=null;function Rd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Id(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Dd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=md(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Ud(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Je(e)}var Ld=new Map,zd=new Set;function Bd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var qd=R.d;R.d={f:function(){var e=qd.f(),t=Zc();return e||t},r:function(e){var t=Ye(e);null!==t&&5===t.tag&&"form"===t.type?no(t):qd.r(e)},D:function(e){qd.D(e),Gd("dns-prefetch",e,null)},C:function(e,t){qd.C(e,t),Gd("preconnect",e,t)},L:function(e,t,n){qd.L(e,t,n);var r=Hd;if(r&&e&&t){var s='link[rel="preload"][as="'+bt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+bt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+bt(n.imageSizes)+'"]')):s+='[href="'+bt(e)+'"]';var i=s;switch(t){case"style":i=Wd(e);break;case"script":i=Jd(e)}Ld.has(i)||(e=p({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ld.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Vd(i))||"script"===t&&r.querySelector(Qd(i))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){qd.m(e,t);var n=Hd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+bt(r)+'"][href="'+bt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Jd(e)}if(!Ld.has(i)&&(e=p({rel:"modulepreload",href:e},t),Ld.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qd(i)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){qd.X(e,t);var n=Hd;if(n&&e){var r=Ze(n).hoistableScripts,s=Jd(e),i=r.get(s);i||((i=n.querySelector(Qd(s)))||(e=p({src:e,async:!0},t),(t=Ld.get(s))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){qd.S(e,t,n);var r=Hd;if(r&&e){var s=Ze(r).hoistableStyles,i=Wd(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Vd(i)))o.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ld.get(i))&&Zd(e,n);var l=a=r.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Xd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){qd.M(e,t);var n=Hd;if(n&&e){var r=Ze(n).hoistableScripts,s=Jd(e),i=r.get(s);i||((i=n.querySelector(Qd(s)))||(e=p({src:e,async:!0,type:"module"},t),(t=Ld.get(s))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Hd="undefined"===typeof document?null:document;function Gd(e,t,n){var r=Hd;if(r&&"string"===typeof t&&t){var s=bt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),zd.has(s)||(zd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Kd(e,t,n,r){var s,i,o,l,c=(c=W.current)?Bd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Wd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Wd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Vd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Ld.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ld.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),hd(i,"link",o),et(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Jd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Wd(e){return'href="'+bt(e)+'"'}function Vd(e){return'link[rel="stylesheet"]['+e+"]"}function $d(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Jd(e){return'[src="'+bt(e)+'"]'}function Qd(e){return"script[async]"+e}function Yd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+bt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var s=p({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",s),Xd(r,n.precedence,e),t.instance=r;case"stylesheet":s=Wd(n.href);var i=e.querySelector(Vd(s));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=$d(n),(s=Ld.get(s))&&Zd(r,s),et(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(i,"link",r),t.state.loading|=4,Xd(i,n.precedence,e),t.instance=i;case"script":return i=Jd(n.src),(s=e.querySelector(Qd(i)))?(t.instance=s,et(s),s):(r=n,(s=Ld.get(i))&&eh(r=p({},n),s),et(s=(e=e.ownerDocument||e).createElement("script")),hd(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Xd(r,n.precedence,e));return t.instance}function Xd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Zd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,s=th=new Map;s.set(n,r)}else(r=(s=th).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[$e]||i[Be]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function sh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ih=0;function ah(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var oh=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,oh=new Map,t.forEach(ch,e),oh=null,ah.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=oh.get(e);if(n)var r=n.get(null);else{n=new Map,oh.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=ah.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var uh={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function dh(e,t,n,r,s,i,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,r,s,i,a,o,l,c,u,d){return e=new dh(e,t,n,a,l,c,u,d,o),t=1,!0===i&&(t|=24),i=Ur(3,null,null,t),e.current=i,i.stateNode=e,(t=Ls()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},mi(i),e}function ph(e){return e?e=Dr:Dr}function fh(e,t,n,r,s,i){s=ph(s),null===r.context?r.context=s:r.pendingContext=s,(r=yi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=vi(e,r,t))&&($c(n,0,t),ki(n,e,t))}function gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function mh(e,t){gh(e,t),(e=e.alternate)&&gh(e,t)}function bh(e){if(13===e.tag||31===e.tag){var t=Ir(e,67108864);null!==t&&$c(t,0,67108864),mh(e,67108864)}}function yh(e){if(13===e.tag||31===e.tag){var t=Wc(),n=Ir(e,t=De(t));null!==n&&$c(n,0,t),mh(e,t)}}var vh=!0;function kh(e,t,n,r){var s=A.T;A.T=null;var i=R.p;try{R.p=2,Sh(e,t,n,r)}finally{R.p=i,A.T=s}}function wh(e,t,n,r){var s=A.T;A.T=null;var i=R.p;try{R.p=8,Sh(e,t,n,r)}finally{R.p=i,A.T=s}}function Sh(e,t,n,r){if(vh){var s=Ch(r);if(null===s)td(e,t,r,Eh,n),Rh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return jh=Dh(jh,e,t,n,r,s),!0;case"dragenter":return Th=Dh(Th,e,t,n,r,s),!0;case"mouseover":return xh=Dh(xh,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return _h.set(i,Dh(_h.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Mh.set(i,Dh(Mh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Rh(e,r),4&t&&-1<Ah.indexOf(e)){for(;null!==s;){var i=Ye(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=Oe(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-ke(a);o.entanglements[1]|=l,a&=~l}Ru(i),0===(6&pc)&&(Ac=le()+500,Du(0,!1))}}break;case 31:case 13:null!==(o=Ir(i,2))&&$c(o,0,2),Zc(),mh(i,2)}if(null===(i=Ch(r))&&td(e,t,r,Eh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else td(e,t,r,null,n)}}function Ch(e){return Ph(e=At(e))}var Eh=null;function Ph(e){if(Eh=null,null!==(e=Qe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Eh=e,null}function Oh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Nh=!1,jh=null,Th=null,xh=null,_h=new Map,Mh=new Map,Ih=[],Ah="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rh(e,t){switch(e){case"focusin":case"focusout":jh=null;break;case"dragenter":case"dragleave":Th=null;break;case"mouseover":case"mouseout":xh=null;break;case"pointerover":case"pointerout":_h.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(t.pointerId)}}function Dh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Ye(t))&&bh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Fh(e){var t=Qe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Le(e.priority,function(){yh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Le(e.priority,function(){yh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Uh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ch(e.nativeEvent);if(null!==n)return null!==(t=Ye(n))&&bh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function Lh(e,t,n){Uh(e)&&n.delete(t)}function zh(){Nh=!1,null!==jh&&Uh(jh)&&(jh=null),null!==Th&&Uh(Th)&&(Th=null),null!==xh&&Uh(xh)&&(xh=null),_h.forEach(Lh),Mh.forEach(Lh)}function Bh(e,t){e.blockedOn===t&&(e.blockedOn=null,Nh||(Nh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zh)))}var qh=null;function Hh(e){qh!==e&&(qh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qh===e&&(qh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===Ph(r||n))continue;break}var i=Ye(n);null!==i&&(e.splice(t,3),t-=3,eo(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Gh(e){function t(t){return Bh(t,e)}null!==jh&&Bh(jh,e),null!==Th&&Bh(Th,e),null!==xh&&Bh(xh,e),_h.forEach(t),Mh.forEach(t);for(var n=0;n<Ih.length;n++){var r=Ih[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Ih.length&&null===(n=Ih[0]).blockedOn;)Fh(n),null===n.blockedOn&&Ih.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[qe]||null;if("function"===typeof i)a||Hh(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[qe]||null)o=a.formAction;else if(null!==Ph(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Hh(n)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return s=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==s&&(s(),s=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==s&&(s(),s=null)}}}function Wh(e){this._internalRoot=e}function Vh(e){this._internalRoot=e}Vh.prototype.render=Wh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));fh(t.current,Wc(),e,t,null,null)},Vh.prototype.unmount=Wh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fh(e.current,2,null,e,null,null),Zc(),t[He]=null}},Vh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ue();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ih.length&&0!==t&&t<Ih[n].priority;n++);Ih.splice(n,0,e),0===n&&Fh(e)}};var $h=s.version;if("19.2.3"!==$h)throw Error(a(527,$h,"19.2.3"));R.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return d(s),e;if(i===r)return d(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Jh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{be=Qh.inject(Jh),ye=Qh}catch(Xh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=Eo,i=Po,l=Oo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,s,i,l,Kh),e[He]=t.current,Zu(e),new Wh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,s="",i=Eo,l=Po,c=Oo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,s,u,i,l,c,Kh)).context=ph(null),n=t.current,(s=yi(r=De(r=Wc()))).callback=null,vi(n,s,r),n=r,t.current.lanes=n,Me(t,n),Ru(t),e[He]=t.current,Zu(e),new Vh(t)},t.version="19.2.3"},43:(e,t,n)=>{"use strict";e.exports=n(288)},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),f=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,b={};function y(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}function v(){}function k(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=k.prototype=new v;w.constructor=k,m(w,y.prototype),w.isPureReactComponent=!0;var S=Array.isArray;function C(){}var E={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function O(e,t,r){var s=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==s?s:null,props:r}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function x(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return x((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+T(e,0):i,S(a)?(s="",null!=u&&(s=u.replace(j,"$&/")+"/"),x(a,t,s,"",function(e){return e})):null!=a&&(N(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+u,a=O(l.type,c,l.props)),t.push(a)),1;u=0;var d,p=""===i?".":i+":";if(S(e))for(var g=0;g<e.length;g++)u+=x(i=e[g],t,s,o=p+T(i,g),a);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(i=e.next()).done;)u+=x(i=i.value,t,s,o=p+T(i,g++),a);else if("object"===o){if("function"===typeof e.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(C,C):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function _(e,t,n){if(null==e)return e;var r=[],s=0;return x(e,r,"","",function(e){return t.call(n,e,s++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},A={map:_,forEach:function(e,t,n){_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _(e,function(){t++}),t},toArray:function(e){return _(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=A,t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=k,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return E.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.key&&(s=""+t.key),t)!P.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return O(e.type,s,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)P.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return O(e,i,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),s=E.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(C,I)}catch(i){I(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return E.H.useEffect(e,t)},t.useEffectEvent=function(e){return E.H.useEffectEvent(e)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.2.3"},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},816:function(e,t,n){e.exports=function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r={exports:{}};!function(t){!function(e,n){var r=Math.pow(2,-24),s=Math.pow(2,32),i=Math.pow(2,53),a={encode:function(e){var t,r=new ArrayBuffer(256),a=new DataView(r),o=0;function l(e){for(var n=r.byteLength,s=o+e;n<s;)n*=2;if(n!==r.byteLength){var i=a;r=new ArrayBuffer(n),a=new DataView(r);for(var l=o+3>>2,c=0;c<l;++c)a.setUint32(4*c,i.getUint32(4*c))}return t=e,a}function c(){o+=t}function u(e){c(l(1).setUint8(o,e))}function d(e){for(var t=l(e.length),n=0;n<e.length;++n)t.setUint8(o+n,e[n]);c()}function h(e,t){t<24?u(e<<5|t):t<256?(u(e<<5|24),u(t)):t<65536?(u(e<<5|25),function(e){c(l(2).setUint16(o,e))}(t)):t<4294967296?(u(e<<5|26),function(e){c(l(4).setUint32(o,e))}(t)):(u(e<<5|27),function(e){var t=e%s,n=(e-t)/s,r=l(8);r.setUint32(o,n),r.setUint32(o+4,t),c()}(t))}if(function e(t){var r;if(!1===t)return u(244);if(!0===t)return u(245);if(null===t)return u(246);if(t===n)return u(247);switch(typeof t){case"number":if(Math.floor(t)===t){if(0<=t&&t<=i)return h(0,t);if(-i<=t&&t<0)return h(1,-(t+1))}return u(251),function(e){c(l(8).setFloat64(o,e))}(t);case"string":var s=[];for(r=0;r<t.length;++r){var a=t.charCodeAt(r);a<128?s.push(a):a<2048?(s.push(192|a>>6),s.push(128|63&a)):a<55296?(s.push(224|a>>12),s.push(128|a>>6&63),s.push(128|63&a)):(a=(1023&a)<<10,a|=1023&t.charCodeAt(++r),a+=65536,s.push(240|a>>18),s.push(128|a>>12&63),s.push(128|a>>6&63),s.push(128|63&a))}return h(3,s.length),d(s);default:var p;if(Array.isArray(t))for(h(4,p=t.length),r=0;r<p;++r)e(t[r]);else if(t instanceof Uint8Array)h(2,t.length),d(t);else{var f=Object.keys(t);for(h(5,p=f.length),r=0;r<p;++r){var g=f[r];e(g),e(t[g])}}}}(e),"slice"in r)return r.slice(0,o);for(var p=new ArrayBuffer(o),f=new DataView(p),g=0;g<o;++g)f.setUint8(g,a.getUint8(g));return p},decode:function(e,t,i){var a=new DataView(e),o=0;function l(e,t){return o+=t,e}function c(t){return l(new Uint8Array(e,o,t),t)}function u(){return l(a.getUint8(o),1)}function d(){return l(a.getUint16(o),2)}function h(){return l(a.getUint32(o),4)}function p(){return 255===a.getUint8(o)&&(o+=1,!0)}function f(e){if(e<24)return e;if(24===e)return u();if(25===e)return d();if(26===e)return h();if(27===e)return h()*s+h();if(31===e)return-1;throw"Invalid length encoding"}function g(e){var t=u();if(255===t)return-1;var n=f(31&t);if(n<0||t>>5!==e)throw"Invalid indefinite length element";return n}function m(e,t){for(var n=0;n<t;++n){var r=u();128&r&&(r<224?(r=(31&r)<<6|63&u(),t-=1):r<240?(r=(15&r)<<12|(63&u())<<6|63&u(),t-=2):(r=(15&r)<<18|(63&u())<<12|(63&u())<<6|63&u(),t-=3)),r<65536?e.push(r):(r-=65536,e.push(55296|r>>10),e.push(56320|1023&r))}}"function"!=typeof t&&(t=function(e){return e}),"function"!=typeof i&&(i=function(){return n});var b=function e(){var s,h,b=u(),y=b>>5,v=31&b;if(7===y)switch(v){case 25:return function(){var e=new ArrayBuffer(4),t=new DataView(e),n=d(),s=32768&n,i=31744&n,a=1023&n;if(31744===i)i=261120;else if(0!==i)i+=114688;else if(0!==a)return a*r;return t.setUint32(0,s<<16|i<<13|a<<13),t.getFloat32(0)}();case 26:return l(a.getFloat32(o),4);case 27:return l(a.getFloat64(o),8)}if((h=f(v))<0&&(y<2||6<y))throw"Invalid length";switch(y){case 0:return h;case 1:return-1-h;case 2:if(h<0){for(var k=[],w=0;(h=g(y))>=0;)w+=h,k.push(c(h));var S=new Uint8Array(w),C=0;for(s=0;s<k.length;++s)S.set(k[s],C),C+=k[s].length;return S}return c(h);case 3:var E=[];if(h<0)for(;(h=g(y))>=0;)m(E,h);else m(E,h);return String.fromCharCode.apply(null,E);case 4:var P;if(h<0)for(P=[];!p();)P.push(e());else for(P=new Array(h),s=0;s<h;++s)P[s]=e();return P;case 5:var O={};for(s=0;s<h||h<0&&!p();++s)O[e()]=e();return O;case 6:return t(e(),h);case 7:switch(h){case 20:return!1;case 21:return!0;case 22:return null;case 23:return n;default:return i(h)}}}();if(o!==e.byteLength)throw"Remaining bytes";return b}};t.exports?t.exports=a:e.CBOR||(e.CBOR=a)}(e)}(r);var s,i=t(r.exports);function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function o(e,t,n,r){return new(n||(n=Promise))(function(s,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;class l{static legacyCryptoModule(e){throw new Error("Should be implemented by concrete crypto module implementation.")}static aesCbcCryptoModule(e){throw new Error("Should be implemented by concrete crypto module implementation.")}constructor(e){var t;this.defaultCryptor=e.default,this.cryptors=null!==(t=e.cryptors)&&void 0!==t?t:[]}set logger(e){throw new Error("Method not implemented.")}getAllCryptors(){return[this.defaultCryptor,...this.cryptors]}toString(){return"AbstractCryptoModule { default: ".concat(this.defaultCryptor.toString(),", cryptors: [").concat(this.cryptors.map(e=>e.toString()).join(", "),"]}")}}l.encoder=new TextEncoder,l.decoder=new TextDecoder;class c{static create(e){return new c(e)}constructor(e){let t,n,r,s;if(e instanceof File)s=e,r=e.name,n=e.type,t=e.size;else if("data"in e){const i=e.data;n=e.mimeType,r=e.name,s=new File([i],r,{type:n}),t=s.size}if(void 0===s)throw new Error("Couldn't construct a file out of supplied options.");if(void 0===r)throw new Error("Couldn't guess filename out of the options. Please provide one.");t&&(this.contentLength=t),this.mimeType=n,this.data=s,this.name=r}toBuffer(){return o(this,void 0,void 0,function*(){throw new Error("This feature is only supported in Node.js environments.")})}toArrayBuffer(){return o(this,void 0,void 0,function*(){return new Promise((e,t)=>{const n=new FileReader;n.addEventListener("load",()=>{if(n.result instanceof ArrayBuffer)return e(n.result)}),n.addEventListener("error",()=>t(n.error)),n.readAsArrayBuffer(this.data)})})}toString(){return o(this,void 0,void 0,function*(){return new Promise((e,t)=>{const n=new FileReader;n.addEventListener("load",()=>{if("string"==typeof n.result)return e(n.result)}),n.addEventListener("error",()=>{t(n.error)}),n.readAsBinaryString(this.data)})})}toStream(){return o(this,void 0,void 0,function*(){throw new Error("This feature is only supported in Node.js environments.")})}toFile(){return o(this,void 0,void 0,function*(){return this.data})}toFileUri(){return o(this,void 0,void 0,function*(){throw new Error("This feature is only supported in React Native environments.")})}toBlob(){return o(this,void 0,void 0,function*(){return this.data})}}function u(e){const t=e.replace(/==?$/,""),n=Math.floor(t.length/4*3),r=new ArrayBuffer(n),s=new Uint8Array(r);let i=0;function a(){const e=t.charAt(i++),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);if(-1===n)throw new Error("Illegal character at ".concat(i,": ").concat(t.charAt(i-1)));return n}for(let o=0;o<n;o+=3){const e=a(),t=a(),n=a(),r=a(),i=(63&e)<<2|t>>4,l=(15&t)<<4|n>>2,c=(3&n)<<6|r;s[o]=i,64!=n&&(s[o+1]=l),64!=r&&(s[o+2]=c)}return r}function d(e){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(e),s=r.byteLength,i=s%3,a=s-i;let o,l,c,u,d;for(let h=0;h<a;h+=3)d=r[h]<<16|r[h+1]<<8|r[h+2],o=(16515072&d)>>18,l=(258048&d)>>12,c=(4032&d)>>6,u=63&d,t+=n[o]+n[l]+n[c]+n[u];return 1==i?(d=r[a],o=(252&d)>>2,l=(3&d)<<4,t+=n[o]+n[l]+"=="):2==i&&(d=r[a]<<8|r[a+1],o=(64512&d)>>10,l=(1008&d)>>4,c=(15&d)<<2,t+=n[o]+n[l]+n[c]+"="),t}c.supportsBlob="undefined"!=typeof Blob,c.supportsFile="undefined"!=typeof File,c.supportsBuffer=!1,c.supportsStream=!1,c.supportsString=!0,c.supportsArrayBuffer=!0,c.supportsEncryptFile=!0,c.supportsFileUri=!1,function(e){e.PNNetworkIssuesCategory="PNNetworkIssuesCategory",e.PNTimeoutCategory="PNTimeoutCategory",e.PNCancelledCategory="PNCancelledCategory",e.PNBadRequestCategory="PNBadRequestCategory",e.PNAccessDeniedCategory="PNAccessDeniedCategory",e.PNValidationErrorCategory="PNValidationErrorCategory",e.PNAcknowledgmentCategory="PNAcknowledgmentCategory",e.PNMalformedResponseCategory="PNMalformedResponseCategory",e.PNServerErrorCategory="PNServerErrorCategory",e.PNUnknownCategory="PNUnknownCategory",e.PNNetworkUpCategory="PNNetworkUpCategory",e.PNNetworkDownCategory="PNNetworkDownCategory",e.PNReconnectedCategory="PNReconnectedCategory",e.PNConnectedCategory="PNConnectedCategory",e.PNSubscriptionChangedCategory="PNSubscriptionChangedCategory",e.PNRequestMessageCountExceededCategory="PNRequestMessageCountExceededCategory",e.PNDisconnectedCategory="PNDisconnectedCategory",e.PNConnectionErrorCategory="PNConnectionErrorCategory",e.PNDisconnectedUnexpectedlyCategory="PNDisconnectedUnexpectedlyCategory",e.PNSharedWorkerUpdatedCategory="PNSharedWorkerUpdatedCategory"}(s||(s={}));var h=s;class p extends Error{constructor(e,t){super(e),this.status=t,this.name="PubNubError",this.message=e,Object.setPrototypeOf(this,new.target.prototype)}}function f(e,t){var n;return null!==(n=e.statusCode)&&void 0!==n||(e.statusCode=0),Object.assign(Object.assign({},e),{statusCode:e.statusCode,category:t,error:!0})}function g(e,t){return f(Object.assign(Object.assign({message:"Unable to deserialize service response"},void 0!==e?{responseText:e}:{}),void 0!==t?{statusCode:t}:{}),h.PNMalformedResponseCategory)}var m,b,y,v,k,w=w||function(e){var t={},n=t.lib={},r=function(){},s=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=n.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||o).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var s=0;s<e;s++)t[r+s>>>2]|=(n[s>>>2]>>>24-s%4*8&255)<<24-(r+s)%4*8;else if(65535<n.length)for(s=0;s<e;s+=4)t[r+s>>>2]=n[s>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new i.init(n,t)}}),a=t.enc={},o=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var s=t[r>>>2]>>>24-r%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new i.init(n,t/2)}},l=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new i.init(n,t)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,s=n.sigBytes,a=this.blockSize,o=s/(4*a);if(t=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,s=e.min(4*t,s),t){for(var l=0;l<t;l+=a)this._doProcessBlock(r,l);l=r.splice(0,t),n.sigBytes-=s}return new i.init(l,s)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=u.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=t.algo={};return t}(Math);!function(e){for(var t=w,n=(s=t.lib).WordArray,r=s.Hasher,s=t.algo,i=[],a=[],o=function(e){return 4294967296*(e-(0|e))|0},l=2,c=0;64>c;){var u;e:{u=l;for(var d=e.sqrt(u),h=2;h<=d;h++)if(!(u%h)){u=!1;break e}u=!0}u&&(8>c&&(i[c]=o(e.pow(l,.5))),a[c]=o(e.pow(l,1/3)),c++),l++}var p=[];s=s.SHA256=r.extend({_doReset:function(){this._hash=new n.init(i.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],s=n[1],i=n[2],o=n[3],l=n[4],c=n[5],u=n[6],d=n[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var f=p[h-15],g=p[h-2];p[h]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+p[h-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[h-16]}f=d+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&c^~l&u)+a[h]+p[h],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&s^r&i^s&i),d=u,u=c,c=l,l=o+f|0,o=i,i=s,s=r,r=f+g|0}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+i|0,n[3]=n[3]+o|0,n[4]=n[4]+l|0,n[5]=n[5]+c|0,n[6]=n[6]+u|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,s=8*t.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=e.floor(r/4294967296),n[15+(s+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=r._createHelper(s),t.HmacSHA256=r._createHmacHelper(s)}(Math),b=(m=w).enc.Utf8,m.algo.HMAC=m.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=b.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),i=this._iKey=t.clone(),a=s.words,o=i.words,l=0;l<n;l++)a[l]^=1549556828,o[l]^=909522486;s.sigBytes=i.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),v=(y=w).lib.WordArray,y.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var s=0;s<n;s+=3)for(var i=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;4>a&&s+.75*a<n;a++)e.push(r.charAt(i>>>6*(3-a)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;(r=n.charAt(64))&&-1!=(r=e.indexOf(r))&&(t=r);for(var r=[],s=0,i=0;i<t;i++)if(i%4){var a=n.indexOf(e.charAt(i-1))<<i%4*2,o=n.indexOf(e.charAt(i))>>>6-i%4*2;r[s>>>2]|=(a|o)<<24-s%4*8,s++}return v.create(r,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,n,r,s,i,a){return((e=e+(t&n|~t&r)+s+a)<<i|e>>>32-i)+t}function n(e,t,n,r,s,i,a){return((e=e+(t&r|n&~r)+s+a)<<i|e>>>32-i)+t}function r(e,t,n,r,s,i,a){return((e=e+(t^n^r)+s+a)<<i|e>>>32-i)+t}function s(e,t,n,r,s,i,a){return((e=e+(n^(t|~r))+s+a)<<i|e>>>32-i)+t}for(var i=w,a=(l=i.lib).WordArray,o=l.Hasher,l=i.algo,c=[],u=0;64>u;u++)c[u]=4294967296*e.abs(e.sin(u+1))|0;l=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var a=0;16>a;a++){var o=e[l=i+a];e[l]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}a=this._hash.words;var l=e[i+0],u=(o=e[i+1],e[i+2]),d=e[i+3],h=e[i+4],p=e[i+5],f=e[i+6],g=e[i+7],m=e[i+8],b=e[i+9],y=e[i+10],v=e[i+11],k=e[i+12],w=e[i+13],S=e[i+14],C=e[i+15],E=t(E=a[0],N=a[1],O=a[2],P=a[3],l,7,c[0]),P=t(P,E,N,O,o,12,c[1]),O=t(O,P,E,N,u,17,c[2]),N=t(N,O,P,E,d,22,c[3]);E=t(E,N,O,P,h,7,c[4]),P=t(P,E,N,O,p,12,c[5]),O=t(O,P,E,N,f,17,c[6]),N=t(N,O,P,E,g,22,c[7]),E=t(E,N,O,P,m,7,c[8]),P=t(P,E,N,O,b,12,c[9]),O=t(O,P,E,N,y,17,c[10]),N=t(N,O,P,E,v,22,c[11]),E=t(E,N,O,P,k,7,c[12]),P=t(P,E,N,O,w,12,c[13]),O=t(O,P,E,N,S,17,c[14]),E=n(E,N=t(N,O,P,E,C,22,c[15]),O,P,o,5,c[16]),P=n(P,E,N,O,f,9,c[17]),O=n(O,P,E,N,v,14,c[18]),N=n(N,O,P,E,l,20,c[19]),E=n(E,N,O,P,p,5,c[20]),P=n(P,E,N,O,y,9,c[21]),O=n(O,P,E,N,C,14,c[22]),N=n(N,O,P,E,h,20,c[23]),E=n(E,N,O,P,b,5,c[24]),P=n(P,E,N,O,S,9,c[25]),O=n(O,P,E,N,d,14,c[26]),N=n(N,O,P,E,m,20,c[27]),E=n(E,N,O,P,w,5,c[28]),P=n(P,E,N,O,u,9,c[29]),O=n(O,P,E,N,g,14,c[30]),E=r(E,N=n(N,O,P,E,k,20,c[31]),O,P,p,4,c[32]),P=r(P,E,N,O,m,11,c[33]),O=r(O,P,E,N,v,16,c[34]),N=r(N,O,P,E,S,23,c[35]),E=r(E,N,O,P,o,4,c[36]),P=r(P,E,N,O,h,11,c[37]),O=r(O,P,E,N,g,16,c[38]),N=r(N,O,P,E,y,23,c[39]),E=r(E,N,O,P,w,4,c[40]),P=r(P,E,N,O,l,11,c[41]),O=r(O,P,E,N,d,16,c[42]),N=r(N,O,P,E,f,23,c[43]),E=r(E,N,O,P,b,4,c[44]),P=r(P,E,N,O,k,11,c[45]),O=r(O,P,E,N,C,16,c[46]),E=s(E,N=r(N,O,P,E,u,23,c[47]),O,P,l,6,c[48]),P=s(P,E,N,O,g,10,c[49]),O=s(O,P,E,N,S,15,c[50]),N=s(N,O,P,E,p,21,c[51]),E=s(E,N,O,P,k,6,c[52]),P=s(P,E,N,O,d,10,c[53]),O=s(O,P,E,N,y,15,c[54]),N=s(N,O,P,E,o,21,c[55]),E=s(E,N,O,P,m,6,c[56]),P=s(P,E,N,O,C,10,c[57]),O=s(O,P,E,N,f,15,c[58]),N=s(N,O,P,E,w,21,c[59]),E=s(E,N,O,P,h,6,c[60]),P=s(P,E,N,O,v,10,c[61]),O=s(O,P,E,N,u,15,c[62]),N=s(N,O,P,E,b,21,c[63]),a[0]=a[0]+E|0,a[1]=a[1]+N|0,a[2]=a[2]+O|0,a[3]=a[3]+P|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,s=8*t.sigBytes;n[s>>>5]|=128<<24-s%32;var i=e.floor(r/4294967296);for(n[15+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(s+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)s=n[r],n[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);return t},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=o._createHelper(l),i.HmacMD5=o._createHmacHelper(l)}(Math),function(){var e,t=w,n=(e=t.lib).Base,r=e.WordArray,s=(e=t.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(o=this.cfg).hasher.create(),s=r.create(),i=s.words,a=o.keySize,o=o.iterations;i.length<a;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var c=1;c<o;c++)l=n.finalize(l),n.reset();s.concat(l)}return s.sigBytes=4*a,s}});t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),w.lib.Cipher||function(){var e=(h=w).lib,t=e.Base,n=e.WordArray,r=e.BufferedBlockAlgorithm,s=h.enc.Base64,i=h.algo.EvpKDF,a=e.Cipher=r.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?p:d).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?p:d).decrypt(e,t,n,r)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var o=h.mode={},l=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var s=0;s<n;s++)e[t+s]^=r[s]},c=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;l.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),c.Decryptor=c.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,s=e.slice(t,t+r);n.decryptBlock(e,t),l.call(this,e,t,r),this._prevBlock=s}}),o=o.CBC=c,c=(h.pad={}).Pkcs7={pad:function(e,t){for(var r,s=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,i=[],a=0;a<r;a+=4)i.push(s);r=n.create(i,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:o,padding:c}),reset:function(){a.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var u=e.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(o=(h.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=n.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return u.create({ciphertext:e,salt:r})}},e.SerializableCipher=t.extend({cfg:t.extend({format:o}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var s=e.createEncryptor(n,r);return t=s.finalize(t),s=s.cfg,u.create({ciphertext:t,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),h=(h.kdf={}).OpenSSL={execute:function(e,t,r,s){return s||(s=n.random(8)),e=i.create({keySize:t+r}).compute(e,s),r=n.create(e.words.slice(t),4*r),e.sigBytes=4*t,u.create({key:e,iv:r,salt:s})}},p=e.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:h}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=d.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,d.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=w,t=e.lib.BlockCipher,n=e.algo,r=[],s=[],i=[],a=[],o=[],l=[],c=[],u=[],d=[],h=[],p=[],f=0;256>f;f++)p[f]=128>f?f<<1:f<<1^283;var g=0,m=0;for(f=0;256>f;f++){var b=(b=m^m<<1^m<<2^m<<3^m<<4)>>>8^255&b^99;r[g]=b,s[b]=g;var y=p[g],v=p[y],k=p[v],S=257*p[b]^16843008*b;i[g]=S<<24|S>>>8,a[g]=S<<16|S>>>16,o[g]=S<<8|S>>>24,l[g]=S,S=16843009*k^65537*v^257*y^16843008*g,c[b]=S<<24|S>>>8,u[b]=S<<16|S>>>16,d[b]=S<<8|S>>>24,h[b]=S,g?(g=y^p[p[p[k^y]]],m^=p[p[m]]):g=m=1}var C=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),s=this._keySchedule=[],i=0;i<n;i++)if(i<t)s[i]=e[i];else{var a=s[i-1];i%t?6<t&&4==i%t&&(a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a]):(a=r[(a=a<<8|a>>>24)>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a],a^=C[i/t|0]<<24),s[i]=s[i-t]^a}for(e=this._invKeySchedule=[],t=0;t<n;t++)i=n-t,a=t%4?s[i]:s[i-4],e[t]=4>t||4>=i?a:c[r[a>>>24]]^u[r[a>>>16&255]]^d[r[a>>>8&255]]^h[r[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,a,o,l,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,u,d,h,s),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,s,i,a,o){for(var l=this._nRounds,c=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],p=4,f=1;f<l;f++){var g=r[c>>>24]^s[u>>>16&255]^i[d>>>8&255]^a[255&h]^n[p++],m=r[u>>>24]^s[d>>>16&255]^i[h>>>8&255]^a[255&c]^n[p++],b=r[d>>>24]^s[h>>>16&255]^i[c>>>8&255]^a[255&u]^n[p++];h=r[h>>>24]^s[c>>>16&255]^i[u>>>8&255]^a[255&d]^n[p++],c=g,u=m,d=b}g=(o[c>>>24]<<24|o[u>>>16&255]<<16|o[d>>>8&255]<<8|o[255&h])^n[p++],m=(o[u>>>24]<<24|o[d>>>16&255]<<16|o[h>>>8&255]<<8|o[255&c])^n[p++],b=(o[d>>>24]<<24|o[h>>>16&255]<<16|o[c>>>8&255]<<8|o[255&u])^n[p++],h=(o[h>>>24]<<24|o[c>>>16&255]<<16|o[u>>>8&255]<<8|o[255&d])^n[p++],e[t]=g,e[t+1]=m,e[t+2]=b,e[t+3]=h},keySize:8}),e.AES=t._createHelper(n)}(),w.mode.ECB=((k=w.lib.BlockCipherMode.extend()).Encryptor=k.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),k.Decryptor=k.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),k);var S,C=t(w);class E{constructor(e){let{cipherKey:t}=e;this.cipherKey=t,this.CryptoJS=C,this.encryptedKey=this.CryptoJS.SHA256(t)}encrypt(e){if(0===("string"==typeof e?e:E.decoder.decode(e)).length)throw new Error("encryption error. empty content");const t=this.getIv();return{metadata:t,data:u(this.CryptoJS.AES.encrypt(e,this.encryptedKey,{iv:this.bufferToWordArray(t),mode:this.CryptoJS.mode.CBC}).ciphertext.toString(this.CryptoJS.enc.Base64))}}encryptFileData(e){return o(this,void 0,void 0,function*(){const t=yield this.getKey(),n=this.getIv();return{data:yield crypto.subtle.encrypt({name:this.algo,iv:n},t,e),metadata:n}})}decrypt(e){if("string"==typeof e.data)throw new Error("Decryption error: data for decryption should be ArrayBuffed.");const t=this.bufferToWordArray(new Uint8ClampedArray(e.metadata)),n=this.bufferToWordArray(new Uint8ClampedArray(e.data));return E.encoder.encode(this.CryptoJS.AES.decrypt({ciphertext:n},this.encryptedKey,{iv:t,mode:this.CryptoJS.mode.CBC}).toString(this.CryptoJS.enc.Utf8)).buffer}decryptFileData(e){return o(this,void 0,void 0,function*(){if("string"==typeof e.data)throw new Error("Decryption error: data for decryption should be ArrayBuffed.");const t=yield this.getKey();return crypto.subtle.decrypt({name:this.algo,iv:e.metadata},t,e.data)})}get identifier(){return"ACRH"}get algo(){return"AES-CBC"}getIv(){return crypto.getRandomValues(new Uint8Array(E.BLOCK_SIZE))}getKey(){return o(this,void 0,void 0,function*(){const e=E.encoder.encode(this.cipherKey),t=yield crypto.subtle.digest("SHA-256",e.buffer);return crypto.subtle.importKey("raw",t,this.algo,!0,["encrypt","decrypt"])})}bufferToWordArray(e){const t=[];let n;for(n=0;n<e.length;n+=1)t[n/4|0]|=e[n]<<24-8*n;return this.CryptoJS.lib.WordArray.create(t,e.length)}toString(){return"AesCbcCryptor { cipherKey: ".concat(this.cipherKey," }")}}function P(e){const t=[];let n;for(n=0;n<e.length;n+=1)t[n/4|0]|=e[n]<<24-8*n;return C.lib.WordArray.create(t,e.length)}E.BLOCK_SIZE=16,E.encoder=new TextEncoder,E.decoder=new TextDecoder;class O{constructor(e){this.configuration=e,this.iv="0123456789012345",this.allowedKeyEncodings=["hex","utf8","base64","binary"],this.allowedKeyLengths=[128,256],this.allowedModes=["ecb","cbc"],this.logger=e.logger,this.defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}set logger(e){this._logger=e,this.logger&&this.logger.debug("Crypto",()=>({messageType:"object",message:this.configuration,details:"Create with configuration:",ignoredKeys:(e,t)=>"function"==typeof t[e]||"logger"===e}))}get logger(){return this._logger}HMACSHA256(e){return C.HmacSHA256(e,this.configuration.secretKey).toString(C.enc.Base64)}SHA256(e){return C.SHA256(e).toString(C.enc.Hex)}encrypt(e,t,n){return this.configuration.customEncrypt?(this.logger&&this.logger.warn("Crypto","'customEncrypt' is deprecated. Consult docs for better alternative."),this.configuration.customEncrypt(e)):this.pnEncrypt(e,t,n)}decrypt(e,t,n){return this.configuration.customDecrypt?(this.logger&&this.logger.warn("Crypto","'customDecrypt' is deprecated. Consult docs for better alternative."),this.configuration.customDecrypt(e)):this.pnDecrypt(e,t,n)}pnEncrypt(e,t,n){const r=null!=t?t:this.configuration.cipherKey;if(!r)return e;this.logger&&this.logger.debug("Crypto",()=>({messageType:"object",message:Object.assign({data:e,cipherKey:r},null!=n?n:{}),details:"Encrypt with parameters:"})),n=this.parseOptions(n);const s=this.getMode(n),i=this.getPaddedKey(r,n);if(this.configuration.useRandomIVs){const t=this.getRandomIV(),n=C.AES.encrypt(e,i,{iv:t,mode:s}).ciphertext;return t.clone().concat(n.clone()).toString(C.enc.Base64)}const a=this.getIV(n);return C.AES.encrypt(e,i,{iv:a,mode:s}).ciphertext.toString(C.enc.Base64)||e}pnDecrypt(e,t,n){const r=null!=t?t:this.configuration.cipherKey;if(!r)return e;this.logger&&this.logger.debug("Crypto",()=>({messageType:"object",message:Object.assign({data:e,cipherKey:r},null!=n?n:{}),details:"Decrypt with parameters:"})),n=this.parseOptions(n);const s=this.getMode(n),i=this.getPaddedKey(r,n);if(this.configuration.useRandomIVs){const t=new Uint8ClampedArray(u(e)),n=P(t.slice(0,16)),r=P(t.slice(16));try{const e=C.AES.decrypt({ciphertext:r},i,{iv:n,mode:s}).toString(C.enc.Utf8);return JSON.parse(e)}catch(e){return this.logger&&this.logger.error("Crypto",()=>({messageType:"error",message:e})),null}}else{const t=this.getIV(n);try{const n=C.enc.Base64.parse(e),r=C.AES.decrypt({ciphertext:n},i,{iv:t,mode:s}).toString(C.enc.Utf8);return JSON.parse(r)}catch(e){return this.logger&&this.logger.error("Crypto",()=>({messageType:"error",message:e})),null}}}parseOptions(e){var t,n,r,s;if(!e)return this.defaultOptions;const i={encryptKey:null!==(t=e.encryptKey)&&void 0!==t?t:this.defaultOptions.encryptKey,keyEncoding:null!==(n=e.keyEncoding)&&void 0!==n?n:this.defaultOptions.keyEncoding,keyLength:null!==(r=e.keyLength)&&void 0!==r?r:this.defaultOptions.keyLength,mode:null!==(s=e.mode)&&void 0!==s?s:this.defaultOptions.mode};return-1===this.allowedKeyEncodings.indexOf(i.keyEncoding.toLowerCase())&&(i.keyEncoding=this.defaultOptions.keyEncoding),-1===this.allowedKeyLengths.indexOf(i.keyLength)&&(i.keyLength=this.defaultOptions.keyLength),-1===this.allowedModes.indexOf(i.mode.toLowerCase())&&(i.mode=this.defaultOptions.mode),i}decodeKey(e,t){return"base64"===t.keyEncoding?C.enc.Base64.parse(e):"hex"===t.keyEncoding?C.enc.Hex.parse(e):e}getPaddedKey(e,t){return e=this.decodeKey(e,t),t.encryptKey?C.enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}getMode(e){return"ecb"===e.mode?C.mode.ECB:C.mode.CBC}getIV(e){return"cbc"===e.mode?C.enc.Utf8.parse(this.iv):null}getRandomIV(){return C.lib.WordArray.random(16)}}class N{encrypt(e,t){return o(this,void 0,void 0,function*(){if(!(t instanceof ArrayBuffer)&&"string"!=typeof t)throw new Error("Cannot encrypt this file. In browsers file encryption supports only string or ArrayBuffer");const n=yield this.getKey(e);return t instanceof ArrayBuffer?this.encryptArrayBuffer(n,t):this.encryptString(n,t)})}encryptArrayBuffer(e,t){return o(this,void 0,void 0,function*(){const n=crypto.getRandomValues(new Uint8Array(16));return this.concatArrayBuffer(n.buffer,yield crypto.subtle.encrypt({name:"AES-CBC",iv:n},e,t))})}encryptString(e,t){return o(this,void 0,void 0,function*(){const n=crypto.getRandomValues(new Uint8Array(16)),r=N.encoder.encode(t).buffer,s=yield crypto.subtle.encrypt({name:"AES-CBC",iv:n},e,r),i=this.concatArrayBuffer(n.buffer,s);return N.decoder.decode(i)})}encryptFile(e,t,n){return o(this,void 0,void 0,function*(){var r,s;if((null!==(r=t.contentLength)&&void 0!==r?r:0)<=0)throw new Error("encryption error. empty content");const i=yield this.getKey(e),a=yield t.toArrayBuffer(),o=yield this.encryptArrayBuffer(i,a);return n.create({name:t.name,mimeType:null!==(s=t.mimeType)&&void 0!==s?s:"application/octet-stream",data:o})})}decrypt(e,t){return o(this,void 0,void 0,function*(){if(!(t instanceof ArrayBuffer)&&"string"!=typeof t)throw new Error("Cannot decrypt this file. In browsers file decryption supports only string or ArrayBuffer");const n=yield this.getKey(e);return t instanceof ArrayBuffer?this.decryptArrayBuffer(n,t):this.decryptString(n,t)})}decryptArrayBuffer(e,t){return o(this,void 0,void 0,function*(){const n=t.slice(0,16);if(t.slice(N.IV_LENGTH).byteLength<=0)throw new Error("decryption error: empty content");return yield crypto.subtle.decrypt({name:"AES-CBC",iv:n},e,t.slice(N.IV_LENGTH))})}decryptString(e,t){return o(this,void 0,void 0,function*(){const n=N.encoder.encode(t).buffer,r=n.slice(0,16),s=n.slice(16),i=yield crypto.subtle.decrypt({name:"AES-CBC",iv:r},e,s);return N.decoder.decode(i)})}decryptFile(e,t,n){return o(this,void 0,void 0,function*(){const r=yield this.getKey(e),s=yield t.toArrayBuffer(),i=yield this.decryptArrayBuffer(r,s);return n.create({name:t.name,mimeType:t.mimeType,data:i})})}getKey(e){return o(this,void 0,void 0,function*(){const t=yield crypto.subtle.digest("SHA-256",N.encoder.encode(e)),n=Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join(""),r=N.encoder.encode(n.slice(0,32)).buffer;return crypto.subtle.importKey("raw",r,"AES-CBC",!0,["encrypt","decrypt"])})}concatArrayBuffer(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}}N.IV_LENGTH=16,N.encoder=new TextEncoder,N.decoder=new TextDecoder;class j{constructor(e){this.config=e,this.cryptor=new O(Object.assign({},e)),this.fileCryptor=new N}set logger(e){this.cryptor.logger=e}encrypt(e){const t="string"==typeof e?e:j.decoder.decode(e);return{data:this.cryptor.encrypt(t),metadata:null}}encryptFile(e,t){return o(this,void 0,void 0,function*(){var n;if(!this.config.cipherKey)throw new p("File encryption error: cipher key not set.");return this.fileCryptor.encryptFile(null===(n=this.config)||void 0===n?void 0:n.cipherKey,e,t)})}decrypt(e){const t="string"==typeof e.data?e.data:d(e.data);return this.cryptor.decrypt(t)}decryptFile(e,t){return o(this,void 0,void 0,function*(){if(!this.config.cipherKey)throw new p("File encryption error: cipher key not set.");return this.fileCryptor.decryptFile(this.config.cipherKey,e,t)})}get identifier(){return""}toString(){return"AesCbcCryptor { ".concat(Object.entries(this.config).reduce((e,t)=>{let[n,r]=t;return"logger"===n||e.push("".concat(n,": ").concat("function"==typeof r?"<function>":r)),e},[]).join(", ")," }")}}j.encoder=new TextEncoder,j.decoder=new TextDecoder;class T extends l{set logger(e){if(this.defaultCryptor.identifier===T.LEGACY_IDENTIFIER)this.defaultCryptor.logger=e;else{const t=this.cryptors.find(e=>e.identifier===T.LEGACY_IDENTIFIER);t&&(t.logger=e)}}static legacyCryptoModule(e){var t;if(!e.cipherKey)throw new p("Crypto module error: cipher key not set.");return new T({default:new j(Object.assign(Object.assign({},e),{useRandomIVs:null===(t=e.useRandomIVs)||void 0===t||t})),cryptors:[new E({cipherKey:e.cipherKey})]})}static aesCbcCryptoModule(e){var t;if(!e.cipherKey)throw new p("Crypto module error: cipher key not set.");return new T({default:new E({cipherKey:e.cipherKey}),cryptors:[new j(Object.assign(Object.assign({},e),{useRandomIVs:null===(t=e.useRandomIVs)||void 0===t||t}))]})}static withDefaultCryptor(e){return new this({default:e})}encrypt(e){const t=e instanceof ArrayBuffer&&this.defaultCryptor.identifier===T.LEGACY_IDENTIFIER?this.defaultCryptor.encrypt(T.decoder.decode(e)):this.defaultCryptor.encrypt(e);if(!t.metadata)return t.data;if("string"==typeof t.data)throw new Error("Encryption error: encrypted data should be ArrayBuffed.");const n=this.getHeaderData(t);return this.concatArrayBuffer(n,t.data)}encryptFile(e,t){return o(this,void 0,void 0,function*(){if(this.defaultCryptor.identifier===x.LEGACY_IDENTIFIER)return this.defaultCryptor.encryptFile(e,t);const n=yield this.getFileData(e),r=yield this.defaultCryptor.encryptFileData(n);if("string"==typeof r.data)throw new Error("Encryption error: encrypted data should be ArrayBuffed.");return t.create({name:e.name,mimeType:"application/octet-stream",data:this.concatArrayBuffer(this.getHeaderData(r),r.data)})})}decrypt(e){const t="string"==typeof e?u(e):e,n=x.tryParse(t),r=this.getCryptor(n),s=n.length>0?t.slice(n.length-n.metadataLength,n.length):null;if(t.slice(n.length).byteLength<=0)throw new Error("Decryption error: empty content");return r.decrypt({data:t.slice(n.length),metadata:s})}decryptFile(e,t){return o(this,void 0,void 0,function*(){const n=yield e.data.arrayBuffer(),r=x.tryParse(n),s=this.getCryptor(r);if((null==s?void 0:s.identifier)===x.LEGACY_IDENTIFIER)return s.decryptFile(e,t);const i=(yield this.getFileData(n)).slice(r.length-r.metadataLength,r.length);return t.create({name:e.name,data:yield this.defaultCryptor.decryptFileData({data:n.slice(r.length),metadata:i})})})}getCryptorFromId(e){const t=this.getAllCryptors().find(t=>e===t.identifier);if(t)return t;throw Error("Unknown cryptor error")}getCryptor(e){if("string"==typeof e){const t=this.getAllCryptors().find(t=>t.identifier===e);if(t)return t;throw new Error("Unknown cryptor error")}if(e instanceof _)return this.getCryptorFromId(e.identifier)}getHeaderData(e){if(!e.metadata)return;const t=x.from(this.defaultCryptor.identifier,e.metadata),n=new Uint8Array(t.length);let r=0;return n.set(t.data,r),r+=t.length-e.metadata.byteLength,n.set(new Uint8Array(e.metadata),r),n.buffer}concatArrayBuffer(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}getFileData(e){return o(this,void 0,void 0,function*(){if(e instanceof ArrayBuffer)return e;if(e instanceof c)return e.toArrayBuffer();throw new Error("Cannot decrypt/encrypt file. In browsers file encrypt/decrypt supported for string, ArrayBuffer or Blob")})}}T.LEGACY_IDENTIFIER="";class x{static from(e,t){if(e!==x.LEGACY_IDENTIFIER)return new _(e,t.byteLength)}static tryParse(e){const t=new Uint8Array(e);let n,r,s=null;if(t.byteLength>=4&&(n=t.slice(0,4),this.decoder.decode(n)!==x.SENTINEL))return T.LEGACY_IDENTIFIER;if(!(t.byteLength>=5))throw new Error("Decryption error: invalid header version");if(s=t[4],s>x.MAX_VERSION)throw new Error("Decryption error: Unknown cryptor error");let i=5+x.IDENTIFIER_LENGTH;if(!(t.byteLength>=i))throw new Error("Decryption error: invalid crypto identifier");r=t.slice(5,i);let a=null;if(!(t.byteLength>=i+1))throw new Error("Decryption error: invalid metadata length");return a=t[i],i+=1,255===a&&t.byteLength>=i+2&&(a=new Uint16Array(t.slice(i,i+2)).reduce((e,t)=>(e<<8)+t,0)),new _(this.decoder.decode(r),a)}}x.SENTINEL="PNED",x.LEGACY_IDENTIFIER="",x.IDENTIFIER_LENGTH=4,x.VERSION=1,x.MAX_VERSION=1,x.decoder=new TextDecoder;class _{constructor(e,t){this._identifier=e,this._metadataLength=t}get identifier(){return this._identifier}set identifier(e){this._identifier=e}get metadataLength(){return this._metadataLength}set metadataLength(e){this._metadataLength=e}get version(){return x.VERSION}get length(){return x.SENTINEL.length+1+x.IDENTIFIER_LENGTH+(this.metadataLength<255?1:3)+this.metadataLength}get data(){let e=0;const t=new Uint8Array(this.length),n=new TextEncoder;t.set(n.encode(x.SENTINEL)),e+=x.SENTINEL.length,t[e]=this.version,e++,this.identifier&&t.set(n.encode(this.identifier),e);const r=this.metadataLength;return e+=x.IDENTIFIER_LENGTH,r<255?t[e]=r:t.set([255,r>>8,255&r],e),t}}_.IDENTIFIER_LENGTH=4,_.SENTINEL="PNED";class M extends Error{static create(e,t){return M.isErrorObject(e)?M.createFromError(e):M.createFromServiceResponse(e,t)}static createFromError(e){let t=h.PNUnknownCategory,n="Unknown error",r="Error";if(!e)return new M(n,t,0);if(e instanceof M)return e;if(M.isErrorObject(e)&&(n=e.message,r=e.name),"AbortError"===r||-1!==n.indexOf("Aborted"))t=h.PNCancelledCategory,n="Request cancelled";else if(-1!==n.toLowerCase().indexOf("timeout"))t=h.PNTimeoutCategory,n="Request timeout";else if(-1!==n.toLowerCase().indexOf("network"))t=h.PNNetworkIssuesCategory,n="Network issues";else if("TypeError"===r)t=-1!==n.indexOf("Load failed")||-1!=n.indexOf("Failed to fetch")?h.PNNetworkIssuesCategory:h.PNBadRequestCategory;else if("FetchError"===r){const r=e.code;["ECONNREFUSED","ENETUNREACH","ENOTFOUND","ECONNRESET","EAI_AGAIN"].includes(r)&&(t=h.PNNetworkIssuesCategory),"ECONNREFUSED"===r?n="Connection refused":"ENETUNREACH"===r?n="Network not reachable":"ENOTFOUND"===r?n="Server not found":"ECONNRESET"===r?n="Connection reset by peer":"EAI_AGAIN"===r?n="Name resolution error":"ETIMEDOUT"===r?(t=h.PNTimeoutCategory,n="Request timeout"):n="Unknown system error: ".concat(e)}else"Request timeout"===n&&(t=h.PNTimeoutCategory);return new M(n,t,0,e)}static createFromServiceResponse(e,t){let n,r=h.PNUnknownCategory,s="Unknown error",{status:i}=e;if(null!=t||(t=e.body),402===i?s="Not available for used key set. Contact support@pubnub.com":400===i?(r=h.PNBadRequestCategory,s="Bad request"):403===i?(r=h.PNAccessDeniedCategory,s="Access denied"):i>=500&&(r=h.PNServerErrorCategory,s="Internal server error"),"object"==typeof e&&0===Object.keys(e).length&&(r=h.PNMalformedResponseCategory,s="Malformed response (network issues)",i=400),t&&t.byteLength>0){const r=(new TextDecoder).decode(t);if(-1!==e.headers["content-type"].indexOf("text/javascript")||-1!==e.headers["content-type"].indexOf("application/json"))try{const e=JSON.parse(r);"object"==typeof e&&(Array.isArray(e)?"number"==typeof e[0]&&0===e[0]&&e.length>1&&"string"==typeof e[1]&&(n=e[1]):("error"in e&&(1===e.error||!0===e.error)&&"status"in e&&"number"==typeof e.status&&"message"in e&&"service"in e?(n=e,i=e.status):n=e,"error"in e&&e.error instanceof Error&&(n=e.error)))}catch(e){n=r}else if(-1!==e.headers["content-type"].indexOf("xml")){const e=/<Message>(.*)<\/Message>/gi.exec(r);s=e?"Upload to bucket failed: ".concat(e[1]):"Upload to bucket failed."}else n=r}return new M(s,r,i,n)}constructor(e,t,n,r){super(e),this.category=t,this.statusCode=n,this.errorData=r,this.name="PubNubAPIError"}toStatus(e){return{error:!0,category:this.category,operation:e,statusCode:this.statusCode,errorData:this.errorData,toJSON:function(){let e;const t=this.errorData;if(t)try{if("object"==typeof t){const n=Object.assign(Object.assign(Object.assign(Object.assign({},"name"in t?{name:t.name}:{}),"message"in t?{message:t.message}:{}),"stack"in t?{stack:t.stack}:{}),t);e=JSON.parse(JSON.stringify(n,M.circularReplacer()))}else e=t}catch(t){e={error:"Could not serialize the error object"}}const n=a(this,["toJSON"]);return JSON.stringify(Object.assign(Object.assign({},n),{errorData:e}))}}}toPubNubError(e,t){return new p(null!=t?t:this.message,this.toStatus(e))}static circularReplacer(){const e=new WeakSet;return function(t,n){if("object"==typeof n&&null!==n){if(e.has(n))return"[Circular]";e.add(n)}return n}}static isErrorObject(e){return!(!e||"object"!=typeof e)&&(e instanceof Error||"name"in e&&"message"in e&&"string"==typeof e.name&&"string"==typeof e.message||"[object Error]"===Object.prototype.toString.call(e))}}!function(e){e.PNPublishOperation="PNPublishOperation",e.PNSignalOperation="PNSignalOperation",e.PNSubscribeOperation="PNSubscribeOperation",e.PNUnsubscribeOperation="PNUnsubscribeOperation",e.PNWhereNowOperation="PNWhereNowOperation",e.PNHereNowOperation="PNHereNowOperation",e.PNGlobalHereNowOperation="PNGlobalHereNowOperation",e.PNSetStateOperation="PNSetStateOperation",e.PNGetStateOperation="PNGetStateOperation",e.PNHeartbeatOperation="PNHeartbeatOperation",e.PNAddMessageActionOperation="PNAddActionOperation",e.PNRemoveMessageActionOperation="PNRemoveMessageActionOperation",e.PNGetMessageActionsOperation="PNGetMessageActionsOperation",e.PNTimeOperation="PNTimeOperation",e.PNHistoryOperation="PNHistoryOperation",e.PNDeleteMessagesOperation="PNDeleteMessagesOperation",e.PNFetchMessagesOperation="PNFetchMessagesOperation",e.PNMessageCounts="PNMessageCountsOperation",e.PNGetAllUUIDMetadataOperation="PNGetAllUUIDMetadataOperation",e.PNGetUUIDMetadataOperation="PNGetUUIDMetadataOperation",e.PNSetUUIDMetadataOperation="PNSetUUIDMetadataOperation",e.PNRemoveUUIDMetadataOperation="PNRemoveUUIDMetadataOperation",e.PNGetAllChannelMetadataOperation="PNGetAllChannelMetadataOperation",e.PNGetChannelMetadataOperation="PNGetChannelMetadataOperation",e.PNSetChannelMetadataOperation="PNSetChannelMetadataOperation",e.PNRemoveChannelMetadataOperation="PNRemoveChannelMetadataOperation",e.PNGetMembersOperation="PNGetMembersOperation",e.PNSetMembersOperation="PNSetMembersOperation",e.PNGetMembershipsOperation="PNGetMembershipsOperation",e.PNSetMembershipsOperation="PNSetMembershipsOperation",e.PNListFilesOperation="PNListFilesOperation",e.PNGenerateUploadUrlOperation="PNGenerateUploadUrlOperation",e.PNPublishFileOperation="PNPublishFileOperation",e.PNPublishFileMessageOperation="PNPublishFileMessageOperation",e.PNGetFileUrlOperation="PNGetFileUrlOperation",e.PNDownloadFileOperation="PNDownloadFileOperation",e.PNDeleteFileOperation="PNDeleteFileOperation",e.PNAddPushNotificationEnabledChannelsOperation="PNAddPushNotificationEnabledChannelsOperation",e.PNRemovePushNotificationEnabledChannelsOperation="PNRemovePushNotificationEnabledChannelsOperation",e.PNPushNotificationEnabledChannelsOperation="PNPushNotificationEnabledChannelsOperation",e.PNRemoveAllPushNotificationsOperation="PNRemoveAllPushNotificationsOperation",e.PNChannelGroupsOperation="PNChannelGroupsOperation",e.PNRemoveGroupOperation="PNRemoveGroupOperation",e.PNChannelsForGroupOperation="PNChannelsForGroupOperation",e.PNAddChannelsToGroupOperation="PNAddChannelsToGroupOperation",e.PNRemoveChannelsFromGroupOperation="PNRemoveChannelsFromGroupOperation",e.PNAccessManagerGrant="PNAccessManagerGrant",e.PNAccessManagerGrantToken="PNAccessManagerGrantToken",e.PNAccessManagerAudit="PNAccessManagerAudit",e.PNAccessManagerRevokeToken="PNAccessManagerRevokeToken",e.PNHandshakeOperation="PNHandshakeOperation",e.PNReceiveMessagesOperation="PNReceiveMessagesOperation"}(S||(S={}));var I=S;class A{constructor(e){this.configuration=e,this.subscriptionWorkerReady=!1,this.accessTokensMap={},this.workerEventsQueue=[],this.callbacks=new Map,this.setupSubscriptionWorker()}set emitStatus(e){this._emitStatus=e}onUserIdChange(e){this.configuration.userId=e,this.scheduleEventPost({type:"client-update",heartbeatInterval:this.configuration.heartbeatInterval,clientIdentifier:this.configuration.clientIdentifier,subscriptionKey:this.configuration.subscriptionKey,userId:this.configuration.userId,workerLogLevel:this.configuration.workerLogLevel})}onPresenceStateChange(e){this.scheduleEventPost({type:"client-presence-state-update",clientIdentifier:this.configuration.clientIdentifier,subscriptionKey:this.configuration.subscriptionKey,workerLogLevel:this.configuration.workerLogLevel,state:e})}onHeartbeatIntervalChange(e){this.configuration.heartbeatInterval=e,this.scheduleEventPost({type:"client-update",heartbeatInterval:this.configuration.heartbeatInterval,clientIdentifier:this.configuration.clientIdentifier,subscriptionKey:this.configuration.subscriptionKey,userId:this.configuration.userId,workerLogLevel:this.configuration.workerLogLevel})}onTokenChange(e){const t={type:"client-update",heartbeatInterval:this.configuration.heartbeatInterval,clientIdentifier:this.configuration.clientIdentifier,subscriptionKey:this.configuration.subscriptionKey,userId:this.configuration.userId,workerLogLevel:this.configuration.workerLogLevel};this.parsedAccessToken(e).then(n=>{t.preProcessedToken=n,t.accessToken=e}).then(()=>this.scheduleEventPost(t))}disconnect(){this.scheduleEventPost({type:"client-disconnect",clientIdentifier:this.configuration.clientIdentifier,subscriptionKey:this.configuration.subscriptionKey,workerLogLevel:this.configuration.workerLogLevel})}terminate(){this.scheduleEventPost({type:"client-unregister",clientIdentifier:this.configuration.clientIdentifier,subscriptionKey:this.configuration.subscriptionKey,workerLogLevel:this.configuration.workerLogLevel})}makeSendable(e){if(!e.path.startsWith("/v2/subscribe")&&!e.path.endsWith("/heartbeat")&&!e.path.endsWith("/leave"))return this.configuration.transport.makeSendable(e);let t;this.configuration.logger.debug("SubscriptionWorkerMiddleware","Process request with SharedWorker transport.");const n={type:"send-request",clientIdentifier:this.configuration.clientIdentifier,subscriptionKey:this.configuration.subscriptionKey,request:e,workerLogLevel:this.configuration.workerLogLevel};return e.cancellable&&(t={abort:()=>{const t={type:"cancel-request",clientIdentifier:this.configuration.clientIdentifier,subscriptionKey:this.configuration.subscriptionKey,identifier:e.identifier,workerLogLevel:this.configuration.workerLogLevel};this.scheduleEventPost(t)}}),[new Promise((t,r)=>{this.callbacks.set(e.identifier,{resolve:t,reject:r}),this.parsedAccessTokenForRequest(e).then(e=>n.preProcessedToken=e).then(()=>this.scheduleEventPost(n))}),t]}request(e){return e}scheduleEventPost(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.sharedSubscriptionWorker;n?n.port.postMessage(e):t?this.workerEventsQueue.splice(0,0,e):this.workerEventsQueue.push(e)}flushScheduledEvents(){const e=this.sharedSubscriptionWorker;if(!e||0===this.workerEventsQueue.length)return;const t=[];for(let n=0;n<this.workerEventsQueue.length;n++){const e=this.workerEventsQueue[n];if("cancel-request"===e.type&&0!==n)for(let r=0;r<n;r++){const n=this.workerEventsQueue[r];if("send-request"===n.type&&n.request.identifier===e.identifier){t.push(e,n);break}}}this.workerEventsQueue=this.workerEventsQueue.filter(e=>!t.includes(e)),this.workerEventsQueue.forEach(t=>e.port.postMessage(t)),this.workerEventsQueue=[]}get sharedSubscriptionWorker(){return this.subscriptionWorkerReady?this.subscriptionWorker:null}setupSubscriptionWorker(){if("undefined"!=typeof SharedWorker){try{this.subscriptionWorker=new SharedWorker(this.configuration.workerUrl,"/pubnub-".concat(this.configuration.sdkVersion))}catch(e){throw this.configuration.logger.error("SubscriptionWorkerMiddleware",()=>({messageType:"error",message:e})),e}this.subscriptionWorker.port.start(),this.scheduleEventPost({type:"client-register",clientIdentifier:this.configuration.clientIdentifier,subscriptionKey:this.configuration.subscriptionKey,userId:this.configuration.userId,heartbeatInterval:this.configuration.heartbeatInterval,workerOfflineClientsCheckInterval:this.configuration.workerOfflineClientsCheckInterval,workerUnsubscribeOfflineClients:this.configuration.workerUnsubscribeOfflineClients,workerLogLevel:this.configuration.workerLogLevel},!0),this.subscriptionWorker.port.onmessage=e=>this.handleWorkerEvent(e),this.shouldAnnounceNewerSharedWorkerVersionAvailability()&&localStorage.setItem("PNSubscriptionSharedWorkerVersion",this.configuration.sdkVersion),window.addEventListener("storage",e=>{"PNSubscriptionSharedWorkerVersion"===e.key&&e.newValue&&this._emitStatus&&this.isNewerSharedWorkerVersion(e.newValue)&&this._emitStatus({error:!1,category:h.PNSharedWorkerUpdatedCategory})})}}handleWorkerEvent(e){const{data:t}=e;if("shared-worker-ping"===t.type||"shared-worker-connected"===t.type||"shared-worker-console-log"===t.type||"shared-worker-console-dir"===t.type||t.clientIdentifier===this.configuration.clientIdentifier)if("shared-worker-connected"===t.type)this.configuration.logger.trace("SharedWorker","Ready for events processing."),this.subscriptionWorkerReady=!0,this.flushScheduledEvents();else if("shared-worker-console-log"===t.type)this.configuration.logger.debug("SharedWorker",()=>"string"==typeof t.message||"number"==typeof t.message||"boolean"==typeof t.message?{messageType:"text",message:t.message}:t.message);else if("shared-worker-console-dir"===t.type)this.configuration.logger.debug("SharedWorker",()=>({messageType:"object",message:t.data,details:t.message?t.message:void 0}));else if("shared-worker-ping"===t.type){const{subscriptionKey:e,clientIdentifier:t}=this.configuration;this.scheduleEventPost({type:"client-pong",subscriptionKey:e,clientIdentifier:t,workerLogLevel:this.configuration.workerLogLevel})}else if("request-process-success"===t.type||"request-process-error"===t.type)if(this.callbacks.has(t.identifier)){const{resolve:e,reject:n}=this.callbacks.get(t.identifier);this.callbacks.delete(t.identifier),"request-process-success"===t.type?e({status:t.response.status,url:t.url,headers:t.response.headers,body:t.response.body}):n(this.errorFromRequestSendingError(t))}else this._emitStatus&&t.url.indexOf("/v2/presence")>=0&&t.url.indexOf("/heartbeat")>=0&&("request-process-success"===t.type&&this.configuration.announceSuccessfulHeartbeats?this._emitStatus({statusCode:t.response.status,error:!1,operation:I.PNHeartbeatOperation,category:h.PNAcknowledgmentCategory}):"request-process-error"===t.type&&this.configuration.announceFailedHeartbeats&&this._emitStatus(this.errorFromRequestSendingError(t).toStatus(I.PNHeartbeatOperation)))}parsedAccessTokenForRequest(e){return o(this,void 0,void 0,function*(){var t;return this.parsedAccessToken(e.queryParameters?null!==(t=e.queryParameters.auth)&&void 0!==t?t:"":void 0)})}parsedAccessToken(e){return o(this,void 0,void 0,function*(){if(e)return this.accessTokensMap[e]?this.accessTokensMap[e]:this.stringifyAccessToken(e).then(t=>{let[n,r]=t;if(n&&r)return(this.accessTokensMap={[e]:{token:r,expiration:n.timestamp+60*n.ttl}})[e]})})}stringifyAccessToken(e){return o(this,void 0,void 0,function*(){if(!this.configuration.tokenManager)return[void 0,void 0];const t=this.configuration.tokenManager.parseToken(e);if(!t)return[void 0,void 0];const n=e=>e?Object.entries(e).sort((e,t)=>{let[n]=e,[r]=t;return n.localeCompare(r)}).map(e=>{let[t,n]=e;return Object.entries(n||{}).sort((e,t)=>{let[n]=e,[r]=t;return n.localeCompare(r)}).map(e=>{let[n,r]=e;return"".concat(t,":").concat(n,"=").concat(r?(s=r,Object.entries(s).filter(e=>{let[t,n]=e;return n}).map(e=>{let[t]=e;return t[0]}).sort().join("")):"");var s}).join(",")}).join(";"):"";let r=[n(t.resources),n(t.patterns),t.authorized_uuid].filter(Boolean).join("|");if("undefined"!=typeof crypto&&crypto.subtle){const e=yield crypto.subtle.digest("SHA-256",(new TextEncoder).encode(r));r=String.fromCharCode(...Array.from(new Uint8Array(e)))}return[t,"undefined"!=typeof btoa?btoa(r):r]})}errorFromRequestSendingError(e){let t=h.PNUnknownCategory,n="Unknown error";if(e.error)"NETWORK_ISSUE"===e.error.type?t=h.PNNetworkIssuesCategory:"TIMEOUT"===e.error.type?t=h.PNTimeoutCategory:"ABORTED"===e.error.type&&(t=h.PNCancelledCategory),n="".concat(e.error.message," (").concat(e.identifier,")");else if(e.response){const{url:t,response:n}=e;return M.create({url:t,headers:n.headers,body:n.body,status:n.status},n.body)}return new M(n,t,0,new Error(n))}shouldAnnounceNewerSharedWorkerVersionAvailability(){const e=localStorage.getItem("PNSubscriptionSharedWorkerVersion");return!e||!this.isNewerSharedWorkerVersion(e)}isNewerSharedWorkerVersion(e){const[t,n,r]=this.configuration.sdkVersion.split(".").map(Number),[s,i,a]=e.split(".").map(Number);return s>t||i>n||a>r}}function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e=>"object"==typeof e&&null!==e&&e.constructor===Object,r=e=>"number"==typeof e&&isFinite(e);if(!n(e))return e;const s={};return Object.keys(e).forEach(i=>{const a=(e=>"string"==typeof e||e instanceof String)(i);let o=i;const l=e[i];t<2&&(a&&i.indexOf(",")>=0?o=i.split(",").map(Number).reduce((e,t)=>e+String.fromCharCode(t),""):(r(i)||a&&!isNaN(Number(i)))&&(o=String.fromCharCode(r(i)?i:parseInt(i,10)))),s[o]=n(l)?R(l,t+1):l}),s}const D=e=>{var t,n,r,s,i,a;return e.subscriptionWorkerUrl&&"undefined"==typeof SharedWorker&&(e.subscriptionWorkerUrl=null),Object.assign(Object.assign({},(e=>{var t,n,r,s,i,a,o,l,c,u,d,h,f,g,m;const b=Object.assign({},e);if(null!==(t=b.ssl)&&void 0!==t||(b.ssl=!0),null!==(n=b.transactionalRequestTimeout)&&void 0!==n||(b.transactionalRequestTimeout=15),null!==(r=b.subscribeRequestTimeout)&&void 0!==r||(b.subscribeRequestTimeout=310),null!==(s=b.fileRequestTimeout)&&void 0!==s||(b.fileRequestTimeout=300),null!==(i=b.restore)&&void 0!==i||(b.restore=!1),null!==(a=b.useInstanceId)&&void 0!==a||(b.useInstanceId=!1),null!==(o=b.suppressLeaveEvents)&&void 0!==o||(b.suppressLeaveEvents=!1),null!==(l=b.requestMessageCountThreshold)&&void 0!==l||(b.requestMessageCountThreshold=100),null!==(c=b.autoNetworkDetection)&&void 0!==c||(b.autoNetworkDetection=!1),null!==(u=b.enableEventEngine)&&void 0!==u||(b.enableEventEngine=!1),null!==(d=b.maintainPresenceState)&&void 0!==d||(b.maintainPresenceState=!0),null!==(h=b.useSmartHeartbeat)&&void 0!==h||(b.useSmartHeartbeat=!1),null!==(f=b.keepAlive)&&void 0!==f||(b.keepAlive=!1),b.userId&&b.uuid)throw new p("PubNub client configuration error: use only 'userId'");if(null!==(g=b.userId)&&void 0!==g||(b.userId=b.uuid),!b.userId)throw new p("PubNub client configuration error: 'userId' not set");if(0===(null===(m=b.userId)||void 0===m?void 0:m.trim().length))throw new p("PubNub client configuration error: 'userId' is empty");b.origin||(b.origin=Array.from({length:20},(e,t)=>"ps".concat(t+1,".pndsn.com")));const y={subscribeKey:b.subscribeKey,publishKey:b.publishKey,secretKey:b.secretKey};void 0!==b.presenceTimeout&&(b.presenceTimeout>320?(b.presenceTimeout=320,console.warn("WARNING: Presence timeout is larger than the maximum. Using maximum value: ",320)):b.presenceTimeout<=0&&(console.warn("WARNING: Presence timeout should be larger than zero."),delete b.presenceTimeout)),void 0!==b.presenceTimeout?b.heartbeatInterval=b.presenceTimeout/2-1:b.presenceTimeout=300;let v=!1,k=!0,w=5,S=!1,C=100,E=!0;return void 0!==b.dedupeOnSubscribe&&"boolean"==typeof b.dedupeOnSubscribe&&(S=b.dedupeOnSubscribe),void 0!==b.maximumCacheSize&&"number"==typeof b.maximumCacheSize&&(C=b.maximumCacheSize),void 0!==b.useRequestId&&"boolean"==typeof b.useRequestId&&(E=b.useRequestId),void 0!==b.announceSuccessfulHeartbeats&&"boolean"==typeof b.announceSuccessfulHeartbeats&&(v=b.announceSuccessfulHeartbeats),void 0!==b.announceFailedHeartbeats&&"boolean"==typeof b.announceFailedHeartbeats&&(k=b.announceFailedHeartbeats),void 0!==b.fileUploadPublishRetryLimit&&"number"==typeof b.fileUploadPublishRetryLimit&&(w=b.fileUploadPublishRetryLimit),Object.assign(Object.assign({},b),{keySet:y,dedupeOnSubscribe:S,maximumCacheSize:C,useRequestId:E,announceSuccessfulHeartbeats:v,announceFailedHeartbeats:k,fileUploadPublishRetryLimit:w})})(e)),{listenToBrowserNetworkEvents:null===(t=e.listenToBrowserNetworkEvents)||void 0===t||t,subscriptionWorkerUrl:e.subscriptionWorkerUrl,subscriptionWorkerOfflineClientsCheckInterval:null!==(n=e.subscriptionWorkerOfflineClientsCheckInterval)&&void 0!==n?n:10,subscriptionWorkerUnsubscribeOfflineClients:null!==(r=e.subscriptionWorkerUnsubscribeOfflineClients)&&void 0!==r&&r,subscriptionWorkerLogVerbosity:null!==(s=e.subscriptionWorkerLogVerbosity)&&void 0!==s&&s,transport:null!==(i=e.transport)&&void 0!==i?i:"fetch",keepAlive:null===(a=e.keepAlive)||void 0===a||a})};var F;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.None=5]="None"}(F||(F={}));const U=e=>encodeURIComponent(e).replace(/[!~*'()]/g,e=>"%".concat(e.charCodeAt(0).toString(16).toUpperCase())),L=(e,t)=>{const n=e.map(e=>U(e));return n.length?n.join(","):null!=t?t:""},z=(e,t)=>{const n=Object.fromEntries(t.map(e=>[e,!1]));return e.filter(e=>!(t.includes(e)&&!n[e])||(n[e]=!0,!1))},B=(e,t)=>[...e].filter(n=>t.includes(n)&&e.indexOf(n)===e.lastIndexOf(n)&&t.indexOf(n)===t.lastIndexOf(n)),q=e=>Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>"".concat(t,"=").concat(U(e))).join("&"):"".concat(t,"=").concat(U(n))}).join("&"),H=(e,t)=>{if("0"===t||"0"===e)return;const n=K("".concat(Date.now(),"0000"),t,!1);return K(e,n,!0)},G=(e,t,n)=>{if(e&&0!==e.length){if(t&&t.length>0&&"0"!==t){const r=K(e,t,!1);return K(null!=n?n:"".concat(Date.now(),"0000"),r.replace("-",""),Number(r)<0)}return n&&n.length>0&&"0"!==n?n:"".concat(Date.now(),"0000")}},K=(e,t,n)=>{t.startsWith("-")&&(t=t.replace("-",""),n=!1),t=t.padStart(17,"0");const r=e.slice(0,10),s=e.slice(10,17),i=t.slice(0,10),a=t.slice(10,17);let o=Number(r),l=Number(s);return o+=Number(i)*(n?1:-1),l+=Number(a)*(n?1:-1),l>=1e7?(o+=Math.floor(l/1e7),l%=1e7):l<0?o>0?(o-=1,l+=1e7):o<0&&(l*=-1):o<0&&l>0&&(o+=1,l=1e7-l),0!==o?"".concat(o).concat("".concat(l).padStart(7,"0")):"".concat(l)},W=e=>{const t="string"!=typeof e?JSON.stringify(e):e,n=new Uint32Array(1);let r=0,s=t.length;for(;s-- >0;)n[0]=(n[0]<<5)-n[0]+t.charCodeAt(r++);return n[0].toString(16).padStart(8,"0")};class V{debug(e){this.log(e)}error(e){this.log(e)}info(e){this.log(e)}trace(e){this.log(e)}warn(e){this.log(e)}toString(){return"ConsoleLogger {}"}log(e){const t=F[e.level],n=t.toLowerCase();console["trace"===n?"debug":n]("".concat(e.timestamp.toISOString()," PubNub-").concat(e.pubNubId," ").concat(t.padEnd(5," ")).concat(e.location?" ".concat(e.location):""," ").concat(this.logMessage(e)))}logMessage(e){if("text"===e.messageType)return e.message;if("object"===e.messageType)return"".concat(e.details?"".concat(e.details,"\n"):"").concat(this.formattedObject(e));if("network-request"===e.messageType){const t=!!e.canceled||!!e.failed,n=e.minimumLevel!==F.Trace||t?void 0:this.formattedHeaders(e),r=e.message,s=r.queryParameters&&Object.keys(r.queryParameters).length>0?q(r.queryParameters):void 0,i="".concat(r.origin).concat(r.path).concat(s?"?".concat(s):""),a=t?void 0:this.formattedBody(e);let o="Sending";t&&(o="".concat(e.canceled?"Canceled":"Failed").concat(e.details?" (".concat(e.details,")"):""));const l=((null==a?void 0:a.formData)?"FormData":"Method").length;return"".concat(o," HTTP request:\n  ").concat(this.paddedString("Method",l),": ").concat(r.method,"\n  ").concat(this.paddedString("URL",l),": ").concat(i).concat(n?"\n  ".concat(this.paddedString("Headers",l),":\n").concat(n):"").concat((null==a?void 0:a.formData)?"\n  ".concat(this.paddedString("FormData",l),":\n").concat(a.formData):"").concat((null==a?void 0:a.body)?"\n  ".concat(this.paddedString("Body",l),":\n").concat(a.body):"")}if("network-response"===e.messageType){const t=e.minimumLevel===F.Trace?this.formattedHeaders(e):void 0,n=this.formattedBody(e),r=((null==n?void 0:n.formData)?"Headers":"Status").length,s=e.message;return"Received HTTP response:\n  ".concat(this.paddedString("URL",r),": ").concat(s.url,"\n  ").concat(this.paddedString("Status",r),": ").concat(s.status).concat(t?"\n  ".concat(this.paddedString("Headers",r),":\n").concat(t):"").concat((null==n?void 0:n.body)?"\n  ".concat(this.paddedString("Body",r),":\n").concat(n.body):"")}if("error"===e.messageType){const t=this.formattedErrorStatus(e),n=e.message;return"".concat(n.name,": ").concat(n.message).concat(t?"\n".concat(t):"")}return"<unknown log message data>"}formattedObject(e){const t=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=10===r,a=" ".repeat(2*r),o=[],l=(t,n)=>!!e.ignoredKeys&&("function"==typeof e.ignoredKeys?e.ignoredKeys(t,n):e.ignoredKeys.includes(t));if("string"==typeof n)o.push("".concat(a,"- ").concat(n));else if("number"==typeof n)o.push("".concat(a,"- ").concat(n));else if("boolean"==typeof n)o.push("".concat(a,"- ").concat(n));else if(null===n)o.push("".concat(a,"- null"));else if(void 0===n)o.push("".concat(a,"- undefined"));else if("function"==typeof n)o.push("".concat(a,"- <function>"));else if("object"==typeof n)if(Array.isArray(n)||"function"!=typeof n.toString||0===n.toString().indexOf("[object"))if(Array.isArray(n))for(const e of n){const n=s?"":a;if(null===e)o.push("".concat(n,"- null"));else if(void 0===e)o.push("".concat(n,"- undefined"));else if("function"==typeof e)o.push("".concat(n,"- <function>"));else if("object"==typeof e){const s=Array.isArray(e),a=i?"...":t(e,r+1,!s);o.push("".concat(n,"-").concat(s&&!i?"\n":" ").concat(a))}else o.push("".concat(n,"- ").concat(e));s=!1}else{const e=n,c=Object.keys(e),u=c.reduce((t,n)=>Math.max(t,l(n,e)?t:n.length),0);for(const n of c){if(l(n,e))continue;const c=s?"":a,d=e[n],h=n.padEnd(u," ");if(null===d)o.push("".concat(c).concat(h,": null"));else if(void 0===d)o.push("".concat(c).concat(h,": undefined"));else if("function"==typeof d)o.push("".concat(c).concat(h,": <function>"));else if("object"==typeof d){const e=Array.isArray(d),n=e&&0===d.length,s=!(e||d instanceof String||0!==Object.keys(d).length),a=!e&&"function"==typeof d.toString&&0!==d.toString().indexOf("[object"),l=i?"...":n?"[]":s?"{}":t(d,r+1,a);o.push("".concat(c).concat(h,":").concat(i||a||n||s?" ":"\n").concat(l))}else o.push("".concat(c).concat(h,": ").concat(d));s=!1}}else o.push("".concat(s?"":a).concat(n.toString())),s=!1;return o.join("\n")};return t(e.message)}formattedHeaders(e){if(!e.message.headers)return;const t=e.message.headers,n=Object.keys(t).reduce((e,t)=>Math.max(e,t.length),0);return Object.keys(t).map(e=>"    - ".concat(e.toLowerCase().padEnd(n," "),": ").concat(t[e])).join("\n")}formattedBody(e){var t;if(!e.message.headers)return;let n,r;const s=e.message.headers,i=null!==(t=s["content-type"])&&void 0!==t?t:s["Content-Type"],a="formData"in e.message?e.message.formData:void 0,o=e.message.body;if(a){const e=a.reduce((e,t)=>{let{key:n}=t;return Math.max(e,n.length)},0);n=a.map(t=>{let{key:n,value:r}=t;return"    - ".concat(n.padEnd(e," "),": ").concat(r)}).join("\n")}return o?(r="string"==typeof o?"    ".concat(o):o instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(o)?!i||-1===i.indexOf("javascript")&&-1===i.indexOf("json")?"    ArrayBuffer { byteLength: ".concat(o.byteLength," }"):"    ".concat(V.decoder.decode(o)):"    File { name: ".concat(o.name).concat(o.contentLength?", contentLength: ".concat(o.contentLength):"").concat(o.mimeType?", mimeType: ".concat(o.mimeType):""," }"),{body:r,formData:n}):{formData:n}}formattedErrorStatus(e){if(!e.message.status)return;const t=e.message.status,n=t.errorData;let r;if(V.isError(n))r="    ".concat(n.name,": ").concat(n.message),n.stack&&(r+="\n".concat(n.stack.split("\n").map(e=>"      ".concat(e)).join("\n")));else if(n)try{r="    ".concat(JSON.stringify(n))}catch(e){r="    ".concat(n)}return"  Category  : ".concat(t.category,"\n  Operation : ").concat(t.operation,"\n  Status    : ").concat(t.statusCode).concat(r?"\n  Error data:\n".concat(r):"")}paddedString(e,t){return e.padEnd(t-e.length," ")}static isError(e){return!!e&&(e instanceof Error||"[object Error]"===Object.prototype.toString.call(e))}}var $;V.decoder=new TextDecoder,function(e){e.Unknown="UnknownEndpoint",e.MessageSend="MessageSendEndpoint",e.Subscribe="SubscribeEndpoint",e.Presence="PresenceEndpoint",e.Files="FilesEndpoint",e.MessageStorage="MessageStorageEndpoint",e.ChannelGroups="ChannelGroupsEndpoint",e.DevicePushNotifications="DevicePushNotificationsEndpoint",e.AppContext="AppContextEndpoint",e.MessageReactions="MessageReactionsEndpoint"}($||($={}));class J{static None(){return{shouldRetry:(e,t,n,r)=>!1,getDelay:(e,t)=>-1,validate:()=>!0}}static LinearRetryPolicy(e){var t;return{delay:e.delay,maximumRetry:e.maximumRetry,excluded:null!==(t=e.excluded)&&void 0!==t?t:[],shouldRetry(e,t,n,r){return Q(e,t,n,null!=r?r:0,this.maximumRetry,this.excluded)},getDelay(e,t){let n=-1;return t&&void 0!==t.headers["retry-after"]&&(n=parseInt(t.headers["retry-after"],10)),-1===n&&(n=this.delay),1e3*(n+Math.random())},validate(){if(this.delay<2)throw new Error("Delay can not be set less than 2 seconds for retry");if(this.maximumRetry>10)throw new Error("Maximum retry for linear retry policy can not be more than 10")}}}static ExponentialRetryPolicy(e){var t;return{minimumDelay:e.minimumDelay,maximumDelay:e.maximumDelay,maximumRetry:e.maximumRetry,excluded:null!==(t=e.excluded)&&void 0!==t?t:[],shouldRetry(e,t,n,r){return Q(e,t,n,null!=r?r:0,this.maximumRetry,this.excluded)},getDelay(e,t){let n=-1;return t&&void 0!==t.headers["retry-after"]&&(n=parseInt(t.headers["retry-after"],10)),-1===n&&(n=Math.min(Math.pow(2,e),this.maximumDelay)),1e3*(n+Math.random())},validate(){if(this.minimumDelay<2)throw new Error("Minimum delay can not be set less than 2 seconds for retry");if(this.maximumDelay>150)throw new Error("Maximum delay can not be set more than 150 seconds for retry");if(this.maximumRetry>6)throw new Error("Maximum retry for exponential retry policy can not be more than 6")}}}}const Q=(e,t,n,r,s,i)=>(!n||n!==h.PNCancelledCategory&&n!==h.PNBadRequestCategory&&n!==h.PNAccessDeniedCategory)&&!Y(e,i)&&!(r>s)&&(!t||429===t.status||t.status>=500),Y=(e,t)=>!!(t&&t.length>0)&&t.includes(X(e)),X=e=>{let t=$.Unknown;return e.path.startsWith("/v2/subscribe")?t=$.Subscribe:e.path.startsWith("/publish/")||e.path.startsWith("/signal/")?t=$.MessageSend:e.path.startsWith("/v2/presence")?t=$.Presence:e.path.startsWith("/v2/history")||e.path.startsWith("/v3/history")?t=$.MessageStorage:e.path.startsWith("/v1/message-actions/")?t=$.MessageReactions:e.path.startsWith("/v1/channel-registration/")||e.path.startsWith("/v2/objects/")?t=$.ChannelGroups:e.path.startsWith("/v1/push/")||e.path.startsWith("/v2/push/")?t=$.DevicePushNotifications:e.path.startsWith("/v1/files/")&&(t=$.Files),t};class Z{constructor(e,t,n){this.previousEntryTimestamp=0,this.pubNubId=e,this.minLogLevel=t,this.loggers=n}get logLevel(){return this.minLogLevel}trace(e,t){this.log(F.Trace,e,t)}debug(e,t){this.log(F.Debug,e,t)}info(e,t){this.log(F.Info,e,t)}warn(e,t){this.log(F.Warn,e,t)}error(e,t){this.log(F.Error,e,t)}log(e,t,n){if(e<this.minLogLevel||0===this.loggers.length)return;const r=new Date;r.getTime()<=this.previousEntryTimestamp?(this.previousEntryTimestamp++,r.setTime(this.previousEntryTimestamp)):this.previousEntryTimestamp=r.getTime();const s=F[e].toLowerCase(),i=Object.assign({timestamp:r,pubNubId:this.pubNubId,level:e,minimumLevel:this.minLogLevel,location:t},"function"==typeof n?n():{messageType:"text",message:n});this.loggers.forEach(e=>e[s](i))}}var ee={exports:{}};!function(e,t){!function(e){var t="0.1.0",n={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};function r(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n}function s(e,t){var r=n[t||"all"];return r&&r.test(e)||!1}r.isUUID=s,r.VERSION=t,e.uuid=r,e.isUUID=s}(t),null!==e&&(e.exports=t.uuid)}(ee,ee.exports);var te=t(ee.exports),ne={createUUID:()=>te.uuid?te.uuid():te()};const re=(e,t)=>{var n,r,s,i;!e.retryConfiguration&&e.enableEventEngine&&(e.retryConfiguration=J.ExponentialRetryPolicy({minimumDelay:2,maximumDelay:150,maximumRetry:6,excluded:[$.MessageSend,$.Presence,$.Files,$.MessageStorage,$.ChannelGroups,$.DevicePushNotifications,$.AppContext,$.MessageReactions]}));const a="pn-".concat(ne.createUUID());e.logVerbosity?e.logLevel=F.Debug:void 0===e.logLevel&&(e.logLevel=F.None);const o=new Z(ie(a),e.logLevel,[...null!==(n=e.loggers)&&void 0!==n?n:[],new V]);void 0!==e.logVerbosity&&o.warn("Configuration","'logVerbosity' is deprecated. Use 'logLevel' instead."),null===(r=e.retryConfiguration)||void 0===r||r.validate(),null!==(s=e.useRandomIVs)&&void 0!==s||(e.useRandomIVs=!0),e.useRandomIVs&&o.warn("Configuration","'useRandomIVs' is deprecated. Use 'cryptoModule' instead."),e.origin=se(null!==(i=e.ssl)&&void 0!==i&&i,e.origin);const l=e.cryptoModule;l&&delete e.cryptoModule;const c=Object.assign(Object.assign({},e),{_pnsdkSuffix:{},_loggerManager:o,_instanceId:a,_cryptoModule:void 0,_cipherKey:void 0,_setupCryptoModule:t,get instanceId(){if(e.useInstanceId)return this._instanceId},getInstanceId(){if(e.useInstanceId)return this._instanceId},getUserId(){return this.userId},setUserId(e){if(!e||"string"!=typeof e||0===e.trim().length)throw new Error("Missing or invalid userId parameter. Provide a valid string userId");this.userId=e},logger(){return this._loggerManager},getAuthKey(){return this.authKey},setAuthKey(e){this.authKey=e},getFilterExpression(){return this.filterExpression},setFilterExpression(e){this.filterExpression=e},getCipherKey(){return this._cipherKey},setCipherKey(t){this._cipherKey=t,t||!this._cryptoModule?t&&this._setupCryptoModule&&(this._cryptoModule=this._setupCryptoModule({cipherKey:t,useRandomIVs:e.useRandomIVs,customEncrypt:this.getCustomEncrypt(),customDecrypt:this.getCustomDecrypt(),logger:this.logger()})):this._cryptoModule=void 0},getCryptoModule(){return this._cryptoModule},getUseRandomIVs:()=>e.useRandomIVs,isSharedWorkerEnabled:()=>"Web"===e.sdkFamily&&e.subscriptionWorkerUrl,getKeepPresenceChannelsInPresenceRequests:()=>"Web"===e.sdkFamily&&e.subscriptionWorkerUrl,setPresenceTimeout(e){this.heartbeatInterval=e/2-1,this.presenceTimeout=e},getPresenceTimeout(){return this.presenceTimeout},getHeartbeatInterval(){return this.heartbeatInterval},setHeartbeatInterval(e){this.heartbeatInterval=e},getTransactionTimeout(){return this.transactionalRequestTimeout},getSubscribeTimeout(){return this.subscribeRequestTimeout},getFileTimeout(){return this.fileRequestTimeout},get PubNubFile(){return e.PubNubFile},get version(){return"10.2.4"},getVersion(){return this.version},_addPnsdkSuffix(e,t){this._pnsdkSuffix[e]="".concat(t)},_getPnsdkSuffix(e){const t=Object.values(this._pnsdkSuffix).join(e);return t.length>0?e+t:""},getUUID(){return this.getUserId()},setUUID(e){this.setUserId(e)},getCustomEncrypt:()=>e.customEncrypt,getCustomDecrypt:()=>e.customDecrypt});return e.cipherKey?(o.warn("Configuration","'cipherKey' is deprecated. Use 'cryptoModule' instead."),c.setCipherKey(e.cipherKey)):l&&(c._cryptoModule=l),c},se=(e,t)=>{const n=e?"https://":"http://";return"string"==typeof t?"".concat(n).concat(t):"".concat(n).concat(t[Math.floor(Math.random()*t.length)])},ie=e=>{let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=t+((t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24))>>>0;return t.toString(16).padStart(8,"0")};class ae{constructor(e){this.cbor=e}setToken(e){e&&e.length>0?this.token=e:this.token=void 0}getToken(){return this.token}parseToken(e){const t=this.cbor.decodeToken(e);if(void 0!==t){const e=t.res.uuid?Object.keys(t.res.uuid):[],n=Object.keys(t.res.chan),r=Object.keys(t.res.grp),s=t.pat.uuid?Object.keys(t.pat.uuid):[],i=Object.keys(t.pat.chan),a=Object.keys(t.pat.grp),o={version:t.v,timestamp:t.t,ttl:t.ttl,authorized_uuid:t.uuid,signature:t.sig},l=e.length>0,c=n.length>0,u=r.length>0;if(l||c||u){if(o.resources={},l){const n=o.resources.uuids={};e.forEach(e=>n[e]=this.extractPermissions(t.res.uuid[e]))}if(c){const e=o.resources.channels={};n.forEach(n=>e[n]=this.extractPermissions(t.res.chan[n]))}if(u){const e=o.resources.groups={};r.forEach(n=>e[n]=this.extractPermissions(t.res.grp[n]))}}const d=s.length>0,h=i.length>0,p=a.length>0;if(d||h||p){if(o.patterns={},d){const e=o.patterns.uuids={};s.forEach(n=>e[n]=this.extractPermissions(t.pat.uuid[n]))}if(h){const e=o.patterns.channels={};i.forEach(n=>e[n]=this.extractPermissions(t.pat.chan[n]))}if(p){const e=o.patterns.groups={};a.forEach(n=>e[n]=this.extractPermissions(t.pat.grp[n]))}}return t.meta&&Object.keys(t.meta).length>0&&(o.meta=t.meta),o}}extractPermissions(e){const t={read:!1,write:!1,manage:!1,delete:!1,get:!1,update:!1,join:!1};return 128&~e||(t.join=!0),64&~e||(t.update=!0),32&~e||(t.get=!0),8&~e||(t.delete=!0),4&~e||(t.manage=!0),2&~e||(t.write=!0),1&~e||(t.read=!0),t}}var oe,le;!function(e){e.GET="GET",e.POST="POST",e.PATCH="PATCH",e.DELETE="DELETE",e.LOCAL="LOCAL"}(oe||(oe={}));class ce{constructor(e,t,n,r){this.publishKey=e,this.secretKey=t,this.hasher=n,this.logger=r}signature(e){const t=e.path.startsWith("/publish")?oe.GET:e.method;let n="".concat(t,"\n").concat(this.publishKey,"\n").concat(e.path,"\n").concat(this.queryParameters(e.queryParameters),"\n");if(t===oe.POST||t===oe.PATCH){const t=e.body;let r;t&&t instanceof ArrayBuffer?r=ce.textDecoder.decode(t):t&&"object"!=typeof t&&(r=t),r&&(n+=r)}return this.logger.trace("RequestSignature",()=>({messageType:"text",message:"Request signature input:\n".concat(n)})),"v2.".concat(this.hasher(n,this.secretKey)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}queryParameters(e){return Object.keys(e).sort().map(t=>{const n=e[t];return Array.isArray(n)?n.sort().map(e=>"".concat(t,"=").concat(U(e))).join("&"):"".concat(t,"=").concat(U(n))}).join("&")}}ce.textDecoder=new TextDecoder("utf-8");class ue{constructor(e){this.configuration=e;const{clientConfiguration:{keySet:t},shaHMAC:n}=e;t.secretKey&&n&&(this.signatureGenerator=new ce(t.publishKey,t.secretKey,n,this.logger))}get logger(){return this.configuration.clientConfiguration.logger()}makeSendable(e){const t=this.configuration.clientConfiguration.retryConfiguration,n=this.configuration.transport;if(void 0!==t){let r,s,i=!1,a=0;const o={abort:e=>{i=!0,r&&clearTimeout(r),s&&s.abort(e)}};return[new Promise((o,l)=>{const c=()=>{if(i)return;const[u,d]=n.makeSendable(this.request(e));s=d;const p=(n,s)=>{const i=!s||s.category!==h.PNCancelledCategory,u=!n||n.status>=400;let d=-1;i&&u&&t.shouldRetry(e,n,null==s?void 0:s.category,a+1)&&(d=t.getDelay(a,n)),d>0?(a++,this.logger.warn("PubNubMiddleware","HTTP request retry #".concat(a," in ").concat(d,"ms.")),r=setTimeout(()=>c(),d)):n?o(n):s&&l(s)};u.then(e=>p(e)).catch(e=>p(void 0,e))};c()}),s?o:void 0]}return n.makeSendable(this.request(e))}request(e){var t;const{clientConfiguration:n}=this.configuration;return(e=this.configuration.transport.request(e)).queryParameters||(e.queryParameters={}),n.useInstanceId&&(e.queryParameters.instanceid=n.getInstanceId()),e.queryParameters.uuid||(e.queryParameters.uuid=n.userId),n.useRequestId&&(e.queryParameters.requestid=e.identifier),e.queryParameters.pnsdk=this.generatePNSDK(),null!==(t=e.origin)&&void 0!==t||(e.origin=n.origin),this.authenticateRequest(e),this.signRequest(e),e}authenticateRequest(e){var t;if(e.path.startsWith("/v2/auth/")||e.path.startsWith("/v3/pam/")||e.path.startsWith("/time"))return;const{clientConfiguration:n,tokenManager:r}=this.configuration,s=null!==(t=r&&r.getToken())&&void 0!==t?t:n.authKey;s&&(e.queryParameters.auth=s)}signRequest(e){this.signatureGenerator&&!e.path.startsWith("/time")&&(e.queryParameters.timestamp=String(Math.floor((new Date).getTime()/1e3)),e.queryParameters.signature=this.signatureGenerator.signature(e))}generatePNSDK(){const{clientConfiguration:e}=this.configuration;if(e.sdkName)return e.sdkName;let t="PubNub-JS-".concat(e.sdkFamily);e.partnerId&&(t+="-".concat(e.partnerId)),t+="/".concat(e.getVersion());const n=e._getPnsdkSuffix(" ");return n.length>0&&(t+=n),t}}class de{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fetch";this.logger=e,this.transport=t,e.debug("WebTransport","Create with configuration:\n  - transport: ".concat(t)),"fetch"!==t||window&&window.fetch||(e.warn("WebTransport","'".concat(t,"' not supported in this browser. Fallback to the 'xhr' transport.")),this.transport="xhr"),"fetch"===this.transport&&(de.originalFetch=de.getOriginalFetch(),this.isFetchMonkeyPatched()&&e.warn("WebTransport","Native Web Fetch API 'fetch' function monkey patched."))}makeSendable(e){const t=new AbortController,n={abortController:t,abort:e=>{t.signal.aborted||(this.logger.trace("WebTransport","On-demand request aborting: ".concat(e)),t.abort(e))}};return[this.webTransportRequestFromTransportRequest(e).then(t=>(this.logger.debug("WebTransport",()=>({messageType:"network-request",message:e})),this.sendRequest(t,n).then(e=>e.arrayBuffer().then(t=>[e,t])).then(e=>{const n=e[1].byteLength>0?e[1]:void 0,{status:r,headers:s}=e[0],i={};s.forEach((e,t)=>i[t]=e.toLowerCase());const a={status:r,url:t.url,headers:i,body:n};if(this.logger.debug("WebTransport",()=>({messageType:"network-response",message:a})),r>=400)throw M.create(a);return a}).catch(t=>{const n=("string"==typeof t?t:t.message).toLowerCase();let r="string"==typeof t?new Error(t):t;throw n.includes("timeout")?this.logger.warn("WebTransport",()=>({messageType:"network-request",message:e,details:"Timeout",canceled:!0})):n.includes("cancel")||n.includes("abort")?(this.logger.debug("WebTransport",()=>({messageType:"network-request",message:e,details:"Aborted",canceled:!0})),r=new Error("Aborted"),r.name="AbortError"):n.includes("network")?this.logger.warn("WebTransport",()=>({messageType:"network-request",message:e,details:"Network error",failed:!0})):this.logger.warn("WebTransport",()=>({messageType:"network-request",message:e,details:M.create(r).message,failed:!0})),M.create(r)}))),n]}request(e){return e}sendRequest(e,t){return o(this,void 0,void 0,function*(){return"fetch"===this.transport?this.sendFetchRequest(e,t):this.sendXHRRequest(e,t)})}sendFetchRequest(e,t){return o(this,void 0,void 0,function*(){let n;const r=new Promise((r,s)=>{n=setTimeout(()=>{clearTimeout(n),s(new Error("Request timeout")),t.abort("Cancel because of timeout")},1e3*e.timeout)}),s=new Request(e.url,{method:e.method,headers:e.headers,redirect:"follow",body:e.body});return Promise.race([de.originalFetch(s,{signal:t.abortController.signal,credentials:"omit",cache:"no-cache"}).then(e=>(n&&clearTimeout(n),e)),r])})}sendXHRRequest(e,t){return o(this,void 0,void 0,function*(){return new Promise((n,r)=>{var s;const i=new XMLHttpRequest;i.open(e.method,e.url,!0);let a=!1;i.responseType="arraybuffer",i.timeout=1e3*e.timeout,t.abortController.signal.onabort=()=>{i.readyState!=XMLHttpRequest.DONE&&i.readyState!=XMLHttpRequest.UNSENT&&(a=!0,i.abort())},Object.entries(null!==(s=e.headers)&&void 0!==s?s:{}).forEach(e=>{let[t,n]=e;return i.setRequestHeader(t,n)}),i.onabort=()=>{r(new Error("Aborted"))},i.ontimeout=()=>{r(new Error("Request timeout"))},i.onerror=()=>{if(!a){const t=this.transportResponseFromXHR(e.url,i);r(new Error(M.create(t).message))}},i.onload=()=>{const e=new Headers;i.getAllResponseHeaders().split("\r\n").forEach(t=>{const[n,r]=t.split(": ");n.length>1&&r.length>1&&e.append(n,r)}),n(new Response(i.response,{status:i.status,headers:e,statusText:i.statusText}))},i.send(e.body)})})}webTransportRequestFromTransportRequest(e){return o(this,void 0,void 0,function*(){let t,n=e.path;if(e.formData&&e.formData.length>0){e.queryParameters={};const n=e.body,r=new FormData;for(const{key:t,value:s}of e.formData)r.append(t,s);try{const e=yield n.toArrayBuffer();r.append("file",new Blob([e],{type:"application/octet-stream"}),n.name)}catch(e){this.logger.warn("WebTransport",()=>({messageType:"error",message:e}));try{const e=yield n.toFileUri();r.append("file",e,n.name)}catch(e){this.logger.error("WebTransport",()=>({messageType:"error",message:e}))}}t=r}else if(e.body&&("string"==typeof e.body||e.body instanceof ArrayBuffer))if(e.compressible&&"undefined"!=typeof CompressionStream){const n="string"==typeof e.body?de.encoder.encode(e.body):e.body,r=n.byteLength,s=new ReadableStream({start(e){e.enqueue(n),e.close()}});t=yield new Response(s.pipeThrough(new CompressionStream("deflate"))).arrayBuffer(),this.logger.trace("WebTransport",()=>{const e=t.byteLength,n=(e/r).toFixed(2);return{messageType:"text",message:"Body of ".concat(r," bytes, compressed by ").concat(n,"x to ").concat(e," bytes.")}})}else t=e.body;return e.queryParameters&&0!==Object.keys(e.queryParameters).length&&(n="".concat(n,"?").concat(q(e.queryParameters))),{url:"".concat(e.origin).concat(n),method:e.method,headers:e.headers,timeout:e.timeout,body:t}})}isFetchMonkeyPatched(e){return!(null!=e?e:fetch).toString().includes("[native code]")&&"fetch"!==fetch.name}transportResponseFromXHR(e,t){const n=t.getAllResponseHeaders().split("\n"),r={};for(const s of n){const[e,t]=s.trim().split(":");e&&t&&(r[e.toLowerCase()]=t.trim())}return{status:t.status,url:e,headers:r,body:t.response}}static getOriginalFetch(){let e=document.querySelector('iframe[name="pubnub-context-unpatched-fetch"]');return e||(e=document.createElement("iframe"),e.style.display="none",e.name="pubnub-context-unpatched-fetch",e.src="about:blank",document.body.appendChild(e)),e.contentWindow?e.contentWindow.fetch.bind(e.contentWindow):fetch}}de.encoder=new TextEncoder,de.decoder=new TextDecoder;class he{constructor(e){this.params=e,this.requestIdentifier=ne.createUUID(),this._cancellationController=null}get cancellationController(){return this._cancellationController}set cancellationController(e){this._cancellationController=e}abort(e){this&&this.cancellationController&&this.cancellationController.abort(e)}operation(){throw Error("Should be implemented by subclass.")}validate(){}parse(e){return o(this,void 0,void 0,function*(){return this.deserializeResponse(e)})}request(){var e,t,n,r,s,i;const a={method:null!==(t=null===(e=this.params)||void 0===e?void 0:e.method)&&void 0!==t?t:oe.GET,path:this.path,queryParameters:this.queryParameters,cancellable:null!==(r=null===(n=this.params)||void 0===n?void 0:n.cancellable)&&void 0!==r&&r,compressible:null!==(i=null===(s=this.params)||void 0===s?void 0:s.compressible)&&void 0!==i&&i,timeout:10,identifier:this.requestIdentifier},o=this.headers;if(o&&(a.headers=o),a.method===oe.POST||a.method===oe.PATCH){const[e,t]=[this.body,this.formData];t&&(a.formData=t),e&&(a.body=e)}return a}get headers(){var e,t;return Object.assign({"Accept-Encoding":"gzip, deflate"},null!==(t=null===(e=this.params)||void 0===e?void 0:e.compressible)&&void 0!==t&&t?{"Content-Encoding":"deflate"}:{})}get path(){throw Error("`path` getter should be implemented by subclass.")}get queryParameters(){return{}}get formData(){}get body(){}deserializeResponse(e){const t=he.decoder.decode(e.body),n=e.headers["content-type"];let r;if(!n||-1===n.indexOf("javascript")&&-1===n.indexOf("json"))throw new p("Service response error, check status for details",g(t,e.status));try{r=JSON.parse(t)}catch(n){throw console.error("Error parsing JSON response:",n),new p("Service response error, check status for details",g(t,e.status))}if("status"in r&&"number"==typeof r.status&&r.status>=400)throw M.create(e);return r}}he.decoder=new TextDecoder,function(e){e[e.Presence=-2]="Presence",e[e.Message=-1]="Message",e[e.Signal=1]="Signal",e[e.AppContext=2]="AppContext",e[e.MessageAction=3]="MessageAction",e[e.Files=4]="Files"}(le||(le={}));class pe extends he{constructor(e){var t,n,r,s,i,a;super({cancellable:!0}),this.parameters=e,null!==(t=(s=this.parameters).withPresence)&&void 0!==t||(s.withPresence=!1),null!==(n=(i=this.parameters).channelGroups)&&void 0!==n||(i.channelGroups=[]),null!==(r=(a=this.parameters).channels)&&void 0!==r||(a.channels=[])}operation(){return I.PNSubscribeOperation}validate(){const{keySet:{subscribeKey:e},channels:t,channelGroups:n}=this.parameters;return e?t||n?void 0:"`channels` and `channelGroups` both should not be empty":"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){let t,n;try{n=he.decoder.decode(e.body),t=JSON.parse(n)}catch(e){console.error("Error parsing JSON response:",e)}if(!t)throw new p("Service response error, check status for details",g(n,e.status));const r=t.m.filter(e=>{const t=void 0===e.b?e.c:e.b;return this.parameters.channels&&this.parameters.channels.includes(t)||this.parameters.channelGroups&&this.parameters.channelGroups.includes(t)}).map(e=>{let{e:t}=e;null!=t||(t=e.c.endsWith("-pnpres")?le.Presence:le.Message);const n=W(e.d);return t!=le.Signal&&"string"==typeof e.d?t==le.Message?{type:le.Message,data:this.messageFromEnvelope(e),pn_mfp:n}:{type:le.Files,data:this.fileFromEnvelope(e),pn_mfp:n}:t==le.Message?{type:le.Message,data:this.messageFromEnvelope(e),pn_mfp:n}:t===le.Presence?{type:le.Presence,data:this.presenceEventFromEnvelope(e),pn_mfp:n}:t==le.Signal?{type:le.Signal,data:this.signalFromEnvelope(e),pn_mfp:n}:t===le.AppContext?{type:le.AppContext,data:this.appContextFromEnvelope(e),pn_mfp:n}:t===le.MessageAction?{type:le.MessageAction,data:this.messageActionFromEnvelope(e),pn_mfp:n}:{type:le.Files,data:this.fileFromEnvelope(e),pn_mfp:n}});return{cursor:{timetoken:t.t.t,region:t.t.r},messages:r}})}get headers(){var e;return Object.assign(Object.assign({},null!==(e=super.headers)&&void 0!==e?e:{}),{accept:"text/javascript"})}presenceEventFromEnvelope(e){var t;const{d:n}=e,[r,s]=this.subscriptionChannelFromEnvelope(e),i=r.replace("-pnpres",""),a=null!==s?i:null,o=null!==s?s:i;return"string"!=typeof n&&("data"in n?(n.state=n.data,delete n.data):"action"in n&&"interval"===n.action&&(n.hereNowRefresh=null!==(t=n.here_now_refresh)&&void 0!==t&&t,delete n.here_now_refresh)),Object.assign({channel:i,subscription:s,actualChannel:a,subscribedChannel:o,timetoken:e.p.t},n)}messageFromEnvelope(e){const[t,n]=this.subscriptionChannelFromEnvelope(e),[r,s]=this.decryptedData(e.d),i={channel:t,subscription:n,actualChannel:null!==n?t:null,subscribedChannel:null!==n?n:t,timetoken:e.p.t,publisher:e.i,message:r};return e.u&&(i.userMetadata=e.u),e.cmt&&(i.customMessageType=e.cmt),s&&(i.error=s),i}signalFromEnvelope(e){const[t,n]=this.subscriptionChannelFromEnvelope(e),r={channel:t,subscription:n,timetoken:e.p.t,publisher:e.i,message:e.d};return e.u&&(r.userMetadata=e.u),e.cmt&&(r.customMessageType=e.cmt),r}messageActionFromEnvelope(e){const[t,n]=this.subscriptionChannelFromEnvelope(e),r=e.d;return{channel:t,subscription:n,timetoken:e.p.t,publisher:e.i,event:r.event,data:Object.assign(Object.assign({},r.data),{uuid:e.i})}}appContextFromEnvelope(e){const[t,n]=this.subscriptionChannelFromEnvelope(e),r=e.d;return{channel:t,subscription:n,timetoken:e.p.t,message:r}}fileFromEnvelope(e){const[t,n]=this.subscriptionChannelFromEnvelope(e),[r,s]=this.decryptedData(e.d);let i=s;const a={channel:t,subscription:n,timetoken:e.p.t,publisher:e.i};return e.u&&(a.userMetadata=e.u),r?"string"==typeof r?null!=i||(i="Unexpected file information payload data type."):(a.message=r.message,r.file&&(a.file={id:r.file.id,name:r.file.name,url:this.parameters.getFileUrl({id:r.file.id,name:r.file.name,channel:t})})):null!=i||(i="File information payload is missing."),e.cmt&&(a.customMessageType=e.cmt),i&&(a.error=i),a}subscriptionChannelFromEnvelope(e){return[e.c,void 0===e.b?e.c:e.b]}decryptedData(e){if(!this.parameters.crypto||"string"!=typeof e)return[e,void 0];let t,n;try{const n=this.parameters.crypto.decrypt(e);t=n instanceof ArrayBuffer?JSON.parse(fe.decoder.decode(n)):n}catch(e){t=null,n="Error while decrypting message content: ".concat(e.message)}return[null!=t?t:e,n]}}class fe extends pe{get path(){var e;const{keySet:{subscribeKey:t},channels:n}=this.parameters;return"/v2/subscribe/".concat(t,"/").concat(L(null!==(e=null==n?void 0:n.sort())&&void 0!==e?e:[],","),"/0")}get queryParameters(){const{channelGroups:e,filterExpression:t,heartbeat:n,state:r,timetoken:s,region:i,onDemand:a}=this.parameters,o={};return a&&(o["on-demand"]=1),e&&e.length>0&&(o["channel-group"]=e.sort().join(",")),t&&t.length>0&&(o["filter-expr"]=t),n&&(o.heartbeat=n),r&&Object.keys(r).length>0&&(o.state=JSON.stringify(r)),void 0!==s&&"string"==typeof s?s.length>0&&"0"!==s&&(o.tt=s):void 0!==s&&s>0&&(o.tt=s),i&&(o.tr=i),o}}class ge{constructor(){this.hasListeners=!1,this.listeners=[{count:-1,listener:{}}]}set onStatus(e){this.updateTypeOrObjectListener({add:!!e,listener:e,type:"status"})}set onMessage(e){this.updateTypeOrObjectListener({add:!!e,listener:e,type:"message"})}set onPresence(e){this.updateTypeOrObjectListener({add:!!e,listener:e,type:"presence"})}set onSignal(e){this.updateTypeOrObjectListener({add:!!e,listener:e,type:"signal"})}set onObjects(e){this.updateTypeOrObjectListener({add:!!e,listener:e,type:"objects"})}set onMessageAction(e){this.updateTypeOrObjectListener({add:!!e,listener:e,type:"messageAction"})}set onFile(e){this.updateTypeOrObjectListener({add:!!e,listener:e,type:"file"})}handleEvent(e){if(this.hasListeners)if(e.type===le.Message)this.announce("message",e.data);else if(e.type===le.Signal)this.announce("signal",e.data);else if(e.type===le.Presence)this.announce("presence",e.data);else if(e.type===le.AppContext){const{data:t}=e,{message:n}=t;if(this.announce("objects",t),"uuid"===n.type){const{message:e,channel:r}=t,s=a(t,["message","channel"]),{event:i,type:o}=n,l=a(n,["event","type"]),c=Object.assign(Object.assign({},s),{spaceId:r,message:Object.assign(Object.assign({},l),{event:"set"===i?"updated":"removed",type:"user"})});this.announce("user",c)}else if("channel"===n.type){const{message:e,channel:r}=t,s=a(t,["message","channel"]),{event:i,type:o}=n,l=a(n,["event","type"]),c=Object.assign(Object.assign({},s),{spaceId:r,message:Object.assign(Object.assign({},l),{event:"set"===i?"updated":"removed",type:"space"})});this.announce("space",c)}else if("membership"===n.type){const{message:e,channel:r}=t,s=a(t,["message","channel"]),{event:i,data:o}=n,l=a(n,["event","data"]),{uuid:c,channel:u}=o,d=a(o,["uuid","channel"]),h=Object.assign(Object.assign({},s),{spaceId:r,message:Object.assign(Object.assign({},l),{event:"set"===i?"updated":"removed",data:Object.assign(Object.assign({},d),{user:c,space:u})})});this.announce("membership",h)}}else e.type===le.MessageAction?this.announce("messageAction",e.data):e.type===le.Files&&this.announce("file",e.data)}handleStatus(e){this.hasListeners&&this.announce("status",e)}addListener(e){this.updateTypeOrObjectListener({add:!0,listener:e})}removeListener(e){this.updateTypeOrObjectListener({add:!1,listener:e})}removeAllListeners(){this.listeners=[{count:-1,listener:{}}],this.hasListeners=!1}updateTypeOrObjectListener(e){if(e.type)"function"==typeof e.listener?this.listeners[0].listener[e.type]=e.listener:delete this.listeners[0].listener[e.type];else if(e.listener&&"function"!=typeof e.listener){let t,n=!1;for(t of this.listeners)if(t.listener===e.listener){e.add?(t.count++,n=!0):(t.count--,0===t.count&&this.listeners.splice(this.listeners.indexOf(t),1));break}e.add&&!n&&this.listeners.push({count:1,listener:e.listener})}this.hasListeners=this.listeners.length>1||Object.keys(this.listeners[0]).length>0}announce(e,t){this.listeners.forEach(n=>{let{listener:r}=n;const s=r[e];s&&s(t)})}}class me{constructor(e){this.time=e}onReconnect(e){this.callback=e}startPolling(){this.timeTimer=setInterval(()=>this.callTime(),3e3)}stopPolling(){this.timeTimer&&clearInterval(this.timeTimer),this.timeTimer=null}callTime(){this.time(e=>{e.error||(this.stopPolling(),this.callback&&this.callback())})}}class be{constructor(e){this.config=e,e.logger().debug("DedupingManager",()=>({messageType:"object",message:{maximumCacheSize:e.maximumCacheSize},details:"Create with configuration:"})),this.maximumCacheSize=e.maximumCacheSize,this.hashHistory=[]}getKey(e){var t;return"".concat(e.timetoken,"-").concat(this.hashCode(JSON.stringify(null!==(t=e.message)&&void 0!==t?t:"")).toString())}isDuplicate(e){return this.hashHistory.includes(this.getKey(e))}addEntry(e){this.hashHistory.length>=this.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(e))}clearHistory(){this.hashHistory=[]}hashCode(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}}class ye{constructor(e,t,n,r,s,i,a){this.configuration=e,this.emitEvent=t,this.emitStatus=n,this.subscribeCall=r,this.heartbeatCall=s,this.leaveCall=i,this.disconnectedWhileHandledEvent=!1,e.logger().trace("SubscriptionManager","Create manager."),this.reconnectionManager=new me(a),this.dedupingManager=new be(this.configuration),this.heartbeatChannelGroups={},this.heartbeatChannels={},this.presenceChannelGroups={},this.presenceChannels={},this.heartbeatTimer=null,this.presenceState={},this.pendingChannelGroupSubscriptions=new Set,this.pendingChannelSubscriptions=new Set,this.channelGroups={},this.channels={},this.currentTimetoken="0",this.lastTimetoken="0",this.storedTimetoken=null,this.referenceTimetoken=null,this.subscriptionStatusAnnounced=!1,this.isOnline=!0}get subscriptionTimetoken(){var e;return H(this.currentTimetoken,null!==(e=this.referenceTimetoken)&&void 0!==e?e:"0")}get subscribedChannels(){return Object.keys(this.channels)}get subscribedChannelGroups(){return Object.keys(this.channelGroups)}get abort(){return this._subscribeAbort}set abort(e){this._subscribeAbort=e}disconnect(){this.disconnectedWhileHandledEvent=!0,this.stopSubscribeLoop(),this.stopHeartbeatTimer(),this.reconnectionManager.stopPolling()}reconnect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.startSubscribeLoop(e),e||this.configuration.useSmartHeartbeat||this.startHeartbeatTimer()}subscribe(e){const{channels:t,channelGroups:n,timetoken:r,withPresence:s=!1,withHeartbeats:i=!1}=e;r&&(this.lastTimetoken=this.currentTimetoken,this.currentTimetoken="".concat(r)),"0"!==this.currentTimetoken&&(this.storedTimetoken=this.currentTimetoken,this.currentTimetoken="0"),null==t||t.forEach(e=>{this.pendingChannelSubscriptions.add(e),this.channels[e]={},s&&(this.presenceChannels[e]={}),(i||this.configuration.getHeartbeatInterval())&&(this.heartbeatChannels[e]={})}),null==n||n.forEach(e=>{this.pendingChannelGroupSubscriptions.add(e),this.channelGroups[e]={},s&&(this.presenceChannelGroups[e]={}),(i||this.configuration.getHeartbeatInterval())&&(this.heartbeatChannelGroups[e]={})}),this.subscriptionStatusAnnounced=!1,this.reconnect()}unsubscribe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{channels:n,channelGroups:r}=e;const s=new Set,i=new Set;if(null==n||n.forEach(e=>{e in this.channels&&(delete this.channels[e],i.add(e),e in this.heartbeatChannels&&delete this.heartbeatChannels[e]),e in this.presenceState&&delete this.presenceState[e],e in this.presenceChannels&&(delete this.presenceChannels[e],i.add(e))}),null==r||r.forEach(e=>{e in this.channelGroups&&(delete this.channelGroups[e],s.add(e),e in this.heartbeatChannelGroups&&delete this.heartbeatChannelGroups[e]),e in this.presenceState&&delete this.presenceState[e],e in this.presenceChannelGroups&&(delete this.presenceChannelGroups[e],s.add(e))}),0===i.size&&0===s.size)return;const o=this.lastTimetoken,l=this.currentTimetoken;0===Object.keys(this.channels).length&&0===Object.keys(this.presenceChannels).length&&0===Object.keys(this.channelGroups).length&&0===Object.keys(this.presenceChannelGroups).length&&(this.lastTimetoken="0",this.currentTimetoken="0",this.referenceTimetoken=null,this.storedTimetoken=null,this.region=null,this.reconnectionManager.stopPolling()),this.reconnect(!0),!1!==this.configuration.suppressLeaveEvents||t||(r=Array.from(s),n=Array.from(i),this.leaveCall({channels:n,channelGroups:r},e=>{const{error:t}=e,s=a(e,["error"]);let i;t&&(e.errorData&&"object"==typeof e.errorData&&"message"in e.errorData&&"string"==typeof e.errorData.message?i=e.errorData.message:"message"in e&&"string"==typeof e.message&&(i=e.message)),this.emitStatus(Object.assign(Object.assign({},s),{error:null!=i&&i,affectedChannels:n,affectedChannelGroups:r,currentTimetoken:l,lastTimetoken:o}))}))}unsubscribeAll(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.disconnectedWhileHandledEvent=!0,this.unsubscribe({channels:this.subscribedChannels,channelGroups:this.subscribedChannelGroups},e)}startSubscribeLoop(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.disconnectedWhileHandledEvent=!1,this.stopSubscribeLoop();const t=[...Object.keys(this.channelGroups)],n=[...Object.keys(this.channels)];Object.keys(this.presenceChannelGroups).forEach(e=>t.push("".concat(e,"-pnpres"))),Object.keys(this.presenceChannels).forEach(e=>n.push("".concat(e,"-pnpres"))),0===n.length&&0===t.length||(this.subscribeCall(Object.assign(Object.assign(Object.assign({channels:n,channelGroups:t,state:this.presenceState,heartbeat:this.configuration.getPresenceTimeout(),timetoken:this.currentTimetoken},null!==this.region?{region:this.region}:{}),this.configuration.filterExpression?{filterExpression:this.configuration.filterExpression}:{}),{onDemand:!this.subscriptionStatusAnnounced||e}),(e,t)=>{this.processSubscribeResponse(e,t)}),!e&&this.configuration.useSmartHeartbeat&&this.startHeartbeatTimer())}stopSubscribeLoop(){this._subscribeAbort&&(this._subscribeAbort(),this._subscribeAbort=null)}processSubscribeResponse(e,t){if(e.error){if("object"==typeof e.errorData&&"name"in e.errorData&&"AbortError"===e.errorData.name||e.category===h.PNCancelledCategory)return;return void(e.category===h.PNTimeoutCategory?this.startSubscribeLoop():e.category===h.PNNetworkIssuesCategory||e.category===h.PNMalformedResponseCategory?(this.disconnect(),e.error&&this.configuration.autoNetworkDetection&&this.isOnline&&(this.isOnline=!1,this.emitStatus({category:h.PNNetworkDownCategory})),this.reconnectionManager.onReconnect(()=>{this.configuration.autoNetworkDetection&&!this.isOnline&&(this.isOnline=!0,this.emitStatus({category:h.PNNetworkUpCategory})),this.reconnect(),this.subscriptionStatusAnnounced=!0;const t={category:h.PNReconnectedCategory,operation:e.operation,lastTimetoken:this.lastTimetoken,currentTimetoken:this.currentTimetoken};this.emitStatus(t)}),this.reconnectionManager.startPolling(),this.emitStatus(Object.assign(Object.assign({},e),{category:h.PNNetworkIssuesCategory}))):e.category===h.PNBadRequestCategory?(this.stopHeartbeatTimer(),this.emitStatus(e)):this.emitStatus(e))}if(this.referenceTimetoken=G(t.cursor.timetoken,this.storedTimetoken),this.storedTimetoken?(this.currentTimetoken=this.storedTimetoken,this.storedTimetoken=null):(this.lastTimetoken=this.currentTimetoken,this.currentTimetoken=t.cursor.timetoken),!this.subscriptionStatusAnnounced){const t={category:h.PNConnectedCategory,operation:e.operation,affectedChannels:Array.from(this.pendingChannelSubscriptions),subscribedChannels:this.subscribedChannels,affectedChannelGroups:Array.from(this.pendingChannelGroupSubscriptions),lastTimetoken:this.lastTimetoken,currentTimetoken:this.currentTimetoken};this.subscriptionStatusAnnounced=!0,this.emitStatus(t),this.pendingChannelGroupSubscriptions.clear(),this.pendingChannelSubscriptions.clear()}const{messages:n}=t,{requestMessageCountThreshold:r,dedupeOnSubscribe:s}=this.configuration;r&&n.length>=r&&this.emitStatus({category:h.PNRequestMessageCountExceededCategory,operation:e.operation});try{const e={timetoken:this.currentTimetoken,region:this.region?this.region:void 0};this.configuration.logger().debug("SubscriptionManager",()=>({messageType:"object",message:n.map(e=>({type:e.type,data:Object.assign(Object.assign({},e.data),{pn_mfp:e.pn_mfp})})),details:"Received events:"})),n.forEach(t=>{if(s&&"message"in t.data&&"timetoken"in t.data){if(this.dedupingManager.isDuplicate(t.data))return void this.configuration.logger().warn("SubscriptionManager",()=>({messageType:"object",message:t.data,details:"Duplicate message detected (skipped):"}));this.dedupingManager.addEntry(t.data)}this.emitEvent(e,t)})}catch(e){const t={error:!0,category:h.PNUnknownCategory,errorData:e,statusCode:0};this.emitStatus(t)}this.region=t.cursor.region,this.disconnectedWhileHandledEvent?this.disconnectedWhileHandledEvent=!1:this.startSubscribeLoop()}setState(e){const{state:t,channels:n,channelGroups:r}=e;null==n||n.forEach(e=>e in this.channels&&(this.presenceState[e]=t)),null==r||r.forEach(e=>e in this.channelGroups&&(this.presenceState[e]=t))}changePresence(e){const{connected:t,channels:n,channelGroups:r}=e;t?(null==n||n.forEach(e=>this.heartbeatChannels[e]={}),null==r||r.forEach(e=>this.heartbeatChannelGroups[e]={})):(null==n||n.forEach(e=>{e in this.heartbeatChannels&&delete this.heartbeatChannels[e]}),null==r||r.forEach(e=>{e in this.heartbeatChannelGroups&&delete this.heartbeatChannelGroups[e]}),!1===this.configuration.suppressLeaveEvents&&this.leaveCall({channels:n,channelGroups:r},e=>this.emitStatus(e))),this.reconnect()}startHeartbeatTimer(){this.stopHeartbeatTimer();const e=this.configuration.getHeartbeatInterval();e&&0!==e&&(this.configuration.useSmartHeartbeat||this.sendHeartbeat(),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),1e3*e))}stopHeartbeatTimer(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}sendHeartbeat(){const e=Object.keys(this.heartbeatChannelGroups),t=Object.keys(this.heartbeatChannels);0===t.length&&0===e.length||this.heartbeatCall({channels:t,channelGroups:e,heartbeat:this.configuration.getPresenceTimeout(),state:this.presenceState},e=>{e.error&&this.configuration.announceFailedHeartbeats&&this.emitStatus(e),e.error&&this.configuration.autoNetworkDetection&&this.isOnline&&(this.isOnline=!1,this.disconnect(),this.emitStatus({category:h.PNNetworkDownCategory}),this.reconnect()),!e.error&&this.configuration.announceSuccessfulHeartbeats&&this.emitStatus(e)})}}class ve{constructor(e,t,n){this._payload=e,this.setDefaultPayloadStructure(),this.title=t,this.body=n}get payload(){return this._payload}set title(e){this._title=e}set subtitle(e){this._subtitle=e}set body(e){this._body=e}set badge(e){this._badge=e}set sound(e){this._sound=e}setDefaultPayloadStructure(){}toObject(){return{}}}class ke extends ve{constructor(){super(...arguments),this._apnsPushType="apns",this._isSilent=!1}get payload(){return this._payload}set configurations(e){e&&e.length&&(this._configurations=e)}get notification(){return this.payload.aps}get title(){return this._title}set title(e){e&&e.length&&(this.payload.aps.alert.title=e,this._title=e)}get subtitle(){return this._subtitle}set subtitle(e){e&&e.length&&(this.payload.aps.alert.subtitle=e,this._subtitle=e)}get body(){return this._body}set body(e){e&&e.length&&(this.payload.aps.alert.body=e,this._body=e)}get badge(){return this._badge}set badge(e){null!=e&&(this.payload.aps.badge=e,this._badge=e)}get sound(){return this._sound}set sound(e){e&&e.length&&(this.payload.aps.sound=e,this._sound=e)}set silent(e){this._isSilent=e}setDefaultPayloadStructure(){this.payload.aps={alert:{}}}toObject(){const e=Object.assign({},this.payload),{aps:t}=e;let{alert:n}=t;if(this._isSilent&&(t["content-available"]=1),"apns2"===this._apnsPushType){if(!this._configurations||!this._configurations.length)throw new ReferenceError("APNS2 configuration is missing");const t=[];this._configurations.forEach(e=>{t.push(this.objectFromAPNS2Configuration(e))}),t.length&&(e.pn_push=t)}return n&&Object.keys(n).length||delete t.alert,this._isSilent&&(delete t.alert,delete t.badge,delete t.sound,n={}),this._isSilent||n&&Object.keys(n).length?e:null}objectFromAPNS2Configuration(e){if(!e.targets||!e.targets.length)throw new ReferenceError("At least one APNS2 target should be provided");const{collapseId:t,expirationDate:n}=e,r={auth_method:"token",targets:e.targets.map(e=>this.objectFromAPNSTarget(e)),version:"v2"};return t&&t.length&&(r.collapse_id=t),n&&(r.expiration=n.toISOString()),r}objectFromAPNSTarget(e){if(!e.topic||!e.topic.length)throw new TypeError("Target 'topic' undefined.");const{topic:t,environment:n="development",excludedDevices:r=[]}=e,s={topic:t,environment:n};return r.length&&(s.excluded_devices=r),s}}class we extends ve{get payload(){return this._payload}get notification(){return this.payload.notification}get data(){return this.payload.data}get title(){return this._title}set title(e){e&&e.length&&(this.payload.notification.title=e,this._title=e)}get body(){return this._body}set body(e){e&&e.length&&(this.payload.notification.body=e,this._body=e)}get sound(){return this._sound}set sound(e){e&&e.length&&(this.payload.notification.sound=e,this._sound=e)}get icon(){return this._icon}set icon(e){e&&e.length&&(this.payload.notification.icon=e,this._icon=e)}get tag(){return this._tag}set tag(e){e&&e.length&&(this.payload.notification.tag=e,this._tag=e)}set silent(e){this._isSilent=e}setDefaultPayloadStructure(){this.payload.notification={},this.payload.data={}}toObject(){let e=Object.assign({},this.payload.data),t=null;const n={};if(Object.keys(this.payload).length>2){const t=a(this.payload,["notification","data"]);e=Object.assign(Object.assign({},e),t)}return this._isSilent?e.notification=this.payload.notification:t=this.payload.notification,Object.keys(e).length&&(n.data=e),t&&Object.keys(t).length&&(n.notification=t),Object.keys(n).length?n:null}}class Se{constructor(e,t){this._payload={apns:{},fcm:{}},this._title=e,this._body=t,this.apns=new ke(this._payload.apns,e,t),this.fcm=new we(this._payload.fcm,e,t)}set debugging(e){this._debugging=e}get title(){return this._title}get subtitle(){return this._subtitle}set subtitle(e){this._subtitle=e,this.apns.subtitle=e,this.fcm.subtitle=e}get body(){return this._body}get badge(){return this._badge}set badge(e){this._badge=e,this.apns.badge=e,this.fcm.badge=e}get sound(){return this._sound}set sound(e){this._sound=e,this.apns.sound=e,this.fcm.sound=e}buildPayload(e){const t={};if(e.includes("apns")||e.includes("apns2")){this.apns._apnsPushType=e.includes("apns")?"apns":"apns2";const n=this.apns.toObject();n&&Object.keys(n).length&&(t.pn_apns=n)}if(e.includes("fcm")){const e=this.fcm.toObject();e&&Object.keys(e).length&&(t.pn_fcm=e)}return Object.keys(t).length&&this._debugging&&(t.pn_debug=!0),t}}class Ce{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.sync=e,this.listeners=new Set}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}notify(e){const t=()=>{this.listeners.forEach(t=>{t(e)})};this.sync?t():setTimeout(t,0)}}class Ee{transition(e,t){var n;if(this.transitionMap.has(t.type))return null===(n=this.transitionMap.get(t.type))||void 0===n?void 0:n(e,t)}constructor(e){this.label=e,this.transitionMap=new Map,this.enterEffects=[],this.exitEffects=[]}on(e,t){return this.transitionMap.set(e,t),this}with(e,t){return[this,e,null!=t?t:[]]}onEnter(e){return this.enterEffects.push(e),this}onExit(e){return this.exitEffects.push(e),this}}class Pe extends Ce{constructor(e){super(!0),this.logger=e,this._pendingEvents=[],this._inTransition=!1}get currentState(){return this._currentState}get currentContext(){return this._currentContext}describe(e){return new Ee(e)}start(e,t){this._currentState=e,this._currentContext=t,this.notify({type:"engineStarted",state:e,context:t})}transition(e){if(!this._currentState)throw this.logger.error("Engine","Finite state machine is not started"),new Error("Start the engine first");if(this._inTransition)return this.logger.trace("Engine",()=>({messageType:"object",message:e,details:"Event engine in transition. Enqueue received event:"})),void this._pendingEvents.push(e);this._inTransition=!0,this.logger.trace("Engine",()=>({messageType:"object",message:e,details:"Event engine received event:"})),this.notify({type:"eventReceived",event:e});const t=this._currentState.transition(this._currentContext,e);if(t){const[n,r,s]=t;this.logger.trace("Engine","Exiting state: ".concat(this._currentState.label));for(const e of this._currentState.exitEffects)this.notify({type:"invocationDispatched",invocation:e(this._currentContext)});this.logger.trace("Engine",()=>({messageType:"object",details:"Entering '".concat(n.label,"' state with context:"),message:r}));const i=this._currentState;this._currentState=n;const a=this._currentContext;this._currentContext=r,this.notify({type:"transitionDone",fromState:i,fromContext:a,toState:n,toContext:r,event:e});for(const e of s)this.notify({type:"invocationDispatched",invocation:e});for(const e of this._currentState.enterEffects)this.notify({type:"invocationDispatched",invocation:e(this._currentContext)})}else this.logger.warn("Engine","No transition from '".concat(this._currentState.label,"' found for event: ").concat(e.type));if(this._inTransition=!1,this._pendingEvents.length>0){const e=this._pendingEvents.shift();e&&(this.logger.trace("Engine",()=>({messageType:"object",message:e,details:"De-queueing pending event:"})),this.transition(e))}}}class Oe{constructor(e,t){this.dependencies=e,this.logger=t,this.instances=new Map,this.handlers=new Map}on(e,t){this.handlers.set(e,t)}dispatch(e){if(this.logger.trace("Dispatcher","Process invocation: ".concat(e.type)),"CANCEL"===e.type){if(this.instances.has(e.payload)){const t=this.instances.get(e.payload);null==t||t.cancel(),this.instances.delete(e.payload)}return}const t=this.handlers.get(e.type);if(!t)throw this.logger.error("Dispatcher","Unhandled invocation '".concat(e.type,"'")),new Error("Unhandled invocation '".concat(e.type,"'"));const n=t(e.payload,this.dependencies);this.logger.trace("Dispatcher",()=>({messageType:"object",details:"Call invocation handler with parameters:",message:e.payload,ignoredKeys:["abortSignal"]})),e.managed&&this.instances.set(e.type,n),n.start()}dispose(){for(const[e,t]of this.instances.entries())t.cancel(),this.instances.delete(e)}}function Ne(e,t){const n=function(){return{type:e,payload:null==t?void 0:t(...arguments)}};return n.type=e,n}function je(e,t){const n=function(){return{type:e,payload:t(...arguments),managed:!1}};return n.type=e,n}function Te(e,t){const n=function(){return{type:e,payload:t(...arguments),managed:!0}};return n.type=e,n.cancel={type:"CANCEL",payload:e,managed:!1},n}class xe extends Error{constructor(){super("The operation was aborted."),this.name="AbortError",Object.setPrototypeOf(this,new.target.prototype)}}class _e extends Ce{constructor(){super(...arguments),this._aborted=!1}get aborted(){return this._aborted}throwIfAborted(){if(this._aborted)throw new xe}abort(){this._aborted=!0,this.notify(new xe)}}class Me{constructor(e,t){this.payload=e,this.dependencies=t}}class Ie extends Me{constructor(e,t,n){super(e,t),this.asyncFunction=n,this.abortSignal=new _e}start(){this.asyncFunction(this.payload,this.abortSignal,this.dependencies).catch(e=>{})}cancel(){this.abortSignal.abort()}}const Ae=e=>(t,n)=>new Ie(t,n,e),Re=Te("HEARTBEAT",(e,t)=>({channels:e,groups:t})),De=je("LEAVE",(e,t)=>({channels:e,groups:t})),Fe=je("EMIT_STATUS",e=>e),Ue=Te("WAIT",()=>({})),Le=Ne("RECONNECT",()=>({})),ze=Ne("DISCONNECT",function(){return{isOffline:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}),Be=Ne("JOINED",(e,t)=>({channels:e,groups:t})),qe=Ne("LEFT",(e,t)=>({channels:e,groups:t})),He=Ne("LEFT_ALL",function(){return{isOffline:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}),Ge=Ne("HEARTBEAT_SUCCESS",e=>({statusCode:e})),Ke=Ne("HEARTBEAT_FAILURE",e=>e),We=Ne("TIMES_UP",()=>({}));class Ve extends Oe{constructor(e,t){super(t,t.config.logger()),this.on(Re.type,Ae((t,n,r)=>o(this,[t,n,r],void 0,function(t,n,r){let{heartbeat:s,presenceState:i,config:a}=r;return function*(){n.throwIfAborted();try{yield s(Object.assign(Object.assign({abortSignal:n,channels:t.channels,channelGroups:t.groups},a.maintainPresenceState&&{state:i}),{heartbeat:a.presenceTimeout})),e.transition(Ge(200))}catch(t){if(t instanceof p){if(t.status&&t.status.category==h.PNCancelledCategory)return;e.transition(Ke(t))}}}()}))),this.on(De.type,Ae((e,t,n)=>o(this,[e,t,n],void 0,function(e,t,n){let{leave:r,config:s}=n;return function*(){if(!s.suppressLeaveEvents)try{r({channels:e.channels,channelGroups:e.groups})}catch(e){}}()}))),this.on(Ue.type,Ae((t,n,r)=>o(this,[t,n,r],void 0,function(t,n,r){let{heartbeatDelay:s}=r;return function*(){return n.throwIfAborted(),yield s(),n.throwIfAborted(),e.transition(We())}()}))),this.on(Fe.type,Ae((e,t,n)=>o(this,[e,t,n],void 0,function(e,t,n){let{emitStatus:r,config:s}=n;return function*(){s.announceFailedHeartbeats&&!0===(null==e?void 0:e.error)?r(Object.assign(Object.assign({},e),{operation:I.PNHeartbeatOperation})):s.announceSuccessfulHeartbeats&&200===e.statusCode&&r(Object.assign(Object.assign({},e),{error:!1,operation:I.PNHeartbeatOperation,category:h.PNAcknowledgmentCategory}))}()})))}}const $e=new Ee("HEARTBEAT_STOPPED");$e.on(Be.type,(e,t)=>$e.with({channels:[...e.channels,...t.payload.channels.filter(t=>!e.channels.includes(t))],groups:[...e.groups,...t.payload.groups.filter(t=>!e.groups.includes(t))]})),$e.on(qe.type,(e,t)=>$e.with({channels:e.channels.filter(e=>!t.payload.channels.includes(e)),groups:e.groups.filter(e=>!t.payload.groups.includes(e))})),$e.on(Le.type,(e,t)=>Ye.with({channels:e.channels,groups:e.groups})),$e.on(He.type,(e,t)=>Xe.with(void 0));const Je=new Ee("HEARTBEAT_COOLDOWN");Je.onEnter(()=>Ue()),Je.onExit(()=>Ue.cancel),Je.on(We.type,(e,t)=>Ye.with({channels:e.channels,groups:e.groups})),Je.on(Be.type,(e,t)=>Ye.with({channels:[...e.channels,...t.payload.channels.filter(t=>!e.channels.includes(t))],groups:[...e.groups,...t.payload.groups.filter(t=>!e.groups.includes(t))]})),Je.on(qe.type,(e,t)=>Ye.with({channels:e.channels.filter(e=>!t.payload.channels.includes(e)),groups:e.groups.filter(e=>!t.payload.groups.includes(e))},[De(t.payload.channels,t.payload.groups)])),Je.on(ze.type,(e,t)=>$e.with({channels:e.channels,groups:e.groups},[...t.payload.isOffline?[]:[De(e.channels,e.groups)]])),Je.on(He.type,(e,t)=>Xe.with(void 0,[...t.payload.isOffline?[]:[De(e.channels,e.groups)]]));const Qe=new Ee("HEARTBEAT_FAILED");Qe.on(Be.type,(e,t)=>Ye.with({channels:[...e.channels,...t.payload.channels.filter(t=>!e.channels.includes(t))],groups:[...e.groups,...t.payload.groups.filter(t=>!e.groups.includes(t))]})),Qe.on(qe.type,(e,t)=>Ye.with({channels:e.channels.filter(e=>!t.payload.channels.includes(e)),groups:e.groups.filter(e=>!t.payload.groups.includes(e))},[De(t.payload.channels,t.payload.groups)])),Qe.on(Le.type,(e,t)=>Ye.with({channels:e.channels,groups:e.groups})),Qe.on(ze.type,(e,t)=>$e.with({channels:e.channels,groups:e.groups},[...t.payload.isOffline?[]:[De(e.channels,e.groups)]])),Qe.on(He.type,(e,t)=>Xe.with(void 0,[...t.payload.isOffline?[]:[De(e.channels,e.groups)]]));const Ye=new Ee("HEARTBEATING");Ye.onEnter(e=>Re(e.channels,e.groups)),Ye.onExit(()=>Re.cancel),Ye.on(Ge.type,(e,t)=>Je.with({channels:e.channels,groups:e.groups},[Fe(Object.assign({},t.payload))])),Ye.on(Be.type,(e,t)=>Ye.with({channels:[...e.channels,...t.payload.channels.filter(t=>!e.channels.includes(t))],groups:[...e.groups,...t.payload.groups.filter(t=>!e.groups.includes(t))]})),Ye.on(qe.type,(e,t)=>Ye.with({channels:e.channels.filter(e=>!t.payload.channels.includes(e)),groups:e.groups.filter(e=>!t.payload.groups.includes(e))},[De(t.payload.channels,t.payload.groups)])),Ye.on(Ke.type,(e,t)=>Qe.with(Object.assign({},e),[...t.payload.status?[Fe(Object.assign({},t.payload.status))]:[]])),Ye.on(ze.type,(e,t)=>$e.with({channels:e.channels,groups:e.groups},[...t.payload.isOffline?[]:[De(e.channels,e.groups)]])),Ye.on(He.type,(e,t)=>Xe.with(void 0,[...t.payload.isOffline?[]:[De(e.channels,e.groups)]]));const Xe=new Ee("HEARTBEAT_INACTIVE");Xe.on(Be.type,(e,t)=>Ye.with({channels:t.payload.channels,groups:t.payload.groups}));class Ze{get _engine(){return this.engine}constructor(e){this.dependencies=e,this.channels=[],this.groups=[],this.engine=new Pe(e.config.logger()),this.dispatcher=new Ve(this.engine,e),e.config.logger().debug("PresenceEventEngine","Create presence event engine."),this._unsubscribeEngine=this.engine.subscribe(e=>{"invocationDispatched"===e.type&&this.dispatcher.dispatch(e.invocation)}),this.engine.start(Xe,void 0)}join(e){let{channels:t,groups:n}=e;this.channels=[...this.channels,...(null!=t?t:[]).filter(e=>!this.channels.includes(e))],this.groups=[...this.groups,...(null!=n?n:[]).filter(e=>!this.groups.includes(e))],0===this.channels.length&&0===this.groups.length||this.engine.transition(Be(this.channels.slice(0),this.groups.slice(0)))}leave(e){let{channels:t,groups:n}=e;t&&(this.channels=this.channels.filter(e=>!t.includes(e))),n&&(this.groups=this.groups.filter(e=>!n.includes(e))),this.dependencies.presenceState&&(null==t||t.forEach(e=>delete this.dependencies.presenceState[e]),null==n||n.forEach(e=>delete this.dependencies.presenceState[e])),this.engine.transition(qe(null!=t?t:[],null!=n?n:[]))}leaveAll(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dependencies.presenceState&&(this.channels.forEach(e=>delete this.dependencies.presenceState[e]),this.groups.forEach(e=>delete this.dependencies.presenceState[e])),this.channels=[],this.groups=[],this.engine.transition(He(e))}reconnect(){this.engine.transition(Le())}disconnect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.engine.transition(ze(e))}dispose(){this.disconnect(!0),this._unsubscribeEngine(),this.dispatcher.dispose()}}const et=Te("HANDSHAKE",(e,t,n)=>({channels:e,groups:t,onDemand:n})),tt=Te("RECEIVE_MESSAGES",(e,t,n,r)=>({channels:e,groups:t,cursor:n,onDemand:r})),nt=je("EMIT_MESSAGES",(e,t)=>({cursor:e,events:t})),rt=je("EMIT_STATUS",e=>e),st=Ne("SUBSCRIPTION_CHANGED",function(e,t){return{channels:e,groups:t,isOffline:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}),it=Ne("SUBSCRIPTION_RESTORED",(e,t,n,r)=>({channels:e,groups:t,cursor:{timetoken:n,region:null!=r?r:0}})),at=Ne("HANDSHAKE_SUCCESS",e=>e),ot=Ne("HANDSHAKE_FAILURE",e=>e),lt=Ne("RECEIVE_SUCCESS",(e,t)=>({cursor:e,events:t})),ct=Ne("RECEIVE_FAILURE",e=>e),ut=Ne("DISCONNECT",function(){return{isOffline:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}),dt=Ne("RECONNECT",(e,t)=>({cursor:{timetoken:null!=e?e:"",region:null!=t?t:0}})),ht=Ne("UNSUBSCRIBE_ALL",()=>({})),pt=new Ee("UNSUBSCRIBED");pt.on(st.type,(e,t)=>{let{payload:n}=t;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):mt.with({channels:n.channels,groups:n.groups,onDemand:!0})}),pt.on(it.type,(e,t)=>{let{payload:n}=t;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):mt.with({channels:n.channels,groups:n.groups,cursor:{timetoken:"".concat(n.cursor.timetoken),region:n.cursor.region},onDemand:!0})});const ft=new Ee("HANDSHAKE_STOPPED");ft.on(st.type,(e,t)=>{let{payload:n}=t;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):ft.with({channels:n.channels,groups:n.groups,cursor:e.cursor})}),ft.on(dt.type,(e,t)=>{let{payload:n}=t;return mt.with(Object.assign(Object.assign({},e),{cursor:n.cursor||e.cursor,onDemand:!0}))}),ft.on(it.type,(e,t)=>{let{payload:n}=t;var r;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):ft.with({channels:n.channels,groups:n.groups,cursor:{timetoken:"".concat(n.cursor.timetoken),region:n.cursor.region||(null===(r=e.cursor)||void 0===r?void 0:r.region)||0}})}),ft.on(ht.type,e=>pt.with());const gt=new Ee("HANDSHAKE_FAILED");gt.on(st.type,(e,t)=>{let{payload:n}=t;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):mt.with({channels:n.channels,groups:n.groups,cursor:e.cursor,onDemand:!0})}),gt.on(dt.type,(e,t)=>{let{payload:n}=t;return mt.with(Object.assign(Object.assign({},e),{cursor:n.cursor||e.cursor,onDemand:!0}))}),gt.on(it.type,(e,t)=>{let{payload:n}=t;var r,s;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):mt.with({channels:n.channels,groups:n.groups,cursor:{timetoken:"".concat(n.cursor.timetoken),region:n.cursor.region?n.cursor.region:null!==(s=null===(r=null==e?void 0:e.cursor)||void 0===r?void 0:r.region)&&void 0!==s?s:0},onDemand:!0})}),gt.on(ht.type,e=>pt.with());const mt=new Ee("HANDSHAKING");mt.onEnter(e=>{var t;return et(e.channels,e.groups,null!==(t=e.onDemand)&&void 0!==t&&t)}),mt.onExit(()=>et.cancel),mt.on(st.type,(e,t)=>{let{payload:n}=t;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):mt.with({channels:n.channels,groups:n.groups,cursor:e.cursor,onDemand:!0})}),mt.on(at.type,(e,t)=>{let{payload:n}=t;var r,s,i,a,o;return vt.with({channels:e.channels,groups:e.groups,cursor:{timetoken:(null===(r=e.cursor)||void 0===r?void 0:r.timetoken)?null===(s=e.cursor)||void 0===s?void 0:s.timetoken:n.timetoken,region:n.region},referenceTimetoken:G(n.timetoken,null===(i=e.cursor)||void 0===i?void 0:i.timetoken)},[rt({category:h.PNConnectedCategory,affectedChannels:e.channels.slice(0),affectedChannelGroups:e.groups.slice(0),currentTimetoken:(null===(a=e.cursor)||void 0===a?void 0:a.timetoken)?null===(o=e.cursor)||void 0===o?void 0:o.timetoken:n.timetoken})])}),mt.on(ot.type,(e,t)=>{var n;return gt.with(Object.assign(Object.assign({},e),{reason:t.payload}),[rt({category:h.PNConnectionErrorCategory,error:null===(n=t.payload.status)||void 0===n?void 0:n.category})])}),mt.on(ut.type,(e,t)=>{var n;if(t.payload.isOffline){const t=M.create(new Error("Network connection error")).toPubNubError(I.PNSubscribeOperation);return gt.with(Object.assign(Object.assign({},e),{reason:t}),[rt({category:h.PNConnectionErrorCategory,error:null===(n=t.status)||void 0===n?void 0:n.category})])}return ft.with(Object.assign({},e))}),mt.on(it.type,(e,t)=>{let{payload:n}=t;var r;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):mt.with({channels:n.channels,groups:n.groups,cursor:{timetoken:"".concat(n.cursor.timetoken),region:n.cursor.region||(null===(r=null==e?void 0:e.cursor)||void 0===r?void 0:r.region)||0},onDemand:!0})}),mt.on(ht.type,e=>pt.with());const bt=new Ee("RECEIVE_STOPPED");bt.on(st.type,(e,t)=>{let{payload:n}=t;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):bt.with({channels:n.channels,groups:n.groups,cursor:e.cursor})}),bt.on(it.type,(e,t)=>{let{payload:n}=t;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):bt.with({channels:n.channels,groups:n.groups,cursor:{timetoken:"".concat(n.cursor.timetoken),region:n.cursor.region||e.cursor.region}})}),bt.on(dt.type,(e,t)=>{let{payload:n}=t;var r;return mt.with({channels:e.channels,groups:e.groups,cursor:{timetoken:n.cursor.timetoken?null===(r=n.cursor)||void 0===r?void 0:r.timetoken:e.cursor.timetoken,region:n.cursor.region||e.cursor.region},onDemand:!0})}),bt.on(ht.type,()=>pt.with(void 0));const yt=new Ee("RECEIVE_FAILED");yt.on(dt.type,(e,t)=>{let{payload:n}=t;var r;return mt.with({channels:e.channels,groups:e.groups,cursor:{timetoken:n.cursor.timetoken?null===(r=n.cursor)||void 0===r?void 0:r.timetoken:e.cursor.timetoken,region:n.cursor.region||e.cursor.region},onDemand:!0})}),yt.on(st.type,(e,t)=>{let{payload:n}=t;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):mt.with({channels:n.channels,groups:n.groups,cursor:e.cursor,onDemand:!0})}),yt.on(it.type,(e,t)=>{let{payload:n}=t;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0):mt.with({channels:n.channels,groups:n.groups,cursor:{timetoken:"".concat(n.cursor.timetoken),region:n.cursor.region||e.cursor.region},onDemand:!0})}),yt.on(ht.type,e=>pt.with(void 0));const vt=new Ee("RECEIVING");vt.onEnter(e=>{var t;return tt(e.channels,e.groups,e.cursor,null!==(t=e.onDemand)&&void 0!==t&&t)}),vt.onExit(()=>tt.cancel),vt.on(lt.type,(e,t)=>{let{payload:n}=t;return vt.with({channels:e.channels,groups:e.groups,cursor:n.cursor,referenceTimetoken:G(n.cursor.timetoken)},[nt(e.cursor,n.events)])}),vt.on(st.type,(e,t)=>{let{payload:n}=t;var r;if(0===n.channels.length&&0===n.groups.length){let e;return n.isOffline&&(e=null===(r=M.create(new Error("Network connection error")).toPubNubError(I.PNSubscribeOperation).status)||void 0===r?void 0:r.category),pt.with(void 0,[rt(Object.assign({category:n.isOffline?h.PNDisconnectedUnexpectedlyCategory:h.PNDisconnectedCategory},e?{error:e}:{}))])}return vt.with({channels:n.channels,groups:n.groups,cursor:e.cursor,referenceTimetoken:e.referenceTimetoken,onDemand:!0},[rt({category:h.PNSubscriptionChangedCategory,affectedChannels:n.channels.slice(0),affectedChannelGroups:n.groups.slice(0),currentTimetoken:e.cursor.timetoken})])}),vt.on(it.type,(e,t)=>{let{payload:n}=t;return 0===n.channels.length&&0===n.groups.length?pt.with(void 0,[rt({category:h.PNDisconnectedCategory})]):vt.with({channels:n.channels,groups:n.groups,cursor:{timetoken:"".concat(n.cursor.timetoken),region:n.cursor.region||e.cursor.region},referenceTimetoken:G(e.cursor.timetoken,"".concat(n.cursor.timetoken),e.referenceTimetoken),onDemand:!0},[rt({category:h.PNSubscriptionChangedCategory,affectedChannels:n.channels.slice(0),affectedChannelGroups:n.groups.slice(0),currentTimetoken:n.cursor.timetoken})])}),vt.on(ct.type,(e,t)=>{let{payload:n}=t;var r;return yt.with(Object.assign(Object.assign({},e),{reason:n}),[rt({category:h.PNDisconnectedUnexpectedlyCategory,error:null===(r=n.status)||void 0===r?void 0:r.category})])}),vt.on(ut.type,(e,t)=>{var n;if(t.payload.isOffline){const t=M.create(new Error("Network connection error")).toPubNubError(I.PNSubscribeOperation);return yt.with(Object.assign(Object.assign({},e),{reason:t}),[rt({category:h.PNDisconnectedUnexpectedlyCategory,error:null===(n=t.status)||void 0===n?void 0:n.category})])}return bt.with(Object.assign({},e),[rt({category:h.PNDisconnectedCategory})])}),vt.on(ht.type,e=>pt.with(void 0,[rt({category:h.PNDisconnectedCategory})]));class kt extends Oe{constructor(e,t){super(t,t.config.logger()),this.on(et.type,Ae((t,n,r)=>o(this,[t,n,r],void 0,function(t,n,r){let{handshake:s,presenceState:i,config:a}=r;return function*(){n.throwIfAborted();try{const r=yield s(Object.assign(Object.assign({abortSignal:n,channels:t.channels,channelGroups:t.groups,filterExpression:a.filterExpression},a.maintainPresenceState&&{state:i}),{onDemand:t.onDemand}));return e.transition(at(r))}catch(t){if(t instanceof p){if(t.status&&t.status.category==h.PNCancelledCategory)return;return e.transition(ot(t))}}}()}))),this.on(tt.type,Ae((t,n,r)=>o(this,[t,n,r],void 0,function(t,n,r){let{receiveMessages:s,config:i}=r;return function*(){n.throwIfAborted();try{const r=yield s({abortSignal:n,channels:t.channels,channelGroups:t.groups,timetoken:t.cursor.timetoken,region:t.cursor.region,filterExpression:i.filterExpression,onDemand:t.onDemand});e.transition(lt(r.cursor,r.messages))}catch(t){if(t instanceof p){if(t.status&&t.status.category==h.PNCancelledCategory)return;if(!n.aborted)return e.transition(ct(t))}}}()}))),this.on(nt.type,Ae((e,t,n)=>o(this,[e,t,n],void 0,function(e,t,n){let{cursor:r,events:s}=e,{emitMessages:i}=n;return function*(){s.length>0&&i(r,s)}()}))),this.on(rt.type,Ae((e,t,n)=>o(this,[e,t,n],void 0,function(e,t,n){let{emitStatus:r}=n;return function*(){return r(e)}()})))}}class wt{get _engine(){return this.engine}constructor(e){this.channels=[],this.groups=[],this.dependencies=e,this.engine=new Pe(e.config.logger()),this.dispatcher=new kt(this.engine,e),e.config.logger().debug("EventEngine","Create subscribe event engine."),this._unsubscribeEngine=this.engine.subscribe(e=>{"invocationDispatched"===e.type&&this.dispatcher.dispatch(e.invocation)}),this.engine.start(pt,void 0)}get subscriptionTimetoken(){const e=this.engine.currentState;if(!e)return;let t,n="0";if(e.label===vt.label){const e=this.engine.currentContext;n=e.cursor.timetoken,t=e.referenceTimetoken}return H(n,null!=t?t:"0")}subscribe(e){let{channels:t,channelGroups:n,timetoken:r,withPresence:s}=e;var i;const a=null==t?void 0:t.some(e=>!this.channels.includes(e)),o=null==n?void 0:n.some(e=>!this.groups.includes(e)),l=a||o;if(this.channels=[...this.channels,...null!=t?t:[]],this.groups=[...this.groups,...null!=n?n:[]],s&&(this.channels.map(e=>this.channels.push("".concat(e,"-pnpres"))),this.groups.map(e=>this.groups.push("".concat(e,"-pnpres")))),r)this.engine.transition(it(Array.from(new Set([...this.channels,...null!=t?t:[]])),Array.from(new Set([...this.groups,...null!=n?n:[]])),r));else if(l)this.engine.transition(st(Array.from(new Set([...this.channels,...null!=t?t:[]])),Array.from(new Set([...this.groups,...null!=n?n:[]]))));else{this.dependencies.config.logger().debug("EventEngine","Skipping state transition - all channels/groups already subscribed. Emitting SubscriptionChanged event.");const e=this.engine.currentState,t=this.engine.currentContext;let n="0";(null==e?void 0:e.label)===vt.label&&t&&(n=null===(i=t.cursor)||void 0===i?void 0:i.timetoken),this.dependencies.emitStatus({category:h.PNSubscriptionChangedCategory,affectedChannels:Array.from(new Set(this.channels)),affectedChannelGroups:Array.from(new Set(this.groups)),currentTimetoken:n})}this.dependencies.join&&this.dependencies.join({channels:Array.from(new Set(this.channels.filter(e=>!e.endsWith("-pnpres")))),groups:Array.from(new Set(this.groups.filter(e=>!e.endsWith("-pnpres"))))})}unsubscribe(e){let{channels:t=[],channelGroups:n=[]}=e;const r=z(this.channels,[...t,...t.map(e=>"".concat(e,"-pnpres"))]),s=z(this.groups,[...n,...n.map(e=>"".concat(e,"-pnpres"))]);if(new Set(this.channels).size!==new Set(r).size||new Set(this.groups).size!==new Set(s).size){const e=B(this.channels,t),i=B(this.groups,n);this.dependencies.presenceState&&(null==e||e.forEach(e=>delete this.dependencies.presenceState[e]),null==i||i.forEach(e=>delete this.dependencies.presenceState[e])),this.channels=r,this.groups=s,this.engine.transition(st(Array.from(new Set(this.channels.slice(0))),Array.from(new Set(this.groups.slice(0))))),this.dependencies.leave&&this.dependencies.leave({channels:e.slice(0),groups:i.slice(0)})}}unsubscribeAll(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getSubscribedChannelGroups(),n=this.getSubscribedChannels();this.channels=[],this.groups=[],this.dependencies.presenceState&&Object.keys(this.dependencies.presenceState).forEach(e=>{delete this.dependencies.presenceState[e]}),this.engine.transition(st(this.channels.slice(0),this.groups.slice(0),e)),this.dependencies.leaveAll&&this.dependencies.leaveAll({channels:n,groups:t,isOffline:e})}reconnect(e){let{timetoken:t,region:n}=e;const r=this.getSubscribedChannels(),s=this.getSubscribedChannels();this.engine.transition(dt(t,n)),this.dependencies.presenceReconnect&&this.dependencies.presenceReconnect({channels:s,groups:r})}disconnect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getSubscribedChannels(),n=this.getSubscribedChannels();this.engine.transition(ut(e)),this.dependencies.presenceDisconnect&&this.dependencies.presenceDisconnect({channels:n,groups:t,isOffline:e})}getSubscribedChannels(){return Array.from(new Set(this.channels.slice(0)))}getSubscribedChannelGroups(){return Array.from(new Set(this.groups.slice(0)))}dispose(){this.disconnect(!0),this._unsubscribeEngine(),this.dispatcher.dispose()}}class St extends he{constructor(e){var t;const n=null!==(t=e.sendByPost)&&void 0!==t&&t;super({method:n?oe.POST:oe.GET,compressible:n}),this.parameters=e,this.parameters.sendByPost=n}operation(){return I.PNPublishOperation}validate(){const{message:e,channel:t,keySet:{publishKey:n}}=this.parameters;return t?e?n?void 0:"Missing 'publishKey'":"Missing 'message'":"Missing 'channel'"}parse(e){return o(this,void 0,void 0,function*(){return{timetoken:this.deserializeResponse(e)[2]}})}get path(){const{message:e,channel:t,keySet:n}=this.parameters,r=this.prepareMessagePayload(e);return"/publish/".concat(n.publishKey,"/").concat(n.subscribeKey,"/0/").concat(U(t),"/0").concat(this.parameters.sendByPost?"":"/".concat(U(r)))}get queryParameters(){const{customMessageType:e,meta:t,replicate:n,storeInHistory:r,ttl:s}=this.parameters,i={};return e&&(i.custom_message_type=e),void 0!==r&&(i.store=r?"1":"0"),void 0!==s&&(i.ttl=s),void 0===n||n||(i.norep="true"),t&&"object"==typeof t&&(i.meta=JSON.stringify(t)),i}get headers(){var e;return this.parameters.sendByPost?Object.assign(Object.assign({},null!==(e=super.headers)&&void 0!==e?e:{}),{"Content-Type":"application/json"}):super.headers}get body(){return this.prepareMessagePayload(this.parameters.message)}prepareMessagePayload(e){const{crypto:t}=this.parameters;if(!t)return JSON.stringify(e)||"";const n=t.encrypt(JSON.stringify(e));return JSON.stringify("string"==typeof n?n:d(n))}}class Ct extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNSignalOperation}validate(){const{message:e,channel:t,keySet:{publishKey:n}}=this.parameters;return t?e?n?void 0:"Missing 'publishKey'":"Missing 'message'":"Missing 'channel'"}parse(e){return o(this,void 0,void 0,function*(){return{timetoken:this.deserializeResponse(e)[2]}})}get path(){const{keySet:{publishKey:e,subscribeKey:t},channel:n,message:r}=this.parameters,s=JSON.stringify(r);return"/signal/".concat(e,"/").concat(t,"/0/").concat(U(n),"/0/").concat(U(s))}get queryParameters(){const{customMessageType:e}=this.parameters,t={};return e&&(t.custom_message_type=e),t}}class Et extends pe{operation(){return I.PNReceiveMessagesOperation}validate(){return super.validate()||(this.parameters.timetoken?this.parameters.region?void 0:"region can not be empty":"timetoken can not be empty")}get path(){const{keySet:{subscribeKey:e},channels:t=[]}=this.parameters;return"/v2/subscribe/".concat(e,"/").concat(L(t.sort(),","),"/0")}get queryParameters(){const{channelGroups:e,filterExpression:t,timetoken:n,region:r,onDemand:s}=this.parameters,i={ee:""};return s&&(i["on-demand"]=1),e&&e.length>0&&(i["channel-group"]=e.sort().join(",")),t&&t.length>0&&(i["filter-expr"]=t),"string"==typeof n?n&&"0"!==n&&n.length>0&&(i.tt=n):n&&n>0&&(i.tt=n),r&&(i.tr=r),i}}class Pt extends pe{operation(){return I.PNHandshakeOperation}get path(){const{keySet:{subscribeKey:e},channels:t=[]}=this.parameters;return"/v2/subscribe/".concat(e,"/").concat(L(t.sort(),","),"/0")}get queryParameters(){const{channelGroups:e,filterExpression:t,state:n,onDemand:r}=this.parameters,s={ee:""};return r&&(s["on-demand"]=1),e&&e.length>0&&(s["channel-group"]=e.sort().join(",")),t&&t.length>0&&(s["filter-expr"]=t),n&&Object.keys(n).length>0&&(s.state=JSON.stringify(n)),s}}var Ot,Nt;!function(e){e[e.Channel=0]="Channel",e[e.ChannelGroup=1]="ChannelGroup"}(Ot||(Ot={}));class jt{constructor(e){let{channels:t,channelGroups:n}=e;this.isEmpty=!0,this._channelGroups=new Set((null!=n?n:[]).filter(e=>e.length>0)),this._channels=new Set((null!=t?t:[]).filter(e=>e.length>0)),this.isEmpty=0===this._channels.size&&0===this._channelGroups.size}get length(){return this.isEmpty?0:this._channels.size+this._channelGroups.size}get channels(){return this.isEmpty?[]:Array.from(this._channels)}get channelGroups(){return this.isEmpty?[]:Array.from(this._channelGroups)}contains(e){return!this.isEmpty&&(this._channels.has(e)||this._channelGroups.has(e))}with(e){return new jt({channels:[...this._channels,...e._channels],channelGroups:[...this._channelGroups,...e._channelGroups]})}without(e){return new jt({channels:[...this._channels].filter(t=>!e._channels.has(t)),channelGroups:[...this._channelGroups].filter(t=>!e._channelGroups.has(t))})}add(e){return e._channelGroups.size>0&&(this._channelGroups=new Set([...this._channelGroups,...e._channelGroups])),e._channels.size>0&&(this._channels=new Set([...this._channels,...e._channels])),this.isEmpty=0===this._channels.size&&0===this._channelGroups.size,this}remove(e){return e._channelGroups.size>0&&(this._channelGroups=new Set([...this._channelGroups].filter(t=>!e._channelGroups.has(t)))),e._channels.size>0&&(this._channels=new Set([...this._channels].filter(t=>!e._channels.has(t)))),this}removeAll(){return this._channels.clear(),this._channelGroups.clear(),this.isEmpty=!0,this}toString(){return"SubscriptionInput { channels: [".concat(this.channels.join(", "),"], channelGroups: [").concat(this.channelGroups.join(", "),"], is empty: ").concat(this.isEmpty?"true":"false","} }")}}class Tt{constructor(e,t,n,r){this._isSubscribed=!1,this.clones={},this.parents=[],this._id=ne.createUUID(),this.referenceTimetoken=r,this.subscriptionInput=t,this.options=n,this.client=e}get id(){return this._id}get isLastClone(){return 1===Object.keys(this.clones).length}get isSubscribed(){return!!this._isSubscribed||this.parents.length>0&&this.parents.some(e=>e.isSubscribed)}set isSubscribed(e){this.isSubscribed!==e&&(this._isSubscribed=e)}addParentState(e){this.parents.includes(e)||this.parents.push(e)}removeParentState(e){const t=this.parents.indexOf(e);-1!==t&&this.parents.splice(t,1)}storeClone(e,t){this.clones[e]||(this.clones[e]=t)}}class xt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Subscription";this.subscriptionType=t,this.id=ne.createUUID(),this.eventDispatcher=new ge,this._state=e}get state(){return this._state}get channels(){return this.state.subscriptionInput.channels.slice(0)}get channelGroups(){return this.state.subscriptionInput.channelGroups.slice(0)}set onMessage(e){this.eventDispatcher.onMessage=e}set onPresence(e){this.eventDispatcher.onPresence=e}set onSignal(e){this.eventDispatcher.onSignal=e}set onObjects(e){this.eventDispatcher.onObjects=e}set onMessageAction(e){this.eventDispatcher.onMessageAction=e}set onFile(e){this.eventDispatcher.onFile=e}addListener(e){this.eventDispatcher.addListener(e)}removeListener(e){this.eventDispatcher.removeListener(e)}removeAllListeners(){this.eventDispatcher.removeAllListeners()}handleEvent(e,t){var n;if((!this.state.cursor||e>this.state.cursor)&&(this.state.cursor=e),this.state.referenceTimetoken&&t.data.timetoken<this.state.referenceTimetoken)return void this.state.client.logger.trace(this.subscriptionType,()=>({messageType:"text",message:"Event timetoken (".concat(t.data.timetoken,") is older than reference timetoken (").concat(this.state.referenceTimetoken,") for ").concat(this.id," subscription object. Ignoring event.")}));if((null===(n=this.state.options)||void 0===n?void 0:n.filter)&&!this.state.options.filter(t))return void this.state.client.logger.trace(this.subscriptionType,"Event filtered out by filter function for ".concat(this.id," subscription object. Ignoring event."));const r=Object.values(this.state.clones);r.length>0&&this.state.client.logger.trace(this.subscriptionType,"Notify ".concat(this.id," subscription object clones (count: ").concat(r.length,") about received event.")),r.forEach(e=>e.eventDispatcher.handleEvent(t))}dispose(){const e=Object.keys(this.state.clones);e.length>1?(this.state.client.logger.debug(this.subscriptionType,"Remove subscription object clone on dispose: ".concat(this.id)),delete this.state.clones[this.id]):1===e.length&&this.state.clones[this.id]&&(this.state.client.logger.debug(this.subscriptionType,"Unsubscribe subscription object on dispose: ".concat(this.id)),this.unsubscribe())}invalidate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state._isSubscribed=!1,e&&(delete this.state.clones[this.id],0===Object.keys(this.state.clones).length&&(this.state.client.logger.trace(this.subscriptionType,"Last clone removed. Reset shared subscription state."),this.state.subscriptionInput.removeAll(),this.state.parents=[]))}subscribe(e){this.state.isSubscribed?this.state.client.logger.trace(this.subscriptionType,"Already subscribed. Ignoring subscribe request."):(this.state.client.logger.debug(this.subscriptionType,()=>e?{messageType:"object",message:e,details:"Subscribe with parameters:"}:{messageType:"text",message:"Subscribe"}),this.state.isSubscribed=!0,this.updateSubscription({subscribing:!0,timetoken:null==e?void 0:e.timetoken}))}unsubscribe(){if(!this.state._isSubscribed||this.state.isSubscribed){if(!this.state._isSubscribed&&this.state.parents.length>0&&this.state.isSubscribed)return void this.state.client.logger.warn(this.subscriptionType,()=>({messageType:"object",details:"Subscription is subscribed as part of a subscription set. Remove from active sets to unsubscribe:",message:this.state.parents.filter(e=>e.isSubscribed)}));if(!this.state._isSubscribed)return void this.state.client.logger.trace(this.subscriptionType,"Not subscribed. Ignoring unsubscribe request.")}this.state.client.logger.debug(this.subscriptionType,"Unsubscribe"),this.state.isSubscribed=!1,delete this.state.cursor,this.updateSubscription({subscribing:!1})}updateSubscription(e){var t,n;(null==e?void 0:e.timetoken)&&((null===(t=this.state.cursor)||void 0===t?void 0:t.timetoken)&&"0"!==(null===(n=this.state.cursor)||void 0===n?void 0:n.timetoken)?"0"!==e.timetoken&&e.timetoken>this.state.cursor.timetoken&&(this.state.cursor.timetoken=e.timetoken):this.state.cursor={timetoken:e.timetoken});const r=e.subscriptions&&e.subscriptions.length>0?e.subscriptions:void 0;e.subscribing?this.register(Object.assign(Object.assign({},e.timetoken?{cursor:this.state.cursor}:{}),r?{subscriptions:r}:{})):this.unregister(r)}}class _t extends Tt{constructor(e){const t=new jt({});e.subscriptions.forEach(e=>t.add(e.state.subscriptionInput)),super(e.client,t,e.options,e.client.subscriptionTimetoken),this.subscriptions=e.subscriptions}addSubscription(e){this.subscriptions.includes(e)||(e.state.addParentState(this),this.subscriptions.push(e),this.subscriptionInput.add(e.state.subscriptionInput))}removeSubscription(e,t){const n=this.subscriptions.indexOf(e);-1!==n&&(this.subscriptions.splice(n,1),t||e.state.removeParentState(this),this.subscriptionInput.remove(e.state.subscriptionInput))}removeAllSubscriptions(){this.subscriptions.forEach(e=>e.state.removeParentState(this)),this.subscriptions.splice(0,this.subscriptions.length),this.subscriptionInput.removeAll()}}class Mt extends xt{constructor(e){let t;if("client"in e){let n=[];!e.subscriptions&&e.entities?e.entities.forEach(t=>n.push(t.subscription(e.options))):e.subscriptions&&(n=e.subscriptions),t=new _t({client:e.client,subscriptions:n,options:e.options}),n.forEach(e=>e.state.addParentState(t)),t.client.logger.debug("SubscriptionSet",()=>({messageType:"object",details:"Create subscription set with parameters:",message:Object.assign({subscriptions:t.subscriptions},e.options?e.options:{})}))}else t=e.state,t.client.logger.debug("SubscriptionSet","Create subscription set clone");super(t,"SubscriptionSet"),this.state.storeClone(this.id,this),t.subscriptions.forEach(e=>e.addParentSet(this))}get state(){return super.state}get subscriptions(){return this.state.subscriptions.slice(0)}handleEvent(e,t){var n;this.state.subscriptionInput.contains(null!==(n=t.data.subscription)&&void 0!==n?n:t.data.channel)&&(this.state._isSubscribed?(super.handleEvent(e,t),this.state.subscriptions.length>0&&this.state.client.logger.trace(this.subscriptionType,"Notify ".concat(this.id," subscription set subscriptions (count: ").concat(this.state.subscriptions.length,") about received event.")),this.state.subscriptions.forEach(n=>n.handleEvent(e,t))):this.state.client.logger.trace(this.subscriptionType,"Subscription set ".concat(this.id," is not subscribed. Ignoring event.")))}subscriptionInput(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.subscriptionInput;return this.state.subscriptions.forEach(n=>{e&&n.state.entity.subscriptionsCount>0&&(t=t.without(n.state.subscriptionInput))}),t}cloneEmpty(){return new Mt({state:this.state})}dispose(){const e=this.state.isLastClone;this.state.subscriptions.forEach(t=>{t.removeParentSet(this),e&&t.state.removeParentState(this.state)}),super.dispose()}invalidate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e?this.state.subscriptions.slice(0):this.state.subscriptions).forEach(t=>{e&&(t.state.entity.decreaseSubscriptionCount(this.state.id),t.removeParentSet(this)),t.invalidate(e)}),e&&this.state.removeAllSubscriptions(),super.invalidate()}addSubscription(e){this.addSubscriptions([e])}addSubscriptions(e){const t=[],n=[];this.state.client.logger.debug(this.subscriptionType,()=>{const t=[],n=[];return e.forEach(e=>{this.state.subscriptions.includes(e)?t.push(e):n.push(e)}),{messageType:"object",details:"Add subscriptions to ".concat(this.id," (subscriptions count: ").concat(this.state.subscriptions.length+n.length,"):"),message:{addedSubscriptions:n,ignoredSubscriptions:t}}}),e.filter(e=>!this.state.subscriptions.includes(e)).forEach(e=>{e.state.isSubscribed?n.push(e):t.push(e),e.addParentSet(this),this.state.addSubscription(e)}),0===n.length&&0===t.length||!this.state.isSubscribed||(n.forEach(e=>{let{state:t}=e;return t.entity.increaseSubscriptionCount(this.state.id)}),t.length>0&&this.updateSubscription({subscribing:!0,subscriptions:t}))}removeSubscription(e){this.removeSubscriptions([e])}removeSubscriptions(e){const t=[];this.state.client.logger.debug(this.subscriptionType,()=>{const t=[],n=[];return e.forEach(e=>{this.state.subscriptions.includes(e)?n.push(e):t.push(e)}),{messageType:"object",details:"Remove subscriptions from ".concat(this.id," (subscriptions count: ").concat(this.state.subscriptions.length,"):"),message:{removedSubscriptions:n,ignoredSubscriptions:t}}}),e.filter(e=>this.state.subscriptions.includes(e)).forEach(e=>{e.state.isSubscribed&&t.push(e),e.removeParentSet(this),this.state.removeSubscription(e,e.parentSetsCount>1)}),0!==t.length&&this.state.isSubscribed&&this.updateSubscription({subscribing:!1,subscriptions:t})}addSubscriptionSet(e){this.addSubscriptions(e.subscriptions)}removeSubscriptionSet(e){this.removeSubscriptions(e.subscriptions)}register(e){var t;const n=null!==(t=e.subscriptions)&&void 0!==t?t:this.state.subscriptions;n.forEach(e=>{let{state:t}=e;return t.entity.increaseSubscriptionCount(this.state.id)}),this.state.client.logger.trace(this.subscriptionType,()=>({messageType:"text",message:"Register subscription for real-time events: ".concat(this)})),this.state.client.registerEventHandleCapable(this,e.cursor,n)}unregister(e){const t=null!=e?e:this.state.subscriptions;t.forEach(e=>{let{state:t}=e;return t.entity.decreaseSubscriptionCount(this.state.id)}),this.state.client.logger.trace(this.subscriptionType,()=>e?{messageType:"object",message:{subscription:this,subscriptions:e},details:"Unregister subscriptions of subscription set from real-time events:"}:{messageType:"text",message:"Unregister subscription from real-time events: ".concat(this)}),this.state.client.unregisterEventHandleCapable(this,t)}toString(){const e=this.state;return"".concat(this.subscriptionType," { id: ").concat(this.id,", stateId: ").concat(e.id,", clonesCount: ").concat(Object.keys(this.state.clones).length,", isSubscribed: ").concat(e.isSubscribed,", subscriptions: [").concat(e.subscriptions.map(e=>e.toString()).join(", "),"] }")}}class It extends Tt{constructor(e){var t,n;const r=e.entity.subscriptionNames(null!==(n=null===(t=e.options)||void 0===t?void 0:t.receivePresenceEvents)&&void 0!==n&&n),s=new jt({[e.entity.subscriptionType==Ot.Channel?"channels":"channelGroups"]:r});super(e.client,s,e.options,e.client.subscriptionTimetoken),this.entity=e.entity}}class At extends xt{constructor(e){"client"in e?e.client.logger.debug("Subscription",()=>({messageType:"object",details:"Create subscription with parameters:",message:Object.assign({entity:e.entity},e.options?e.options:{})})):e.state.client.logger.debug("Subscription","Create subscription clone"),super("state"in e?e.state:new It(e)),this.parents=[],this.handledUpdates=[],this.state.storeClone(this.id,this)}get state(){return super.state}get parentSetsCount(){return this.parents.length}handleEvent(e,t){var n,r;if(this.state.isSubscribed&&this.state.subscriptionInput.contains(null!==(n=t.data.subscription)&&void 0!==n?n:t.data.channel)){if(this.parentSetsCount>0){const e=W(t.data);if(this.handledUpdates.includes(e))return void this.state.client.logger.trace(this.subscriptionType,"Event (".concat(e,") already handled by ").concat(this.id,". Ignoring."));this.handledUpdates.push(e),this.handledUpdates.length>10&&this.handledUpdates.shift()}this.state.subscriptionInput.contains(null!==(r=t.data.subscription)&&void 0!==r?r:t.data.channel)&&super.handleEvent(e,t)}}subscriptionInput(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.state.entity.subscriptionsCount>0?new jt({}):this.state.subscriptionInput}cloneEmpty(){return new At({state:this.state})}dispose(){this.parentSetsCount>0?this.state.client.logger.debug(this.subscriptionType,()=>({messageType:"text",message:"'".concat(this.state.entity.subscriptionNames(),"' subscription still in use. Ignore dispose request.")})):(this.handledUpdates.splice(0,this.handledUpdates.length),super.dispose())}invalidate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.state.entity.decreaseSubscriptionCount(this.state.id),this.handledUpdates.splice(0,this.handledUpdates.length),super.invalidate(e)}addParentSet(e){this.parents.includes(e)||(this.parents.push(e),this.state.client.logger.trace(this.subscriptionType,"Add parent subscription set for ".concat(this.id,": ").concat(e.id,". Parent subscription set count: ").concat(this.parentSetsCount)))}removeParentSet(e){const t=this.parents.indexOf(e);-1!==t&&(this.parents.splice(t,1),this.state.client.logger.trace(this.subscriptionType,"Remove parent subscription set from ".concat(this.id,": ").concat(e.id,". Parent subscription set count: ").concat(this.parentSetsCount))),0===this.parentSetsCount&&this.handledUpdates.splice(0,this.handledUpdates.length)}addSubscription(e){this.state.client.logger.debug(this.subscriptionType,()=>({messageType:"text",message:"Create set with subscription: ".concat(e)}));const t=new Mt({client:this.state.client,subscriptions:[this,e],options:this.state.options});return this.state.isSubscribed||e.state.isSubscribed?(this.state.client.logger.trace(this.subscriptionType,"Subscribe resulting set because the receiver is already subscribed."),t.subscribe(),t):t}register(e){this.state.entity.increaseSubscriptionCount(this.state.id),this.state.client.logger.trace(this.subscriptionType,()=>({messageType:"text",message:"Register subscription for real-time events: ".concat(this)})),this.state.client.registerEventHandleCapable(this,e.cursor)}unregister(e){this.state.entity.decreaseSubscriptionCount(this.state.id),this.state.client.logger.trace(this.subscriptionType,()=>({messageType:"text",message:"Unregister subscription from real-time events: ".concat(this)})),this.handledUpdates.splice(0,this.handledUpdates.length),this.state.client.unregisterEventHandleCapable(this)}toString(){const e=this.state;return"".concat(this.subscriptionType," { id: ").concat(this.id,", stateId: ").concat(e.id,", entity: ").concat(e.entity.subscriptionNames(!1).pop(),", clonesCount: ").concat(Object.keys(e.clones).length,", isSubscribed: ").concat(e.isSubscribed,", parentSetsCount: ").concat(this.parentSetsCount,", cursor: ").concat(e.cursor?e.cursor.timetoken:"not set",", referenceTimetoken: ").concat(e.referenceTimetoken?e.referenceTimetoken:"not set"," }")}}class Rt extends he{constructor(e){var t,n,r,s;super(),this.parameters=e,null!==(t=(r=this.parameters).channels)&&void 0!==t||(r.channels=[]),null!==(n=(s=this.parameters).channelGroups)&&void 0!==n||(s.channelGroups=[])}operation(){return I.PNGetStateOperation}validate(){const{keySet:{subscribeKey:e},channels:t,channelGroups:n}=this.parameters;if(!e)return"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){const t=this.deserializeResponse(e),{channels:n=[],channelGroups:r=[]}=this.parameters,s={channels:{}};return 1===n.length&&0===r.length?s.channels[n[0]]=t.payload:s.channels=t.payload,s})}get path(){const{keySet:{subscribeKey:e},uuid:t,channels:n}=this.parameters;return"/v2/presence/sub-key/".concat(e,"/channel/").concat(L(null!=n?n:[],","),"/uuid/").concat(U(null!=t?t:""))}get queryParameters(){const{channelGroups:e}=this.parameters;return e&&0!==e.length?{"channel-group":e.join(",")}:{}}}class Dt extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNSetStateOperation}validate(){const{keySet:{subscribeKey:e},state:t,channels:n=[],channelGroups:r=[]}=this.parameters;return e?void 0===t?"Missing State":0===(null==n?void 0:n.length)&&0===(null==r?void 0:r.length)?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){return{state:this.deserializeResponse(e).payload}})}get path(){const{keySet:{subscribeKey:e},uuid:t,channels:n}=this.parameters;return"/v2/presence/sub-key/".concat(e,"/channel/").concat(L(null!=n?n:[],","),"/uuid/").concat(U(t),"/data")}get queryParameters(){const{channelGroups:e,state:t}=this.parameters,n={state:JSON.stringify(t)};return e&&0!==e.length&&(n["channel-group"]=e.join(",")),n}}class Ft extends he{constructor(e){super({cancellable:!0}),this.parameters=e}operation(){return I.PNHeartbeatOperation}validate(){const{keySet:{subscribeKey:e},channels:t=[],channelGroups:n=[]}=this.parameters;return e?0===t.length&&0===n.length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key"}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>({}))})}get path(){const{keySet:{subscribeKey:e},channels:t}=this.parameters;return"/v2/presence/sub-key/".concat(e,"/channel/").concat(L(null!=t?t:[],","),"/heartbeat")}get queryParameters(){const{channelGroups:e,state:t,heartbeat:n}=this.parameters,r={heartbeat:"".concat(n)};return e&&0!==e.length&&(r["channel-group"]=e.join(",")),void 0!==t&&(r.state=JSON.stringify(t)),r}}class Ut extends he{constructor(e){super(),this.parameters=e,this.parameters.channelGroups&&(this.parameters.channelGroups=Array.from(new Set(this.parameters.channelGroups))),this.parameters.channels&&(this.parameters.channels=Array.from(new Set(this.parameters.channels)))}operation(){return I.PNUnsubscribeOperation}validate(){const{keySet:{subscribeKey:e},channels:t=[],channelGroups:n=[]}=this.parameters;return e?0===t.length&&0===n.length?"At least one `channel` or `channel group` should be provided.":void 0:"Missing Subscribe Key"}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>({}))})}get path(){var e;const{keySet:{subscribeKey:t},channels:n}=this.parameters;return"/v2/presence/sub-key/".concat(t,"/channel/").concat(L(null!==(e=null==n?void 0:n.sort())&&void 0!==e?e:[],","),"/leave")}get queryParameters(){const{channelGroups:e}=this.parameters;return e&&0!==e.length?{"channel-group":e.sort().join(",")}:{}}}class Lt extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNWhereNowOperation}validate(){if(!this.parameters.keySet.subscribeKey)return"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){const t=this.deserializeResponse(e);return t.payload?{channels:t.payload.channels}:{channels:[]}})}get path(){const{keySet:{subscribeKey:e},uuid:t}=this.parameters;return"/v2/presence/sub-key/".concat(e,"/uuid/").concat(U(t))}}class zt extends he{constructor(e){var t,n,r,s,i,a,o,l;super(),this.parameters=e,null!==(t=(i=this.parameters).queryParameters)&&void 0!==t||(i.queryParameters={}),null!==(n=(a=this.parameters).includeUUIDs)&&void 0!==n||(a.includeUUIDs=!0),null!==(r=(o=this.parameters).includeState)&&void 0!==r||(o.includeState=!1),null!==(s=(l=this.parameters).limit)&&void 0!==s||(l.limit=1e3)}operation(){const{channels:e=[],channelGroups:t=[]}=this.parameters;return 0===e.length&&0===t.length?I.PNGlobalHereNowOperation:I.PNHereNowOperation}validate(){if(!this.parameters.keySet.subscribeKey)return"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){var t,n;const r=this.deserializeResponse(e),s="occupancy"in r?1:r.payload.total_channels,i="occupancy"in r?r.occupancy:r.payload.total_occupancy,a={};let o={};const l=this.parameters.limit;let c=!1;if("occupancy"in r){const e=this.parameters.channels[0];o[e]={uuids:null!==(t=r.uuids)&&void 0!==t?t:[],occupancy:i}}else o=null!==(n=r.payload.channels)&&void 0!==n?n:{};return Object.keys(o).forEach(e=>{const t=o[e];a[e]={occupants:this.parameters.includeUUIDs?t.uuids.map(e=>"string"==typeof e?{uuid:e,state:null}:e):[],name:e,occupancy:t.occupancy},c||t.occupancy!==l||(c=!0)}),{totalChannels:s,totalOccupancy:i,channels:a}})}get path(){const{keySet:{subscribeKey:e},channels:t,channelGroups:n}=this.parameters;let r="/v2/presence/sub-key/".concat(e);return(t&&t.length>0||n&&n.length>0)&&(r+="/channel/".concat(L(null!=t?t:[],","))),r}get queryParameters(){const{channelGroups:e,includeUUIDs:t,includeState:n,limit:r,offset:s,queryParameters:i}=this.parameters;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.operation()===I.PNHereNowOperation?{limit:r}:{}),this.operation()===I.PNHereNowOperation&&null!=s&&s?{offset:s}:{}),t?{}:{disable_uuids:"1"}),null!=n&&n?{state:"1"}:{}),e&&e.length>0?{"channel-group":e.join(",")}:{}),i)}}class Bt extends he{constructor(e){super({method:oe.DELETE}),this.parameters=e}operation(){return I.PNDeleteMessagesOperation}validate(){return this.parameters.keySet.subscribeKey?this.parameters.channel?void 0:"Missing channel":"Missing Subscribe Key"}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>({}))})}get path(){const{keySet:{subscribeKey:e},channel:t}=this.parameters;return"/v3/history/sub-key/".concat(e,"/channel/").concat(U(t))}get queryParameters(){const{start:e,end:t}=this.parameters;return Object.assign(Object.assign({},e?{start:e}:{}),t?{end:t}:{})}}class qt extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNMessageCounts}validate(){const{keySet:{subscribeKey:e},channels:t,timetoken:n,channelTimetokens:r}=this.parameters;return e?t?n&&r?"`timetoken` and `channelTimetokens` are incompatible together":n||r?r&&r.length>1&&r.length!==t.length?"Length of `channelTimetokens` and `channels` do not match":void 0:"`timetoken` or `channelTimetokens` need to be set":"Missing channels":"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){return{channels:this.deserializeResponse(e).channels}})}get path(){return"/v3/history/sub-key/".concat(this.parameters.keySet.subscribeKey,"/message-counts/").concat(L(this.parameters.channels))}get queryParameters(){let{channelTimetokens:e}=this.parameters;return this.parameters.timetoken&&(e=[this.parameters.timetoken]),Object.assign(Object.assign({},1===e.length?{timetoken:e[0]}:{}),e.length>1?{channelsTimetoken:e.join(",")}:{})}}class Ht extends he{constructor(e){var t,n,r;super(),this.parameters=e,e.count?e.count=Math.min(e.count,100):e.count=100,null!==(t=e.stringifiedTimeToken)&&void 0!==t||(e.stringifiedTimeToken=!1),null!==(n=e.includeMeta)&&void 0!==n||(e.includeMeta=!1),null!==(r=e.logVerbosity)&&void 0!==r||(e.logVerbosity=!1)}operation(){return I.PNHistoryOperation}validate(){return this.parameters.keySet.subscribeKey?this.parameters.channel?void 0:"Missing channel":"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){const t=this.deserializeResponse(e),n=t[0],r=t[1],s=t[2];return Array.isArray(n)?{messages:n.map(e=>{const t=this.processPayload(e.message),n={entry:t.payload,timetoken:e.timetoken};return t.error&&(n.error=t.error),e.meta&&(n.meta=e.meta),n}),startTimeToken:r,endTimeToken:s}:{messages:[],startTimeToken:r,endTimeToken:s}})}get path(){const{keySet:{subscribeKey:e},channel:t}=this.parameters;return"/v2/history/sub-key/".concat(e,"/channel/").concat(U(t))}get queryParameters(){const{start:e,end:t,reverse:n,count:r,stringifiedTimeToken:s,includeMeta:i}=this.parameters;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({count:r,include_token:"true"},e?{start:e}:{}),t?{end:t}:{}),s?{string_message_token:"true"}:{}),null!=n?{reverse:n.toString()}:{}),i?{include_meta:"true"}:{})}processPayload(e){const{crypto:t,logVerbosity:n}=this.parameters;if(!t||"string"!=typeof e)return{payload:e};let r,s;try{const n=t.decrypt(e);r=n instanceof ArrayBuffer?JSON.parse(Ht.decoder.decode(n)):n}catch(t){n&&console.log("decryption error",t.message),r=e,s="Error while decrypting message content: ".concat(t.message)}return{payload:r,error:s}}}!function(e){e[e.Message=-1]="Message",e[e.Files=4]="Files"}(Nt||(Nt={}));class Gt extends he{constructor(e){var t,n,r,s,i;super(),this.parameters=e;const a=null!==(t=e.includeMessageActions)&&void 0!==t&&t,o=e.channels.length>1||a?25:100;e.count?e.count=Math.min(e.count,o):e.count=o,e.includeUuid?e.includeUUID=e.includeUuid:null!==(n=e.includeUUID)&&void 0!==n||(e.includeUUID=!0),null!==(r=e.stringifiedTimeToken)&&void 0!==r||(e.stringifiedTimeToken=!1),null!==(s=e.includeMessageType)&&void 0!==s||(e.includeMessageType=!0),null!==(i=e.logVerbosity)&&void 0!==i||(e.logVerbosity=!1)}operation(){return I.PNFetchMessagesOperation}validate(){const{keySet:{subscribeKey:e},channels:t,includeMessageActions:n}=this.parameters;return e?t?void 0!==n&&n&&t.length>1?"History can return actions data for a single channel only. Either pass a single channel or disable the includeMessageActions flag.":void 0:"Missing channels":"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){var t;const n=this.deserializeResponse(e),r=null!==(t=n.channels)&&void 0!==t?t:{},s={};return Object.keys(r).forEach(e=>{s[e]=r[e].map(t=>{null===t.message_type&&(t.message_type=Nt.Message);const n=this.processPayload(e,t),r=Object.assign(Object.assign({channel:e,timetoken:t.timetoken,message:n.payload,messageType:t.message_type},t.custom_message_type?{customMessageType:t.custom_message_type}:{}),{uuid:t.uuid});if(t.actions){const e=r;e.actions=t.actions,e.data=t.actions}return t.meta&&(r.meta=t.meta),n.error&&(r.error=n.error),r})}),n.more?{channels:s,more:n.more}:{channels:s}})}get path(){const{keySet:{subscribeKey:e},channels:t,includeMessageActions:n}=this.parameters;return"/v3/".concat(n?"history-with-actions":"history","/sub-key/").concat(e,"/channel/").concat(L(t))}get queryParameters(){const{start:e,end:t,count:n,includeCustomMessageType:r,includeMessageType:s,includeMeta:i,includeUUID:a,stringifiedTimeToken:o}=this.parameters;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({max:n},e?{start:e}:{}),t?{end:t}:{}),o?{string_message_token:"true"}:{}),void 0!==i&&i?{include_meta:"true"}:{}),a?{include_uuid:"true"}:{}),null!=r?{include_custom_message_type:r?"true":"false"}:{}),s?{include_message_type:"true"}:{})}processPayload(e,t){const{crypto:n,logVerbosity:r}=this.parameters;if(!n||"string"!=typeof t.message)return{payload:t.message};let s,i;try{const e=n.decrypt(t.message);s=e instanceof ArrayBuffer?JSON.parse(Gt.decoder.decode(e)):e}catch(e){r&&console.log("decryption error",e.message),s=t.message,i="Error while decrypting message content: ".concat(e.message)}if(!i&&s&&t.message_type==Nt.Files&&"object"==typeof s&&this.isFileMessage(s)){const t=s;return{payload:{message:t.message,file:Object.assign(Object.assign({},t.file),{url:this.parameters.getFileUrl({channel:e,id:t.file.id,name:t.file.name})})},error:i}}return{payload:s,error:i}}isFileMessage(e){return void 0!==e.file}}class Kt extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNGetMessageActionsOperation}validate(){return this.parameters.keySet.subscribeKey?this.parameters.channel?void 0:"Missing message channel":"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){const t=this.deserializeResponse(e);let n=null,r=null;return t.data.length>0&&(n=t.data[0].actionTimetoken,r=t.data[t.data.length-1].actionTimetoken),{data:t.data,more:t.more,start:n,end:r}})}get path(){const{keySet:{subscribeKey:e},channel:t}=this.parameters;return"/v1/message-actions/".concat(e,"/channel/").concat(U(t))}get queryParameters(){const{limit:e,start:t,end:n}=this.parameters;return Object.assign(Object.assign(Object.assign({},t?{start:t}:{}),n?{end:n}:{}),e?{limit:e}:{})}}class Wt extends he{constructor(e){super({method:oe.POST}),this.parameters=e}operation(){return I.PNAddMessageActionOperation}validate(){const{keySet:{subscribeKey:e},action:t,channel:n,messageTimetoken:r}=this.parameters;return e?n?r?t?t.value?t.type?t.type.length>15?"Action.type value exceed maximum length of 15":void 0:"Missing Action.type":"Missing Action.value":"Missing Action":"Missing message timetoken":"Missing message channel":"Missing Subscribe Key"}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>{let{data:t}=e;return{data:t}})})}get path(){const{keySet:{subscribeKey:e},channel:t,messageTimetoken:n}=this.parameters;return"/v1/message-actions/".concat(e,"/channel/").concat(U(t),"/message/").concat(n)}get headers(){var e;return Object.assign(Object.assign({},null!==(e=super.headers)&&void 0!==e?e:{}),{"Content-Type":"application/json"})}get body(){return JSON.stringify(this.parameters.action)}}class Vt extends he{constructor(e){super({method:oe.DELETE}),this.parameters=e}operation(){return I.PNRemoveMessageActionOperation}validate(){const{keySet:{subscribeKey:e},channel:t,messageTimetoken:n,actionTimetoken:r}=this.parameters;return e?t?n?r?void 0:"Missing action timetoken":"Missing message timetoken":"Missing message action channel":"Missing Subscribe Key"}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>{let{data:t}=e;return{data:t}})})}get path(){const{keySet:{subscribeKey:e},channel:t,actionTimetoken:n,messageTimetoken:r}=this.parameters;return"/v1/message-actions/".concat(e,"/channel/").concat(U(t),"/message/").concat(r,"/action/").concat(n)}}class $t extends he{constructor(e){var t,n;super(),this.parameters=e,null!==(t=(n=this.parameters).storeInHistory)&&void 0!==t||(n.storeInHistory=!0)}operation(){return I.PNPublishFileMessageOperation}validate(){const{channel:e,fileId:t,fileName:n}=this.parameters;return e?t?n?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"}parse(e){return o(this,void 0,void 0,function*(){return{timetoken:this.deserializeResponse(e)[2]}})}get path(){const{message:e,channel:t,keySet:{publishKey:n,subscribeKey:r},fileId:s,fileName:i}=this.parameters,a=Object.assign({file:{name:i,id:s}},e?{message:e}:{});return"/v1/files/publish-file/".concat(n,"/").concat(r,"/0/").concat(U(t),"/0/").concat(U(this.prepareMessagePayload(a)))}get queryParameters(){const{customMessageType:e,storeInHistory:t,ttl:n,meta:r}=this.parameters;return Object.assign(Object.assign(Object.assign({store:t?"1":"0"},e?{custom_message_type:e}:{}),n?{ttl:n}:{}),r&&"object"==typeof r?{meta:JSON.stringify(r)}:{})}prepareMessagePayload(e){const{crypto:t}=this.parameters;if(!t)return JSON.stringify(e)||"";const n=t.encrypt(JSON.stringify(e));return JSON.stringify("string"==typeof n?n:d(n))}}class Jt extends he{constructor(e){super({method:oe.LOCAL}),this.parameters=e}operation(){return I.PNGetFileUrlOperation}validate(){const{channel:e,id:t,name:n}=this.parameters;return e?t?n?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"}parse(e){return o(this,void 0,void 0,function*(){return e.url})}get path(){const{channel:e,id:t,name:n,keySet:{subscribeKey:r}}=this.parameters;return"/v1/files/".concat(r,"/channels/").concat(U(e),"/files/").concat(t,"/").concat(n)}}class Qt extends he{constructor(e){super({method:oe.DELETE}),this.parameters=e}operation(){return I.PNDeleteFileOperation}validate(){const{channel:e,id:t,name:n}=this.parameters;return e?t?n?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"}get path(){const{keySet:{subscribeKey:e},id:t,channel:n,name:r}=this.parameters;return"/v1/files/".concat(e,"/channels/").concat(U(n),"/files/").concat(t,"/").concat(r)}}class Yt extends he{constructor(e){var t,n;super(),this.parameters=e,null!==(t=(n=this.parameters).limit)&&void 0!==t||(n.limit=100)}operation(){return I.PNListFilesOperation}validate(){if(!this.parameters.channel)return"channel can't be empty"}get path(){const{keySet:{subscribeKey:e},channel:t}=this.parameters;return"/v1/files/".concat(e,"/channels/").concat(U(t),"/files")}get queryParameters(){const{limit:e,next:t}=this.parameters;return Object.assign({limit:e},t?{next:t}:{})}}class Xt extends he{constructor(e){super({method:oe.POST}),this.parameters=e}operation(){return I.PNGenerateUploadUrlOperation}validate(){return this.parameters.channel?this.parameters.name?void 0:"'name' can't be empty":"channel can't be empty"}parse(e){return o(this,void 0,void 0,function*(){const t=this.deserializeResponse(e);return{id:t.data.id,name:t.data.name,url:t.file_upload_request.url,formFields:t.file_upload_request.form_fields}})}get path(){const{keySet:{subscribeKey:e},channel:t}=this.parameters;return"/v1/files/".concat(e,"/channels/").concat(U(t),"/generate-upload-url")}get headers(){var e;return Object.assign(Object.assign({},null!==(e=super.headers)&&void 0!==e?e:{}),{"Content-Type":"application/json"})}get body(){return JSON.stringify({name:this.parameters.name})}}class Zt extends he{constructor(e){super({method:oe.POST}),this.parameters=e;const t=e.file.mimeType;t&&(e.formFields=e.formFields.map(e=>"Content-Type"===e.name?{name:e.name,value:t}:e))}operation(){return I.PNPublishFileOperation}validate(){const{fileId:e,fileName:t,file:n,uploadUrl:r}=this.parameters;return e?t?n?r?void 0:"Validation failed: file upload 'url' can't be empty":"Validation failed: 'file' can't be empty":"Validation failed: file 'name' can't be empty":"Validation failed: file 'id' can't be empty"}parse(e){return o(this,void 0,void 0,function*(){return{status:e.status,message:e.body?Zt.decoder.decode(e.body):"OK"}})}request(){return Object.assign(Object.assign({},super.request()),{origin:new URL(this.parameters.uploadUrl).origin,timeout:300})}get path(){const{pathname:e,search:t}=new URL(this.parameters.uploadUrl);return"".concat(e).concat(t)}get body(){return this.parameters.file}get formData(){return this.parameters.formFields}}class en{constructor(e){var t;if(this.parameters=e,this.file=null===(t=this.parameters.PubNubFile)||void 0===t?void 0:t.create(e.file),!this.file)throw new Error("File upload error: unable to create File object.")}process(){return o(this,void 0,void 0,function*(){let e,t;return this.generateFileUploadUrl().then(n=>(e=n.name,t=n.id,this.uploadFile(n))).then(e=>{if(204!==e.status)throw new p("Upload to bucket was unsuccessful",{error:!0,statusCode:e.status,category:h.PNUnknownCategory,operation:I.PNPublishFileOperation,errorData:{message:e.message}})}).then(()=>this.publishFileMessage(t,e)).catch(e=>{if(e instanceof p)throw e;const t=e instanceof M?e:M.create(e);throw new p("File upload error.",t.toStatus(I.PNPublishFileOperation))})})}generateFileUploadUrl(){return o(this,void 0,void 0,function*(){const e=new Xt(Object.assign(Object.assign({},this.parameters),{name:this.file.name,keySet:this.parameters.keySet}));return this.parameters.sendRequest(e)})}uploadFile(e){return o(this,void 0,void 0,function*(){const{cipherKey:t,PubNubFile:n,crypto:r,cryptography:s}=this.parameters,{id:i,name:a,url:o,formFields:l}=e;return this.parameters.PubNubFile.supportsEncryptFile&&(!t&&r?this.file=yield r.encryptFile(this.file,n):t&&s&&(this.file=yield s.encryptFile(t,this.file,n))),this.parameters.sendRequest(new Zt({fileId:i,fileName:a,file:this.file,uploadUrl:o,formFields:l}))})}publishFileMessage(e,t){return o(this,void 0,void 0,function*(){var n,r,s,i;let a,o={timetoken:"0"},l=this.parameters.fileUploadPublishRetryLimit,c=!1;do{try{o=yield this.parameters.publishFile(Object.assign(Object.assign({},this.parameters),{fileId:e,fileName:t})),c=!0}catch(e){e instanceof p&&(a=e),l-=1}}while(!c&&l>0);if(c)return{status:200,timetoken:o.timetoken,id:e,name:t};throw new p("Publish failed. You may want to execute that operation manually using pubnub.publishFile",{error:!0,category:null!==(r=null===(n=a.status)||void 0===n?void 0:n.category)&&void 0!==r?r:h.PNUnknownCategory,statusCode:null!==(i=null===(s=a.status)||void 0===s?void 0:s.statusCode)&&void 0!==i?i:0,channel:this.parameters.channel,id:e,name:t})})}}class tn{constructor(e,t){this.subscriptionStateIds=[],this.client=t,this._nameOrId=e}get entityType(){return"Channel"}get subscriptionType(){return Ot.Channel}subscriptionNames(e){return[this._nameOrId,...e&&!this._nameOrId.endsWith("-pnpres")?["".concat(this._nameOrId,"-pnpres")]:[]]}subscription(e){return new At({client:this.client,entity:this,options:e})}get subscriptionsCount(){return this.subscriptionStateIds.length}increaseSubscriptionCount(e){this.subscriptionStateIds.includes(e)||this.subscriptionStateIds.push(e)}decreaseSubscriptionCount(e){{const t=this.subscriptionStateIds.indexOf(e);t>=0&&this.subscriptionStateIds.splice(t,1)}}toString(){return"".concat(this.entityType," { nameOrId: ").concat(this._nameOrId,", subscriptionsCount: ").concat(this.subscriptionsCount," }")}}class nn extends tn{get entityType(){return"ChannelMetadata"}get id(){return this._nameOrId}subscriptionNames(e){return[this.id]}}class rn extends tn{get entityType(){return"ChannelGroups"}get name(){return this._nameOrId}get subscriptionType(){return Ot.ChannelGroup}}class sn extends tn{get entityType(){return"UserMetadata"}get id(){return this._nameOrId}subscriptionNames(e){return[this.id]}}class an extends tn{get entityType(){return"Channel"}get name(){return this._nameOrId}}class on extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNRemoveChannelsFromGroupOperation}validate(){const{keySet:{subscribeKey:e},channels:t,channelGroup:n}=this.parameters;return e?n?t?void 0:"Missing channels":"Missing Channel Group":"Missing Subscribe Key"}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>({}))})}get path(){const{keySet:{subscribeKey:e},channelGroup:t}=this.parameters;return"/v1/channel-registration/sub-key/".concat(e,"/channel-group/").concat(U(t))}get queryParameters(){return{remove:this.parameters.channels.join(",")}}}class ln extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNAddChannelsToGroupOperation}validate(){const{keySet:{subscribeKey:e},channels:t,channelGroup:n}=this.parameters;return e?n?t?void 0:"Missing channels":"Missing Channel Group":"Missing Subscribe Key"}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>({}))})}get path(){const{keySet:{subscribeKey:e},channelGroup:t}=this.parameters;return"/v1/channel-registration/sub-key/".concat(e,"/channel-group/").concat(U(t))}get queryParameters(){return{add:this.parameters.channels.join(",")}}}class cn extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNChannelsForGroupOperation}validate(){return this.parameters.keySet.subscribeKey?this.parameters.channelGroup?void 0:"Missing Channel Group":"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){return{channels:this.deserializeResponse(e).payload.channels}})}get path(){const{keySet:{subscribeKey:e},channelGroup:t}=this.parameters;return"/v1/channel-registration/sub-key/".concat(e,"/channel-group/").concat(U(t))}}class un extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNRemoveGroupOperation}validate(){return this.parameters.keySet.subscribeKey?this.parameters.channelGroup?void 0:"Missing Channel Group":"Missing Subscribe Key"}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>({}))})}get path(){const{keySet:{subscribeKey:e},channelGroup:t}=this.parameters;return"/v1/channel-registration/sub-key/".concat(e,"/channel-group/").concat(U(t),"/remove")}}class dn extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNChannelGroupsOperation}validate(){if(!this.parameters.keySet.subscribeKey)return"Missing Subscribe Key"}parse(e){return o(this,void 0,void 0,function*(){return{groups:this.deserializeResponse(e).payload.groups}})}get path(){return"/v1/channel-registration/sub-key/".concat(this.parameters.keySet.subscribeKey,"/channel-group")}}class hn{constructor(e,t,n){this.sendRequest=n,this.logger=e,this.keySet=t}listChannels(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"List channel group channels with parameters:"}));const n=new cn(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=e=>{e&&this.logger.debug("PubNub","List channel group channels success. Received ".concat(e.channels.length," channels."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))})}listGroups(e){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub","List all channel groups.");const t=new dn({keySet:this.keySet}),n=e=>{e&&this.logger.debug("PubNub","List all channel groups success. Received ".concat(e.groups.length," groups."))};return e?this.sendRequest(t,(t,r)=>{n(r),e(t,r)}):this.sendRequest(t).then(e=>(n(e),e))})}addChannels(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Add channels to the channel group with parameters:"}));const n=new ln(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=()=>{this.logger.debug("PubNub","Add channels to the channel group success.")};return t?this.sendRequest(n,e=>{e.error||r(),t(e)}):this.sendRequest(n).then(e=>(r(),e))})}removeChannels(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Remove channels from the channel group with parameters:"}));const n=new on(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=()=>{this.logger.debug("PubNub","Remove channels from the channel group success.")};return t?this.sendRequest(n,e=>{e.error||r(),t(e)}):this.sendRequest(n).then(e=>(r(),e))})}deleteGroup(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Remove a channel group with parameters:"}));const n=new un(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=()=>{this.logger.debug("PubNub","Remove a channel group success. Removed '".concat(e.channelGroup,"' channel group.'"))};return t?this.sendRequest(n,e=>{e.error||r(),t(e)}):this.sendRequest(n).then(e=>(r(),e))})}}class pn extends he{constructor(e){var t,n;super(),this.parameters=e,"apns2"===this.parameters.pushGateway&&(null!==(t=(n=this.parameters).environment)&&void 0!==t||(n.environment="development")),this.parameters.count&&this.parameters.count>1e3&&(this.parameters.count=1e3)}operation(){throw Error("Should be implemented in subclass.")}validate(){const{keySet:{subscribeKey:e},action:t,device:n,pushGateway:r}=this.parameters;return e?n?"add"!==t&&"remove"!==t||"channels"in this.parameters&&0!==this.parameters.channels.length?r?"apns2"!==this.parameters.pushGateway||this.parameters.topic?void 0:"Missing APNS2 topic":"Missing GW Type (pushGateway: fcm or apns2)":"Missing Channels":"Missing Device ID (device)":"Missing Subscribe Key"}get path(){const{keySet:{subscribeKey:e},action:t,device:n,pushGateway:r}=this.parameters;let s="apns2"===r?"/v2/push/sub-key/".concat(e,"/devices-apns2/").concat(n):"/v1/push/sub-key/".concat(e,"/devices/").concat(n);return"remove-device"===t&&(s="".concat(s,"/remove")),s}get queryParameters(){const{start:e,count:t}=this.parameters;let n=Object.assign(Object.assign({type:this.parameters.pushGateway},e?{start:e}:{}),t&&t>0?{count:t}:{});if("channels"in this.parameters&&(n[this.parameters.action]=this.parameters.channels.join(",")),"apns2"===this.parameters.pushGateway){const{environment:e,topic:t}=this.parameters;n=Object.assign(Object.assign({},n),{environment:e,topic:t})}return n}}class fn extends pn{constructor(e){super(Object.assign(Object.assign({},e),{action:"remove"}))}operation(){return I.PNRemovePushNotificationEnabledChannelsOperation}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>({}))})}}class gn extends pn{constructor(e){super(Object.assign(Object.assign({},e),{action:"list"}))}operation(){return I.PNPushNotificationEnabledChannelsOperation}parse(e){return o(this,void 0,void 0,function*(){return{channels:this.deserializeResponse(e)}})}}class mn extends pn{constructor(e){super(Object.assign(Object.assign({},e),{action:"add"}))}operation(){return I.PNAddPushNotificationEnabledChannelsOperation}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>({}))})}}class bn extends pn{constructor(e){super(Object.assign(Object.assign({},e),{action:"remove-device"}))}operation(){return I.PNRemoveAllPushNotificationsOperation}parse(e){const t=Object.create(null,{parse:{get:()=>super.parse}});return o(this,void 0,void 0,function*(){return t.parse.call(this,e).then(e=>({}))})}}class yn{constructor(e,t,n){this.sendRequest=n,this.logger=e,this.keySet=t}listChannels(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"List push-enabled channels with parameters:"}));const n=new gn(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=e=>{e&&this.logger.debug("PubNub","List push-enabled channels success. Received ".concat(e.channels.length," channels."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))})}addChannels(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Add push-enabled channels with parameters:"}));const n=new mn(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=()=>{this.logger.debug("PubNub","Add push-enabled channels success.")};return t?this.sendRequest(n,e=>{e.error||r(),t(e)}):this.sendRequest(n).then(e=>(r(),e))})}removeChannels(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Remove push-enabled channels with parameters:"}));const n=new fn(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=()=>{this.logger.debug("PubNub","Remove push-enabled channels success.")};return t?this.sendRequest(n,e=>{e.error||r(),t(e)}):this.sendRequest(n).then(e=>(r(),e))})}deleteDevice(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Remove push notifications for device with parameters:"}));const n=new bn(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=()=>{this.logger.debug("PubNub","Remove push notifications for device success.")};return t?this.sendRequest(n,e=>{e.error||r(),t(e)}):this.sendRequest(n).then(e=>(r(),e))})}}class vn extends he{constructor(e){var t,n,r,s,i,a;super(),this.parameters=e,null!==(t=e.include)&&void 0!==t||(e.include={}),null!==(n=(i=e.include).customFields)&&void 0!==n||(i.customFields=!1),null!==(r=(a=e.include).totalCount)&&void 0!==r||(a.totalCount=!1),null!==(s=e.limit)&&void 0!==s||(e.limit=100)}operation(){return I.PNGetAllChannelMetadataOperation}get path(){return"/v2/objects/".concat(this.parameters.keySet.subscribeKey,"/channels")}get queryParameters(){const{include:e,page:t,filter:n,sort:r,limit:s}=this.parameters;let i="";return i="string"==typeof r?r:Object.entries(null!=r?r:{}).map(e=>{let[t,n]=e;return null!==n?"".concat(t,":").concat(n):t}),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({include:["status","type",...e.customFields?["custom"]:[]].join(","),count:"".concat(e.totalCount)},n?{filter:n}:{}),(null==t?void 0:t.next)?{start:t.next}:{}),(null==t?void 0:t.prev)?{end:t.prev}:{}),s?{limit:s}:{}),i.length?{sort:i}:{})}}class kn extends he{constructor(e){super({method:oe.DELETE}),this.parameters=e}operation(){return I.PNRemoveChannelMetadataOperation}validate(){if(!this.parameters.channel)return"Channel cannot be empty"}get path(){const{keySet:{subscribeKey:e},channel:t}=this.parameters;return"/v2/objects/".concat(e,"/channels/").concat(U(t))}}class wn extends he{constructor(e){var t,n,r,s,i,a,o,l,c,u,d,h,p,f,g,m,b,y;super(),this.parameters=e,null!==(t=e.include)&&void 0!==t||(e.include={}),null!==(n=(d=e.include).customFields)&&void 0!==n||(d.customFields=!1),null!==(r=(h=e.include).totalCount)&&void 0!==r||(h.totalCount=!1),null!==(s=(p=e.include).statusField)&&void 0!==s||(p.statusField=!1),null!==(i=(f=e.include).typeField)&&void 0!==i||(f.typeField=!1),null!==(a=(g=e.include).channelFields)&&void 0!==a||(g.channelFields=!1),null!==(o=(m=e.include).customChannelFields)&&void 0!==o||(m.customChannelFields=!1),null!==(l=(b=e.include).channelStatusField)&&void 0!==l||(b.channelStatusField=!1),null!==(c=(y=e.include).channelTypeField)&&void 0!==c||(y.channelTypeField=!1),null!==(u=e.limit)&&void 0!==u||(e.limit=100),this.parameters.userId&&(this.parameters.uuid=this.parameters.userId)}operation(){return I.PNGetMembershipsOperation}validate(){if(!this.parameters.uuid)return"'uuid' cannot be empty"}get path(){const{keySet:{subscribeKey:e},uuid:t}=this.parameters;return"/v2/objects/".concat(e,"/uuids/").concat(U(t),"/channels")}get queryParameters(){const{include:e,page:t,filter:n,sort:r,limit:s}=this.parameters;let i="";i="string"==typeof r?r:Object.entries(null!=r?r:{}).map(e=>{let[t,n]=e;return null!==n?"".concat(t,":").concat(n):t});const a=[];return e.statusField&&a.push("status"),e.typeField&&a.push("type"),e.customFields&&a.push("custom"),e.channelFields&&a.push("channel"),e.channelStatusField&&a.push("channel.status"),e.channelTypeField&&a.push("channel.type"),e.customChannelFields&&a.push("channel.custom"),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({count:"".concat(e.totalCount)},a.length>0?{include:a.join(",")}:{}),n?{filter:n}:{}),(null==t?void 0:t.next)?{start:t.next}:{}),(null==t?void 0:t.prev)?{end:t.prev}:{}),s?{limit:s}:{}),i.length?{sort:i}:{})}}class Sn extends he{constructor(e){var t,n,r,s,i,a,o,l,c,u,d,h,p,f,g,m,b,y;super({method:oe.PATCH}),this.parameters=e,null!==(t=e.include)&&void 0!==t||(e.include={}),null!==(n=(d=e.include).customFields)&&void 0!==n||(d.customFields=!1),null!==(r=(h=e.include).totalCount)&&void 0!==r||(h.totalCount=!1),null!==(s=(p=e.include).statusField)&&void 0!==s||(p.statusField=!1),null!==(i=(f=e.include).typeField)&&void 0!==i||(f.typeField=!1),null!==(a=(g=e.include).channelFields)&&void 0!==a||(g.channelFields=!1),null!==(o=(m=e.include).customChannelFields)&&void 0!==o||(m.customChannelFields=!1),null!==(l=(b=e.include).channelStatusField)&&void 0!==l||(b.channelStatusField=!1),null!==(c=(y=e.include).channelTypeField)&&void 0!==c||(y.channelTypeField=!1),null!==(u=e.limit)&&void 0!==u||(e.limit=100),this.parameters.userId&&(this.parameters.uuid=this.parameters.userId)}operation(){return I.PNSetMembershipsOperation}validate(){const{uuid:e,channels:t}=this.parameters;return e?t&&0!==t.length?void 0:"Channels cannot be empty":"'uuid' cannot be empty"}get path(){const{keySet:{subscribeKey:e},uuid:t}=this.parameters;return"/v2/objects/".concat(e,"/uuids/").concat(U(t),"/channels")}get queryParameters(){const{include:e,page:t,filter:n,sort:r,limit:s}=this.parameters;let i="";i="string"==typeof r?r:Object.entries(null!=r?r:{}).map(e=>{let[t,n]=e;return null!==n?"".concat(t,":").concat(n):t});const a=["channel.status","channel.type","status"];return e.statusField&&a.push("status"),e.typeField&&a.push("type"),e.customFields&&a.push("custom"),e.channelFields&&a.push("channel"),e.channelStatusField&&a.push("channel.status"),e.channelTypeField&&a.push("channel.type"),e.customChannelFields&&a.push("channel.custom"),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({count:"".concat(e.totalCount)},a.length>0?{include:a.join(",")}:{}),n?{filter:n}:{}),(null==t?void 0:t.next)?{start:t.next}:{}),(null==t?void 0:t.prev)?{end:t.prev}:{}),s?{limit:s}:{}),i.length?{sort:i}:{})}get headers(){var e;return Object.assign(Object.assign({},null!==(e=super.headers)&&void 0!==e?e:{}),{"Content-Type":"application/json"})}get body(){const{channels:e,type:t}=this.parameters;return JSON.stringify({["".concat(t)]:e.map(e=>"string"==typeof e?{channel:{id:e}}:{channel:{id:e.id},status:e.status,type:e.type,custom:e.custom})})}}class Cn extends he{constructor(e){var t,n,r,s;super(),this.parameters=e,null!==(t=e.include)&&void 0!==t||(e.include={}),null!==(n=(s=e.include).customFields)&&void 0!==n||(s.customFields=!1),null!==(r=e.limit)&&void 0!==r||(e.limit=100)}operation(){return I.PNGetAllUUIDMetadataOperation}get path(){return"/v2/objects/".concat(this.parameters.keySet.subscribeKey,"/uuids")}get queryParameters(){const{include:e,page:t,filter:n,sort:r,limit:s}=this.parameters;let i="";return i="string"==typeof r?r:Object.entries(null!=r?r:{}).map(e=>{let[t,n]=e;return null!==n?"".concat(t,":").concat(n):t}),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({include:["status","type",...e.customFields?["custom"]:[]].join(",")},void 0!==e.totalCount?{count:"".concat(e.totalCount)}:{}),n?{filter:n}:{}),(null==t?void 0:t.next)?{start:t.next}:{}),(null==t?void 0:t.prev)?{end:t.prev}:{}),s?{limit:s}:{}),i.length?{sort:i}:{})}}class En extends he{constructor(e){var t,n,r;super(),this.parameters=e,null!==(t=e.include)&&void 0!==t||(e.include={}),null!==(n=(r=e.include).customFields)&&void 0!==n||(r.customFields=!0)}operation(){return I.PNGetChannelMetadataOperation}validate(){if(!this.parameters.channel)return"Channel cannot be empty"}get path(){const{keySet:{subscribeKey:e},channel:t}=this.parameters;return"/v2/objects/".concat(e,"/channels/").concat(U(t))}get queryParameters(){return{include:["status","type",...this.parameters.include.customFields?["custom"]:[]].join(",")}}}class Pn extends he{constructor(e){var t,n,r;super({method:oe.PATCH}),this.parameters=e,null!==(t=e.include)&&void 0!==t||(e.include={}),null!==(n=(r=e.include).customFields)&&void 0!==n||(r.customFields=!0)}operation(){return I.PNSetChannelMetadataOperation}validate(){return this.parameters.channel?this.parameters.data?void 0:"Data cannot be empty":"Channel cannot be empty"}get headers(){var e;let t=null!==(e=super.headers)&&void 0!==e?e:{};return this.parameters.ifMatchesEtag&&(t=Object.assign(Object.assign({},t),{"If-Match":this.parameters.ifMatchesEtag})),Object.assign(Object.assign({},t),{"Content-Type":"application/json"})}get path(){const{keySet:{subscribeKey:e},channel:t}=this.parameters;return"/v2/objects/".concat(e,"/channels/").concat(U(t))}get queryParameters(){return{include:["status","type",...this.parameters.include.customFields?["custom"]:[]].join(",")}}get body(){return JSON.stringify(this.parameters.data)}}class On extends he{constructor(e){super({method:oe.DELETE}),this.parameters=e,this.parameters.userId&&(this.parameters.uuid=this.parameters.userId)}operation(){return I.PNRemoveUUIDMetadataOperation}validate(){if(!this.parameters.uuid)return"'uuid' cannot be empty"}get path(){const{keySet:{subscribeKey:e},uuid:t}=this.parameters;return"/v2/objects/".concat(e,"/uuids/").concat(U(t))}}class Nn extends he{constructor(e){var t,n,r,s,i,a,o,l,c,u,d,h,p,f,g,m,b,y;super(),this.parameters=e,null!==(t=e.include)&&void 0!==t||(e.include={}),null!==(n=(d=e.include).customFields)&&void 0!==n||(d.customFields=!1),null!==(r=(h=e.include).totalCount)&&void 0!==r||(h.totalCount=!1),null!==(s=(p=e.include).statusField)&&void 0!==s||(p.statusField=!1),null!==(i=(f=e.include).typeField)&&void 0!==i||(f.typeField=!1),null!==(a=(g=e.include).UUIDFields)&&void 0!==a||(g.UUIDFields=!1),null!==(o=(m=e.include).customUUIDFields)&&void 0!==o||(m.customUUIDFields=!1),null!==(l=(b=e.include).UUIDStatusField)&&void 0!==l||(b.UUIDStatusField=!1),null!==(c=(y=e.include).UUIDTypeField)&&void 0!==c||(y.UUIDTypeField=!1),null!==(u=e.limit)&&void 0!==u||(e.limit=100)}operation(){return I.PNSetMembersOperation}validate(){if(!this.parameters.channel)return"Channel cannot be empty"}get path(){const{keySet:{subscribeKey:e},channel:t}=this.parameters;return"/v2/objects/".concat(e,"/channels/").concat(U(t),"/uuids")}get queryParameters(){const{include:e,page:t,filter:n,sort:r,limit:s}=this.parameters;let i="";i="string"==typeof r?r:Object.entries(null!=r?r:{}).map(e=>{let[t,n]=e;return null!==n?"".concat(t,":").concat(n):t});const a=[];return e.statusField&&a.push("status"),e.typeField&&a.push("type"),e.customFields&&a.push("custom"),e.UUIDFields&&a.push("uuid"),e.UUIDStatusField&&a.push("uuid.status"),e.UUIDTypeField&&a.push("uuid.type"),e.customUUIDFields&&a.push("uuid.custom"),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({count:"".concat(e.totalCount)},a.length>0?{include:a.join(",")}:{}),n?{filter:n}:{}),(null==t?void 0:t.next)?{start:t.next}:{}),(null==t?void 0:t.prev)?{end:t.prev}:{}),s?{limit:s}:{}),i.length?{sort:i}:{})}}class jn extends he{constructor(e){var t,n,r,s,i,a,o,l,c,u,d,h,p,f,g,m,b,y;super({method:oe.PATCH}),this.parameters=e,null!==(t=e.include)&&void 0!==t||(e.include={}),null!==(n=(d=e.include).customFields)&&void 0!==n||(d.customFields=!1),null!==(r=(h=e.include).totalCount)&&void 0!==r||(h.totalCount=!1),null!==(s=(p=e.include).statusField)&&void 0!==s||(p.statusField=!1),null!==(i=(f=e.include).typeField)&&void 0!==i||(f.typeField=!1),null!==(a=(g=e.include).UUIDFields)&&void 0!==a||(g.UUIDFields=!1),null!==(o=(m=e.include).customUUIDFields)&&void 0!==o||(m.customUUIDFields=!1),null!==(l=(b=e.include).UUIDStatusField)&&void 0!==l||(b.UUIDStatusField=!1),null!==(c=(y=e.include).UUIDTypeField)&&void 0!==c||(y.UUIDTypeField=!1),null!==(u=e.limit)&&void 0!==u||(e.limit=100)}operation(){return I.PNSetMembersOperation}validate(){const{channel:e,uuids:t}=this.parameters;return e?t&&0!==t.length?void 0:"UUIDs cannot be empty":"Channel cannot be empty"}get path(){const{keySet:{subscribeKey:e},channel:t}=this.parameters;return"/v2/objects/".concat(e,"/channels/").concat(U(t),"/uuids")}get queryParameters(){const{include:e,page:t,filter:n,sort:r,limit:s}=this.parameters;let i="";i="string"==typeof r?r:Object.entries(null!=r?r:{}).map(e=>{let[t,n]=e;return null!==n?"".concat(t,":").concat(n):t});const a=["uuid.status","uuid.type","type"];return e.statusField&&a.push("status"),e.typeField&&a.push("type"),e.customFields&&a.push("custom"),e.UUIDFields&&a.push("uuid"),e.UUIDStatusField&&a.push("uuid.status"),e.UUIDTypeField&&a.push("uuid.type"),e.customUUIDFields&&a.push("uuid.custom"),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({count:"".concat(e.totalCount)},a.length>0?{include:a.join(",")}:{}),n?{filter:n}:{}),(null==t?void 0:t.next)?{start:t.next}:{}),(null==t?void 0:t.prev)?{end:t.prev}:{}),s?{limit:s}:{}),i.length?{sort:i}:{})}get headers(){var e;return Object.assign(Object.assign({},null!==(e=super.headers)&&void 0!==e?e:{}),{"Content-Type":"application/json"})}get body(){const{uuids:e,type:t}=this.parameters;return JSON.stringify({["".concat(t)]:e.map(e=>"string"==typeof e?{uuid:{id:e}}:{uuid:{id:e.id},status:e.status,type:e.type,custom:e.custom})})}}class Tn extends he{constructor(e){var t,n,r;super(),this.parameters=e,null!==(t=e.include)&&void 0!==t||(e.include={}),null!==(n=(r=e.include).customFields)&&void 0!==n||(r.customFields=!0),this.parameters.userId&&(this.parameters.uuid=this.parameters.userId)}operation(){return I.PNGetUUIDMetadataOperation}validate(){if(!this.parameters.uuid)return"'uuid' cannot be empty"}get path(){const{keySet:{subscribeKey:e},uuid:t}=this.parameters;return"/v2/objects/".concat(e,"/uuids/").concat(U(t))}get queryParameters(){const{include:e}=this.parameters;return{include:["status","type",...e.customFields?["custom"]:[]].join(",")}}}class xn extends he{constructor(e){var t,n,r;super({method:oe.PATCH}),this.parameters=e,null!==(t=e.include)&&void 0!==t||(e.include={}),null!==(n=(r=e.include).customFields)&&void 0!==n||(r.customFields=!0),this.parameters.userId&&(this.parameters.uuid=this.parameters.userId)}operation(){return I.PNSetUUIDMetadataOperation}validate(){return this.parameters.uuid?this.parameters.data?void 0:"Data cannot be empty":"'uuid' cannot be empty"}get headers(){var e;let t=null!==(e=super.headers)&&void 0!==e?e:{};return this.parameters.ifMatchesEtag&&(t=Object.assign(Object.assign({},t),{"If-Match":this.parameters.ifMatchesEtag})),Object.assign(Object.assign({},t),{"Content-Type":"application/json"})}get path(){const{keySet:{subscribeKey:e},uuid:t}=this.parameters;return"/v2/objects/".concat(e,"/uuids/").concat(U(t))}get queryParameters(){return{include:["status","type",...this.parameters.include.customFields?["custom"]:[]].join(",")}}get body(){return JSON.stringify(this.parameters.data)}}class _n{constructor(e,t){this.keySet=e.keySet,this.configuration=e,this.sendRequest=t}get logger(){return this.configuration.logger()}getAllUUIDMetadata(e,t){return o(this,void 0,void 0,function*(){return this.logger.debug("PubNub",()=>({messageType:"object",message:e&&"function"!=typeof e?e:{},details:"Get all UUID metadata objects with parameters:"})),this._getAllUUIDMetadata(e,t)})}_getAllUUIDMetadata(e,t){return o(this,void 0,void 0,function*(){const n=e&&"function"!=typeof e?e:{};null!=t||(t="function"==typeof e?e:void 0);const r=new Cn(Object.assign(Object.assign({},n),{keySet:this.keySet})),s=e=>{e&&this.logger.debug("PubNub","Get all UUID metadata success. Received ".concat(e.totalCount," UUID metadata objects."))};return t?this.sendRequest(r,(e,n)=>{s(n),t(e,n)}):this.sendRequest(r).then(e=>(s(e),e))})}getUUIDMetadata(e,t){return o(this,void 0,void 0,function*(){return this.logger.debug("PubNub",()=>({messageType:"object",message:e&&"function"!=typeof e?e:{uuid:this.configuration.userId},details:"Get ".concat(e&&"function"!=typeof e?"":" current"," UUID metadata object with parameters:")})),this._getUUIDMetadata(e,t)})}_getUUIDMetadata(e,t){return o(this,void 0,void 0,function*(){var n;const r=e&&"function"!=typeof e?e:{};null!=t||(t="function"==typeof e?e:void 0),r.userId&&(this.logger.warn("PubNub","'userId' parameter is deprecated. Use 'uuid' instead."),r.uuid=r.userId),null!==(n=r.uuid)&&void 0!==n||(r.uuid=this.configuration.userId);const s=new Tn(Object.assign(Object.assign({},r),{keySet:this.keySet})),i=e=>{e&&this.logger.debug("PubNub","Get UUID metadata object success. Received '".concat(r.uuid,"' UUID metadata object."))};return t?this.sendRequest(s,(e,n)=>{i(n),t(e,n)}):this.sendRequest(s).then(e=>(i(e),e))})}setUUIDMetadata(e,t){return o(this,void 0,void 0,function*(){return this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Set UUID metadata object with parameters:"})),this._setUUIDMetadata(e,t)})}_setUUIDMetadata(e,t){return o(this,void 0,void 0,function*(){var n;e.userId&&(this.logger.warn("PubNub","'userId' parameter is deprecated. Use 'uuid' instead."),e.uuid=e.userId),null!==(n=e.uuid)&&void 0!==n||(e.uuid=this.configuration.userId);const r=new xn(Object.assign(Object.assign({},e),{keySet:this.keySet})),s=t=>{t&&this.logger.debug("PubNub","Set UUID metadata object success. Updated '".concat(e.uuid,"' UUID metadata object."))};return t?this.sendRequest(r,(e,n)=>{s(n),t(e,n)}):this.sendRequest(r).then(e=>(s(e),e))})}removeUUIDMetadata(e,t){return o(this,void 0,void 0,function*(){return this.logger.debug("PubNub",()=>({messageType:"object",message:e&&"function"!=typeof e?e:{uuid:this.configuration.userId},details:"Remove".concat(e&&"function"!=typeof e?"":" current"," UUID metadata object with parameters:")})),this._removeUUIDMetadata(e,t)})}_removeUUIDMetadata(e,t){return o(this,void 0,void 0,function*(){var n;const r=e&&"function"!=typeof e?e:{};null!=t||(t="function"==typeof e?e:void 0),r.userId&&(this.logger.warn("PubNub","'userId' parameter is deprecated. Use 'uuid' instead."),r.uuid=r.userId),null!==(n=r.uuid)&&void 0!==n||(r.uuid=this.configuration.userId);const s=new On(Object.assign(Object.assign({},r),{keySet:this.keySet})),i=e=>{e&&this.logger.debug("PubNub","Remove UUID metadata object success. Removed '".concat(r.uuid,"' UUID metadata object."))};return t?this.sendRequest(s,(e,n)=>{i(n),t(e,n)}):this.sendRequest(s).then(e=>(i(e),e))})}getAllChannelMetadata(e,t){return o(this,void 0,void 0,function*(){return this.logger.debug("PubNub",()=>({messageType:"object",message:e&&"function"!=typeof e?e:{},details:"Get all Channel metadata objects with parameters:"})),this._getAllChannelMetadata(e,t)})}_getAllChannelMetadata(e,t){return o(this,void 0,void 0,function*(){const n=e&&"function"!=typeof e?e:{};null!=t||(t="function"==typeof e?e:void 0);const r=new vn(Object.assign(Object.assign({},n),{keySet:this.keySet})),s=e=>{e&&this.logger.debug("PubNub","Get all Channel metadata objects success. Received ".concat(e.totalCount," Channel metadata objects."))};return t?this.sendRequest(r,(e,n)=>{s(n),t(e,n)}):this.sendRequest(r).then(e=>(s(e),e))})}getChannelMetadata(e,t){return o(this,void 0,void 0,function*(){return this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Get Channel metadata object with parameters:"})),this._getChannelMetadata(e,t)})}_getChannelMetadata(e,t){return o(this,void 0,void 0,function*(){const n=new En(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=t=>{t&&this.logger.debug("PubNub","Get Channel metadata object success. Received '".concat(e.channel,"' Channel metadata object."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))})}setChannelMetadata(e,t){return o(this,void 0,void 0,function*(){return this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Set Channel metadata object with parameters:"})),this._setChannelMetadata(e,t)})}_setChannelMetadata(e,t){return o(this,void 0,void 0,function*(){const n=new Pn(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=t=>{t&&this.logger.debug("PubNub","Set Channel metadata object success. Updated '".concat(e.channel,"' Channel metadata object."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))})}removeChannelMetadata(e,t){return o(this,void 0,void 0,function*(){return this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Remove Channel metadata object with parameters:"})),this._removeChannelMetadata(e,t)})}_removeChannelMetadata(e,t){return o(this,void 0,void 0,function*(){const n=new kn(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=t=>{t&&this.logger.debug("PubNub","Remove Channel metadata object success. Removed '".concat(e.channel,"' Channel metadata object."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))})}getChannelMembers(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Get channel members with parameters:"}));const n=new Nn(Object.assign(Object.assign({},e),{keySet:this.keySet})),r=e=>{e&&this.logger.debug("PubNub","Get channel members success. Received ".concat(e.totalCount," channel members."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))})}setChannelMembers(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Set channel members with parameters:"}));const n=new jn(Object.assign(Object.assign({},e),{type:"set",keySet:this.keySet})),r=e=>{e&&this.logger.debug("PubNub","Set channel members success. There are ".concat(e.totalCount," channel members now."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))})}removeChannelMembers(e,t){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Remove channel members with parameters:"}));const n=new jn(Object.assign(Object.assign({},e),{type:"delete",keySet:this.keySet})),r=e=>{e&&this.logger.debug("PubNub","Remove channel members success. There are ".concat(e.totalCount," channel members now."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))})}getMemberships(e,t){return o(this,void 0,void 0,function*(){var n;const r=e&&"function"!=typeof e?e:{};null!=t||(t="function"==typeof e?e:void 0),r.userId&&(this.logger.warn("PubNub","'userId' parameter is deprecated. Use 'uuid' instead."),r.uuid=r.userId),null!==(n=r.uuid)&&void 0!==n||(r.uuid=this.configuration.userId),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},r),details:"Get memberships with parameters:"}));const s=new wn(Object.assign(Object.assign({},r),{keySet:this.keySet})),i=e=>{e&&this.logger.debug("PubNub","Get memberships success. Received ".concat(e.totalCount," memberships."))};return t?this.sendRequest(s,(e,n)=>{i(n),t(e,n)}):this.sendRequest(s).then(e=>(i(e),e))})}setMemberships(e,t){return o(this,void 0,void 0,function*(){var n;e.userId&&(this.logger.warn("PubNub","'userId' parameter is deprecated. Use 'uuid' instead."),e.uuid=e.userId),null!==(n=e.uuid)&&void 0!==n||(e.uuid=this.configuration.userId),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Set memberships with parameters:"}));const r=new Sn(Object.assign(Object.assign({},e),{type:"set",keySet:this.keySet})),s=e=>{e&&this.logger.debug("PubNub","Set memberships success. There are ".concat(e.totalCount," memberships now."))};return t?this.sendRequest(r,(e,n)=>{s(n),t(e,n)}):this.sendRequest(r).then(e=>(s(e),e))})}removeMemberships(e,t){return o(this,void 0,void 0,function*(){var n;e.userId&&(this.logger.warn("PubNub","'userId' parameter is deprecated. Use 'uuid' instead."),e.uuid=e.userId),null!==(n=e.uuid)&&void 0!==n||(e.uuid=this.configuration.userId),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Remove memberships with parameters:"}));const r=new Sn(Object.assign(Object.assign({},e),{type:"delete",keySet:this.keySet})),s=e=>{e&&this.logger.debug("PubNub","Remove memberships success. There are ".concat(e.totalCount," memberships now."))};return t?this.sendRequest(r,(e,n)=>{s(n),t(e,n)}):this.sendRequest(r).then(e=>(s(e),e))})}fetchMemberships(e,t){return o(this,void 0,void 0,function*(){var n,r;if(this.logger.warn("PubNub","'fetchMemberships' is deprecated. Use 'pubnub.objects.getChannelMembers' or 'pubnub.objects.getMemberships' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Fetch memberships with parameters:"})),"spaceId"in e){const r=e,s={channel:null!==(n=r.spaceId)&&void 0!==n?n:r.channel,filter:r.filter,limit:r.limit,page:r.page,include:Object.assign({},r.include),sort:r.sort?Object.fromEntries(Object.entries(r.sort).map(e=>{let[t,n]=e;return[t.replace("user","uuid"),n]})):void 0},i=e=>({status:e.status,data:e.data.map(e=>({user:e.uuid,custom:e.custom,updated:e.updated,eTag:e.eTag})),totalCount:e.totalCount,next:e.next,prev:e.prev});return t?this.getChannelMembers(s,(e,n)=>{t(e,n?i(n):n)}):this.getChannelMembers(s).then(i)}const s=e,i={uuid:null!==(r=s.userId)&&void 0!==r?r:s.uuid,filter:s.filter,limit:s.limit,page:s.page,include:Object.assign({},s.include),sort:s.sort?Object.fromEntries(Object.entries(s.sort).map(e=>{let[t,n]=e;return[t.replace("space","channel"),n]})):void 0},a=e=>({status:e.status,data:e.data.map(e=>({space:e.channel,custom:e.custom,updated:e.updated,eTag:e.eTag})),totalCount:e.totalCount,next:e.next,prev:e.prev});return t?this.getMemberships(i,(e,n)=>{t(e,n?a(n):n)}):this.getMemberships(i).then(a)})}addMemberships(e,t){return o(this,void 0,void 0,function*(){var n,r,s,i,a,o;if(this.logger.warn("PubNub","'addMemberships' is deprecated. Use 'pubnub.objects.setChannelMembers' or 'pubnub.objects.setMemberships' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Add memberships with parameters:"})),"spaceId"in e){const i=e,a={channel:null!==(n=i.spaceId)&&void 0!==n?n:i.channel,uuids:null!==(s=null===(r=i.users)||void 0===r?void 0:r.map(e=>"string"==typeof e?e:{id:e.userId,custom:e.custom}))&&void 0!==s?s:i.uuids,limit:0};return t?this.setChannelMembers(a,t):this.setChannelMembers(a)}const l=e,c={uuid:null!==(i=l.userId)&&void 0!==i?i:l.uuid,channels:null!==(o=null===(a=l.spaces)||void 0===a?void 0:a.map(e=>"string"==typeof e?e:{id:e.spaceId,custom:e.custom}))&&void 0!==o?o:l.channels,limit:0};return t?this.setMemberships(c,t):this.setMemberships(c)})}}class Mn extends he{constructor(){super()}operation(){return I.PNTimeOperation}parse(e){return o(this,void 0,void 0,function*(){return{timetoken:this.deserializeResponse(e)[0]}})}get path(){return"/time/0"}}class In extends he{constructor(e){super(),this.parameters=e}operation(){return I.PNDownloadFileOperation}validate(){const{channel:e,id:t,name:n}=this.parameters;return e?t?n?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"}parse(e){return o(this,void 0,void 0,function*(){const{cipherKey:t,crypto:n,cryptography:r,name:s,PubNubFile:i}=this.parameters,a=e.headers["content-type"];let o,l=e.body;return i.supportsEncryptFile&&(t||n)&&(t&&r?l=yield r.decrypt(t,l):!t&&n&&(o=yield n.decryptFile(i.create({data:l,name:s,mimeType:a}),i))),o||i.create({data:l,name:s,mimeType:a})})}get path(){const{keySet:{subscribeKey:e},channel:t,id:n,name:r}=this.parameters;return"/v1/files/".concat(e,"/channels/").concat(U(t),"/files/").concat(n,"/").concat(r)}}class An{static notificationPayload(e,t){return new Se(e,t)}static generateUUID(){return ne.createUUID()}constructor(e){if(this.eventHandleCapable={},this.entities={},this._configuration=e.configuration,this.cryptography=e.cryptography,this.tokenManager=e.tokenManager,this.transport=e.transport,this.crypto=e.crypto,this.logger.debug("PubNub",()=>({messageType:"object",message:e.configuration,details:"Create with configuration:",ignoredKeys:(e,t)=>"function"==typeof t[e]||e.startsWith("_")})),this._objects=new _n(this._configuration,this.sendRequest.bind(this)),this._channelGroups=new hn(this._configuration.logger(),this._configuration.keySet,this.sendRequest.bind(this)),this._push=new yn(this._configuration.logger(),this._configuration.keySet,this.sendRequest.bind(this)),this.eventDispatcher=new ge,this._configuration.enableEventEngine){this.logger.debug("PubNub","Using new subscription loop management.");let e=this._configuration.getHeartbeatInterval();this.presenceState={},e&&(this.presenceEventEngine=new Ze({heartbeat:(e,t)=>(this.logger.trace("PresenceEventEngine",()=>({messageType:"object",message:Object.assign({},e),details:"Heartbeat with parameters:"})),this.heartbeat(e,t)),leave:e=>{this.logger.trace("PresenceEventEngine",()=>({messageType:"object",message:Object.assign({},e),details:"Leave with parameters:"})),this.makeUnsubscribe(e,()=>{})},heartbeatDelay:()=>new Promise((t,n)=>{e=this._configuration.getHeartbeatInterval(),e?setTimeout(t,1e3*e):n(new p("Heartbeat interval has been reset."))}),emitStatus:e=>this.emitStatus(e),config:this._configuration,presenceState:this.presenceState})),this.eventEngine=new wt({handshake:e=>(this.logger.trace("EventEngine",()=>({messageType:"object",message:Object.assign({},e),details:"Handshake with parameters:",ignoredKeys:["abortSignal","crypto","timeout","keySet","getFileUrl"]})),this.subscribeHandshake(e)),receiveMessages:e=>(this.logger.trace("EventEngine",()=>({messageType:"object",message:Object.assign({},e),details:"Receive messages with parameters:",ignoredKeys:["abortSignal","crypto","timeout","keySet","getFileUrl"]})),this.subscribeReceiveMessages(e)),delay:e=>new Promise(t=>setTimeout(t,e)),join:e=>{var t,n;this.logger.trace("EventEngine",()=>({messageType:"object",message:Object.assign({},e),details:"Join with parameters:"})),e&&0===(null!==(t=e.channels)&&void 0!==t?t:[]).length&&0===(null!==(n=e.groups)&&void 0!==n?n:[]).length?this.logger.trace("EventEngine","Ignoring 'join' announcement request."):this.join(e)},leave:e=>{var t,n;this.logger.trace("EventEngine",()=>({messageType:"object",message:Object.assign({},e),details:"Leave with parameters:"})),e&&0===(null!==(t=e.channels)&&void 0!==t?t:[]).length&&0===(null!==(n=e.groups)&&void 0!==n?n:[]).length?this.logger.trace("EventEngine","Ignoring 'leave' announcement request."):this.leave(e)},leaveAll:e=>{this.logger.trace("EventEngine",()=>({messageType:"object",message:Object.assign({},e),details:"Leave all with parameters:"})),this.leaveAll(e)},presenceReconnect:e=>{this.logger.trace("EventEngine",()=>({messageType:"object",message:Object.assign({},e),details:"Reconnect with parameters:"})),this.presenceReconnect(e)},presenceDisconnect:e=>{this.logger.trace("EventEngine",()=>({messageType:"object",message:Object.assign({},e),details:"Disconnect with parameters:"})),this.presenceDisconnect(e)},presenceState:this.presenceState,config:this._configuration,emitMessages:(e,t)=>{try{this.logger.debug("EventEngine",()=>({messageType:"object",message:t.map(e=>{const t=e.type===le.Message||e.type===le.Signal?W(e.data.message):void 0;return t?{type:e.type,data:Object.assign(Object.assign({},e.data),{pn_mfp:t})}:e}),details:"Received events:"})),t.forEach(t=>this.emitEvent(e,t))}catch(e){const t={error:!0,category:h.PNUnknownCategory,errorData:e,statusCode:0};this.emitStatus(t)}},emitStatus:e=>this.emitStatus(e)})}else this.logger.debug("PubNub","Using legacy subscription loop management."),this.subscriptionManager=new ye(this._configuration,(e,t)=>{try{this.emitEvent(e,t)}catch(e){const t={error:!0,category:h.PNUnknownCategory,errorData:e,statusCode:0};this.emitStatus(t)}},this.emitStatus.bind(this),(e,t)=>{this.logger.trace("SubscriptionManager",()=>({messageType:"object",message:Object.assign({},e),details:"Subscribe with parameters:",ignoredKeys:["crypto","timeout","keySet","getFileUrl"]})),this.makeSubscribe(e,t)},(e,t)=>(this.logger.trace("SubscriptionManager",()=>({messageType:"object",message:Object.assign({},e),details:"Heartbeat with parameters:",ignoredKeys:["crypto","timeout","keySet","getFileUrl"]})),this.heartbeat(e,t)),(e,t)=>{this.logger.trace("SubscriptionManager",()=>({messageType:"object",message:Object.assign({},e),details:"Leave with parameters:"})),this.makeUnsubscribe(e,t)},this.time.bind(this))}get configuration(){return this._configuration}get _config(){return this.configuration}get authKey(){var e;return null!==(e=this._configuration.authKey)&&void 0!==e?e:void 0}getAuthKey(){return this.authKey}setAuthKey(e){this.logger.debug("PubNub","Set auth key: ".concat(e)),this._configuration.setAuthKey(e),this.onAuthenticationChange&&this.onAuthenticationChange(e)}get userId(){return this._configuration.userId}set userId(e){if(!e||"string"!=typeof e||0===e.trim().length){const e=new Error("Missing or invalid userId parameter. Provide a valid string userId");throw this.logger.error("PubNub",()=>({messageType:"error",message:e})),e}this.logger.debug("PubNub","Set user ID: ".concat(e)),this._configuration.userId=e,this.onUserIdChange&&this.onUserIdChange(this._configuration.userId)}getUserId(){return this._configuration.userId}setUserId(e){this.userId=e}get filterExpression(){var e;return null!==(e=this._configuration.getFilterExpression())&&void 0!==e?e:void 0}getFilterExpression(){return this.filterExpression}set filterExpression(e){this.logger.debug("PubNub","Set filter expression: ".concat(e)),this._configuration.setFilterExpression(e)}setFilterExpression(e){this.logger.debug("PubNub","Set filter expression: ".concat(e)),this.filterExpression=e}get cipherKey(){return this._configuration.getCipherKey()}set cipherKey(e){this._configuration.setCipherKey(e)}setCipherKey(e){this.logger.debug("PubNub","Set cipher key: ".concat(e)),this.cipherKey=e}set heartbeatInterval(e){var t;this.logger.debug("PubNub","Set heartbeat interval: ".concat(e)),this._configuration.setHeartbeatInterval(e),this.onHeartbeatIntervalChange&&this.onHeartbeatIntervalChange(null!==(t=this._configuration.getHeartbeatInterval())&&void 0!==t?t:0)}setHeartbeatInterval(e){this.heartbeatInterval=e}get logger(){return this._configuration.logger()}getVersion(){return this._configuration.getVersion()}_addPnsdkSuffix(e,t){this.logger.debug("PubNub","Add '".concat(e,"' 'pnsdk' suffix: ").concat(t)),this._configuration._addPnsdkSuffix(e,t)}getUUID(){return this.userId}setUUID(e){this.logger.warn("PubNub","'setUserId` is deprecated, please use 'setUserId' or 'userId' setter instead."),this.logger.debug("PubNub","Set UUID: ".concat(e)),this.userId=e}get customEncrypt(){return this._configuration.getCustomEncrypt()}get customDecrypt(){return this._configuration.getCustomDecrypt()}channel(e){let t=this.entities["".concat(e,"_ch")];return t||(t=this.entities["".concat(e,"_ch")]=new an(e,this)),t}channelGroup(e){let t=this.entities["".concat(e,"_chg")];return t||(t=this.entities["".concat(e,"_chg")]=new rn(e,this)),t}channelMetadata(e){let t=this.entities["".concat(e,"_chm")];return t||(t=this.entities["".concat(e,"_chm")]=new nn(e,this)),t}userMetadata(e){let t=this.entities["".concat(e,"_um")];return t||(t=this.entities["".concat(e,"_um")]=new sn(e,this)),t}subscriptionSet(e){var t,n;{const r=[];return null===(t=e.channels)||void 0===t||t.forEach(e=>r.push(this.channel(e))),null===(n=e.channelGroups)||void 0===n||n.forEach(e=>r.push(this.channelGroup(e))),new Mt({client:this,entities:r,options:e.subscriptionOptions})}}sendRequest(e,t){return o(this,void 0,void 0,function*(){const n=e.validate();if(n){const e=(r=n,f(Object.assign({message:r},{}),h.PNValidationErrorCategory));if(this.logger.error("PubNub",()=>({messageType:"error",message:e})),t)return t(e,null);throw new p("Validation failed, check status for details",e)}var r;const s=e.request(),i=e.operation();s.formData&&s.formData.length>0||i===I.PNDownloadFileOperation?s.timeout=this._configuration.getFileTimeout():i===I.PNSubscribeOperation||i===I.PNReceiveMessagesOperation?s.timeout=this._configuration.getSubscribeTimeout():s.timeout=this._configuration.getTransactionTimeout();const a={error:!1,operation:i,category:h.PNAcknowledgmentCategory,statusCode:0},[o,l]=this.transport.makeSendable(s);return e.cancellationController=l||null,o.then(t=>{if(a.statusCode=t.status,200!==t.status&&204!==t.status){const e=An.decoder.decode(t.body),n=t.headers["content-type"];if(n||-1!==n.indexOf("javascript")||-1!==n.indexOf("json")){const t=JSON.parse(e);"object"==typeof t&&"error"in t&&t.error&&"object"==typeof t.error&&(a.errorData=t.error)}else a.responseText=e}return e.parse(t)}).then(e=>t?t(a,e):e).catch(e=>{const n=e instanceof M?e:M.create(e);if(t)return n.category!==h.PNCancelledCategory&&this.logger.error("PubNub",()=>({messageType:"error",message:n.toPubNubError(i,"REST API request processing error, check status for details")})),t(n.toStatus(i),null);const r=n.toPubNubError(i,"REST API request processing error, check status for details");throw n.category!==h.PNCancelledCategory&&this.logger.error("PubNub",()=>({messageType:"error",message:r})),r})})}destroy(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logger.info("PubNub","Destroying PubNub client."),this._globalSubscriptionSet&&(this._globalSubscriptionSet.invalidate(!0),this._globalSubscriptionSet=void 0),Object.values(this.eventHandleCapable).forEach(e=>e.invalidate(!0)),this.eventHandleCapable={},this.subscriptionManager?(this.subscriptionManager.unsubscribeAll(e),this.subscriptionManager.disconnect()):this.eventEngine&&this.eventEngine.unsubscribeAll(e),this.presenceEventEngine&&this.presenceEventEngine.leaveAll(e)}stop(){this.logger.warn("PubNub","'stop' is deprecated, please use 'destroy' instead."),this.destroy()}publish(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Publish with parameters:"}));const n=!1===e.replicate&&!1===e.storeInHistory,r=new St(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet,crypto:this._configuration.getCryptoModule()})),s=e=>{e&&this.logger.debug("PubNub","".concat(n?"Fire":"Publish"," success with timetoken: ").concat(e.timetoken))};return t?this.sendRequest(r,(e,n)=>{s(n),t(e,n)}):this.sendRequest(r).then(e=>(s(e),e))}})}signal(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Signal with parameters:"}));const n=new Ct(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet})),r=e=>{e&&this.logger.debug("PubNub","Publish success with timetoken: ".concat(e.timetoken))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}fire(e,t){return o(this,void 0,void 0,function*(){return this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Fire with parameters:"})),null!=t||(t=()=>{}),this.publish(Object.assign(Object.assign({},e),{replicate:!1,storeInHistory:!1}),t)})}get globalSubscriptionSet(){return this._globalSubscriptionSet||(this._globalSubscriptionSet=this.subscriptionSet({})),this._globalSubscriptionSet}get subscriptionTimetoken(){return this.subscriptionManager?this.subscriptionManager.subscriptionTimetoken:this.eventEngine?this.eventEngine.subscriptionTimetoken:void 0}getSubscribedChannels(){return this.subscriptionManager?this.subscriptionManager.subscribedChannels:this.eventEngine?this.eventEngine.getSubscribedChannels():[]}getSubscribedChannelGroups(){return this.subscriptionManager?this.subscriptionManager.subscribedChannelGroups:this.eventEngine?this.eventEngine.getSubscribedChannelGroups():[]}registerEventHandleCapable(e,t,n){{let r;this.logger.trace("PubNub",()=>({messageType:"object",message:Object.assign(Object.assign({subscription:e},t?{cursor:t}:[]),n?{subscriptions:n}:{}),details:"Register event handle capable:"})),this.eventHandleCapable[e.state.id]||(this.eventHandleCapable[e.state.id]=e),n&&0!==n.length?(r=new jt({}),n.forEach(e=>r.add(e.subscriptionInput(!1)))):r=e.subscriptionInput(!1);const s={};s.channels=r.channels,s.channelGroups=r.channelGroups,t&&(s.timetoken=t.timetoken),this.subscriptionManager?this.subscriptionManager.subscribe(s):this.eventEngine&&this.eventEngine.subscribe(s)}}unregisterEventHandleCapable(e,t){{if(!this.eventHandleCapable[e.state.id])return;const n=[];this.logger.trace("PubNub",()=>({messageType:"object",message:{subscription:e,subscriptions:t},details:"Unregister event handle capable:"}));let r,s=!t||0===t.length;if(!s&&e instanceof Mt&&e.subscriptions.length===(null==t?void 0:t.length)&&(s=e.subscriptions.every(e=>t.includes(e))),s&&delete this.eventHandleCapable[e.state.id],t&&0!==t.length?(r=new jt({}),t.forEach(e=>{const t=e.subscriptionInput(!0);t.isEmpty?n.push(e):r.add(t)})):(r=e.subscriptionInput(!0),r.isEmpty&&n.push(e)),n.length>0&&this.logger.trace("PubNub",()=>{const e=[];return n[0]instanceof Mt?n[0].subscriptions.forEach(t=>e.push(t.state.entity)):n.forEach(t=>e.push(t.state.entity)),{messageType:"object",message:{entities:e},details:"Can't unregister event handle capable because entities still in use:"}}),r.isEmpty)return;{const e=[],t=[];if(Object.values(this.eventHandleCapable).forEach(n=>{const s=n.subscriptionInput(!1),i=s.channelGroups,a=s.channels;e.push(...r.channelGroups.filter(e=>i.includes(e))),t.push(...r.channels.filter(e=>a.includes(e)))}),(t.length>0||e.length>0)&&(this.logger.trace("PubNub",()=>{const n=[],s=r=>{const s=r.subscriptionNames(!0),i=r.subscriptionType===Ot.Channel?t:e;s.some(e=>i.includes(e))&&n.push(r)};Object.values(this.eventHandleCapable).forEach(e=>{e instanceof Mt?e.subscriptions.forEach(e=>{s(e.state.entity)}):e instanceof At&&s(e.state.entity)});let i="Some entities still in use:";return t.length+e.length===r.length&&(i="Can't unregister event handle capable because entities still in use:"),{messageType:"object",message:{entities:n},details:i}}),r.remove(new jt({channels:t,channelGroups:e})),r.isEmpty))return}const i={};i.channels=r.channels,i.channelGroups=r.channelGroups,this.subscriptionManager?this.subscriptionManager.unsubscribe(i):this.eventEngine&&this.eventEngine.unsubscribe(i)}}subscribe(e){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Subscribe with parameters:"}));const t=this.subscriptionSet(Object.assign(Object.assign({},e),{subscriptionOptions:{receivePresenceEvents:e.withPresence}}));this.globalSubscriptionSet.addSubscriptionSet(t),t.dispose();const n="number"==typeof e.timetoken?"".concat(e.timetoken):e.timetoken;this.globalSubscriptionSet.subscribe({timetoken:n})}}makeSubscribe(e,t){{this._configuration.isSharedWorkerEnabled()||(e.onDemand=!1);const n=new fe(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet,crypto:this._configuration.getCryptoModule(),getFileUrl:this.getFileUrl.bind(this)}));if(this.sendRequest(n,(e,r)=>{var s;this.subscriptionManager&&(null===(s=this.subscriptionManager.abort)||void 0===s?void 0:s.identifier)===n.requestIdentifier&&(this.subscriptionManager.abort=null),t(e,r)}),this.subscriptionManager){const e=()=>n.abort("Cancel long-poll subscribe request");e.identifier=n.requestIdentifier,this.subscriptionManager.abort=e}}}unsubscribe(e){{if(this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Unsubscribe with parameters:"})),!this._globalSubscriptionSet)return void this.logger.debug("PubNub","There are no active subscriptions. Ignore.");const t=this.globalSubscriptionSet.subscriptions.filter(t=>{var n,r;const s=t.subscriptionInput(!1);if(s.isEmpty)return!1;for(const i of null!==(n=e.channels)&&void 0!==n?n:[])if(s.contains(i))return!0;for(const i of null!==(r=e.channelGroups)&&void 0!==r?r:[])if(s.contains(i))return!0});t.length>0&&this.globalSubscriptionSet.removeSubscriptions(t)}}makeUnsubscribe(e,t){{let{channels:n,channelGroups:r}=e;if(this._configuration.getKeepPresenceChannelsInPresenceRequests()||(r&&(r=r.filter(e=>!e.endsWith("-pnpres"))),n&&(n=n.filter(e=>!e.endsWith("-pnpres")))),0===(null!=r?r:[]).length&&0===(null!=n?n:[]).length)return t({error:!1,operation:I.PNUnsubscribeOperation,category:h.PNAcknowledgmentCategory,statusCode:200});this.sendRequest(new Ut({channels:n,channelGroups:r,keySet:this._configuration.keySet}),t)}}unsubscribeAll(){this.logger.debug("PubNub","Unsubscribe all channels and groups"),this._globalSubscriptionSet&&this._globalSubscriptionSet.invalidate(!1),Object.values(this.eventHandleCapable).forEach(e=>e.invalidate(!1)),this.eventHandleCapable={},this.subscriptionManager?this.subscriptionManager.unsubscribeAll():this.eventEngine&&this.eventEngine.unsubscribeAll()}disconnect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logger.debug("PubNub","Disconnect (while offline? ".concat(e?"yes":"no",")")),this.subscriptionManager?this.subscriptionManager.disconnect():this.eventEngine&&this.eventEngine.disconnect(e)}reconnect(e){this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Reconnect with parameters:"})),this.subscriptionManager?this.subscriptionManager.reconnect():this.eventEngine&&this.eventEngine.reconnect(null!=e?e:{})}subscribeHandshake(e){return o(this,void 0,void 0,function*(){{this._configuration.isSharedWorkerEnabled()||(e.onDemand=!1);const t=new Pt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet,crypto:this._configuration.getCryptoModule(),getFileUrl:this.getFileUrl.bind(this)})),n=e.abortSignal.subscribe(e=>{t.abort("Cancel subscribe handshake request")});return this.sendRequest(t).then(e=>(n(),e.cursor))}})}subscribeReceiveMessages(e){return o(this,void 0,void 0,function*(){{this._configuration.isSharedWorkerEnabled()||(e.onDemand=!1);const t=new Et(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet,crypto:this._configuration.getCryptoModule(),getFileUrl:this.getFileUrl.bind(this)})),n=e.abortSignal.subscribe(e=>{t.abort("Cancel long-poll subscribe request")});return this.sendRequest(t).then(e=>(n(),e))}})}getMessageActions(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Get message actions with parameters:"}));const n=new Kt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet})),r=e=>{e&&this.logger.debug("PubNub","Get message actions success. Received ".concat(e.data.length," message actions."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}addMessageAction(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Add message action with parameters:"}));const n=new Wt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet})),r=e=>{e&&this.logger.debug("PubNub","Message action add success. Message action added with timetoken: ".concat(e.data.actionTimetoken))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}removeMessageAction(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Remove message action with parameters:"}));const n=new Vt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet})),r=t=>{t&&this.logger.debug("PubNub","Message action remove success. Removed message action with ".concat(e.actionTimetoken," timetoken."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}fetchMessages(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Fetch messages with parameters:"}));const n=new Gt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet,crypto:this._configuration.getCryptoModule(),getFileUrl:this.getFileUrl.bind(this)})),r=e=>{if(!e)return;const t=Object.values(e.channels).reduce((e,t)=>e+t.length,0);this.logger.debug("PubNub","Fetch messages success. Received ".concat(t," messages."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}deleteMessages(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Delete messages with parameters:"}));const n=new Bt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet})),r=e=>{e&&this.logger.debug("PubNub","Delete messages success.")};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}messageCounts(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Get messages count with parameters:"}));const n=new qt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet})),r=t=>{if(!t)return;const n=Object.values(t.channels).reduce((e,t)=>e+t,0);this.logger.debug("PubNub","Get messages count success. There are ".concat(n," messages since provided reference timetoken").concat(e.channelTimetokens?e.channelTimetokens.join(","):"","."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}history(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Fetch history with parameters:"}));const n=new Ht(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet,crypto:this._configuration.getCryptoModule()})),r=e=>{e&&this.logger.debug("PubNub","Fetch history success. Received ".concat(e.messages.length," messages."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}hereNow(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Here now with parameters:"}));const n=new zt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet})),r=e=>{e&&this.logger.debug("PubNub","Here now success. There are ".concat(e.totalOccupancy," participants in ").concat(e.totalChannels," channels."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}whereNow(e,t){return o(this,void 0,void 0,function*(){var n;{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Where now with parameters:"}));const r=new Lt({uuid:null!==(n=e.uuid)&&void 0!==n?n:this._configuration.userId,keySet:this._configuration.keySet}),s=e=>{e&&this.logger.debug("PubNub","Where now success. Currently present in ".concat(e.channels.length," channels."))};return t?this.sendRequest(r,(e,n)=>{s(n),t(e,n)}):this.sendRequest(r).then(e=>(s(e),e))}})}getState(e,t){return o(this,void 0,void 0,function*(){var n;{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Get presence state with parameters:"}));const r=new Rt(Object.assign(Object.assign({},e),{uuid:null!==(n=e.uuid)&&void 0!==n?n:this._configuration.userId,keySet:this._configuration.keySet})),s=e=>{e&&this.logger.debug("PubNub","Get presence state success. Received presence state for ".concat(Object.keys(e.channels).length," channels."))};return t?this.sendRequest(r,(e,n)=>{s(n),t(e,n)}):this.sendRequest(r).then(e=>(s(e),e))}})}setState(e,t){return o(this,void 0,void 0,function*(){var n,r;{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Set presence state with parameters:"}));const{keySet:s,userId:i}=this._configuration,a=this._configuration.getPresenceTimeout();let o;if(this._configuration.enableEventEngine&&this.presenceState){const t=this.presenceState;null===(n=e.channels)||void 0===n||n.forEach(n=>t[n]=e.state),"channelGroups"in e&&(null===(r=e.channelGroups)||void 0===r||r.forEach(n=>t[n]=e.state)),this.onPresenceStateChange&&this.onPresenceStateChange(this.presenceState)}o="withHeartbeat"in e&&e.withHeartbeat?new Ft(Object.assign(Object.assign({},e),{keySet:s,heartbeat:a})):new Dt(Object.assign(Object.assign({},e),{keySet:s,uuid:i}));const l=e=>{e&&this.logger.debug("PubNub","Set presence state success."+(o instanceof Ft?" Presence state has been set using heartbeat endpoint.":""))};return this.subscriptionManager&&(this.subscriptionManager.setState(e),this.onPresenceStateChange&&this.onPresenceStateChange(this.subscriptionManager.presenceState)),t?this.sendRequest(o,(e,n)=>{l(n),t(e,n)}):this.sendRequest(o).then(e=>(l(e),e))}})}presence(e){var t;this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Change presence with parameters:"})),null===(t=this.subscriptionManager)||void 0===t||t.changePresence(e)}heartbeat(e,t){return o(this,void 0,void 0,function*(){var n;{this.logger.trace("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Heartbeat with parameters:"}));let{channels:r,channelGroups:s}=e;if(s&&(s=s.filter(e=>!e.endsWith("-pnpres"))),r&&(r=r.filter(e=>!e.endsWith("-pnpres"))),0===(null!=s?s:[]).length&&0===(null!=r?r:[]).length){const e={error:!1,operation:I.PNHeartbeatOperation,category:h.PNAcknowledgmentCategory,statusCode:200};return this.logger.trace("PubNub","There are no active subscriptions. Ignore."),t?t(e,{}):Promise.resolve(e)}const i=new Ft(Object.assign(Object.assign({},e),{channels:[...new Set(r)],channelGroups:[...new Set(s)],keySet:this._configuration.keySet})),a=e=>{e&&this.logger.trace("PubNub","Heartbeat success.")},o=null===(n=e.abortSignal)||void 0===n?void 0:n.subscribe(e=>{i.abort("Cancel long-poll subscribe request")});return t?this.sendRequest(i,(e,n)=>{a(n),o&&o(),t(e,n)}):this.sendRequest(i).then(e=>(a(e),o&&o(),e))}})}join(e){var t,n;this.logger.trace("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Join with parameters:"})),e&&0===(null!==(t=e.channels)&&void 0!==t?t:[]).length&&0===(null!==(n=e.groups)&&void 0!==n?n:[]).length?this.logger.trace("PubNub","Ignoring 'join' announcement request."):this.presenceEventEngine?this.presenceEventEngine.join(e):this.heartbeat(Object.assign(Object.assign({channels:e.channels,channelGroups:e.groups},this._configuration.maintainPresenceState&&this.presenceState&&Object.keys(this.presenceState).length>0&&{state:this.presenceState}),{heartbeat:this._configuration.getPresenceTimeout()}),()=>{})}presenceReconnect(e){this.logger.trace("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Presence reconnect with parameters:"})),this.presenceEventEngine?this.presenceEventEngine.reconnect():this.heartbeat(Object.assign(Object.assign({channels:e.channels,channelGroups:e.groups},this._configuration.maintainPresenceState&&{state:this.presenceState}),{heartbeat:this._configuration.getPresenceTimeout()}),()=>{})}leave(e){var t,n,r;this.logger.trace("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Leave with parameters:"})),e&&0===(null!==(t=e.channels)&&void 0!==t?t:[]).length&&0===(null!==(n=e.groups)&&void 0!==n?n:[]).length?this.logger.trace("PubNub","Ignoring 'leave' announcement request."):this.presenceEventEngine?null===(r=this.presenceEventEngine)||void 0===r||r.leave(e):this.makeUnsubscribe({channels:e.channels,channelGroups:e.groups},()=>{})}leaveAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger.trace("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Leave all with parameters:"})),this.presenceEventEngine?this.presenceEventEngine.leaveAll(!!e.isOffline):e.isOffline||this.makeUnsubscribe({channels:e.channels,channelGroups:e.groups},()=>{})}presenceDisconnect(e){this.logger.trace("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Presence disconnect parameters:"})),this.presenceEventEngine?this.presenceEventEngine.disconnect(!!e.isOffline):e.isOffline||this.makeUnsubscribe({channels:e.channels,channelGroups:e.groups},()=>{})}grantToken(e,t){return o(this,void 0,void 0,function*(){throw new Error("Grant Token error: PAM module disabled")})}revokeToken(e,t){return o(this,void 0,void 0,function*(){throw new Error("Revoke Token error: PAM module disabled")})}get token(){return this.tokenManager&&this.tokenManager.getToken()}getToken(){return this.token}set token(e){this.tokenManager&&this.tokenManager.setToken(e),this.onAuthenticationChange&&this.onAuthenticationChange(e)}setToken(e){this.token=e}parseToken(e){return this.tokenManager&&this.tokenManager.parseToken(e)}grant(e,t){return o(this,void 0,void 0,function*(){throw new Error("Grant error: PAM module disabled")})}audit(e,t){return o(this,void 0,void 0,function*(){throw new Error("Grant Permissions error: PAM module disabled")})}get objects(){return this._objects}fetchUsers(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'fetchUsers' is deprecated. Use 'pubnub.objects.getAllUUIDMetadata' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:e&&"function"!=typeof e?e:{},details:"Fetch all User objects with parameters:"})),this.objects._getAllUUIDMetadata(e,t)})}fetchUser(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'fetchUser' is deprecated. Use 'pubnub.objects.getUUIDMetadata' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:e&&"function"!=typeof e?e:{uuid:this.userId},details:"Fetch".concat(e&&"function"!=typeof e?"":" current"," User object with parameters:")})),this.objects._getUUIDMetadata(e,t)})}createUser(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'createUser' is deprecated. Use 'pubnub.objects.setUUIDMetadata' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Create User object with parameters:"})),this.objects._setUUIDMetadata(e,t)})}updateUser(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'updateUser' is deprecated. Use 'pubnub.objects.setUUIDMetadata' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Update User object with parameters:"})),this.objects._setUUIDMetadata(e,t)})}removeUser(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'removeUser' is deprecated. Use 'pubnub.objects.removeUUIDMetadata' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:e&&"function"!=typeof e?e:{uuid:this.userId},details:"Remove".concat(e&&"function"!=typeof e?"":" current"," User object with parameters:")})),this.objects._removeUUIDMetadata(e,t)})}fetchSpaces(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'fetchSpaces' is deprecated. Use 'pubnub.objects.getAllChannelMetadata' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:e&&"function"!=typeof e?e:{},details:"Fetch all Space objects with parameters:"})),this.objects._getAllChannelMetadata(e,t)})}fetchSpace(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'fetchSpace' is deprecated. Use 'pubnub.objects.getChannelMetadata' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Fetch Space object with parameters:"})),this.objects._getChannelMetadata(e,t)})}createSpace(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'createSpace' is deprecated. Use 'pubnub.objects.setChannelMetadata' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Create Space object with parameters:"})),this.objects._setChannelMetadata(e,t)})}updateSpace(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'updateSpace' is deprecated. Use 'pubnub.objects.setChannelMetadata' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Update Space object with parameters:"})),this.objects._setChannelMetadata(e,t)})}removeSpace(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'removeSpace' is deprecated. Use 'pubnub.objects.removeChannelMetadata' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Remove Space object with parameters:"})),this.objects._removeChannelMetadata(e,t)})}fetchMemberships(e,t){return o(this,void 0,void 0,function*(){return this.objects.fetchMemberships(e,t)})}addMemberships(e,t){return o(this,void 0,void 0,function*(){return this.objects.addMemberships(e,t)})}updateMemberships(e,t){return o(this,void 0,void 0,function*(){return this.logger.warn("PubNub","'addMemberships' is deprecated. Use 'pubnub.objects.setChannelMembers' or 'pubnub.objects.setMemberships' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Update memberships with parameters:"})),this.objects.addMemberships(e,t)})}removeMemberships(e,t){return o(this,void 0,void 0,function*(){var n,r,s;{if(this.logger.warn("PubNub","'removeMemberships' is deprecated. Use 'pubnub.objects.removeMemberships' or 'pubnub.objects.removeChannelMembers' instead."),this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Remove memberships with parameters:"})),"spaceId"in e){const s=e,i={channel:null!==(n=s.spaceId)&&void 0!==n?n:s.channel,uuids:null!==(r=s.userIds)&&void 0!==r?r:s.uuids,limit:0};return t?this.objects.removeChannelMembers(i,t):this.objects.removeChannelMembers(i)}const i=e,a={uuid:i.userId,channels:null!==(s=i.spaceIds)&&void 0!==s?s:i.channels,limit:0};return t?this.objects.removeMemberships(a,t):this.objects.removeMemberships(a)}})}get channelGroups(){return this._channelGroups}get push(){return this._push}sendFile(e,t){return o(this,void 0,void 0,function*(){{if(!this._configuration.PubNubFile)throw new Error("Validation failed: 'PubNubFile' not configured or file upload not supported by the platform.");this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Send file with parameters:"}));const n=new en(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet,PubNubFile:this._configuration.PubNubFile,fileUploadPublishRetryLimit:this._configuration.fileUploadPublishRetryLimit,file:e.file,sendRequest:this.sendRequest.bind(this),publishFile:this.publishFile.bind(this),crypto:this._configuration.getCryptoModule(),cryptography:this.cryptography?this.cryptography:void 0})),r={error:!1,operation:I.PNPublishFileOperation,category:h.PNAcknowledgmentCategory,statusCode:0},s=e=>{e&&this.logger.debug("PubNub","Send file success. File shared with ".concat(e.id," ID."))};return n.process().then(e=>(r.statusCode=e.status,s(e),t?t(r,e):e)).catch(e=>{let n;throw e instanceof p?n=e.status:e instanceof M&&(n=e.toStatus(r.operation)),this.logger.error("PubNub",()=>({messageType:"error",message:new p("File sending error. Check status for details",n)})),t&&n&&t(n,null),new p("REST API request processing error. Check status for details",n)})}})}publishFile(e,t){return o(this,void 0,void 0,function*(){{if(!this._configuration.PubNubFile)throw new Error("Validation failed: 'PubNubFile' not configured or file upload not supported by the platform.");this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Publish file message with parameters:"}));const n=new $t(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet,crypto:this._configuration.getCryptoModule()})),r=e=>{e&&this.logger.debug("PubNub","Publish file message success. File message published with timetoken: ".concat(e.timetoken))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}listFiles(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"List files with parameters:"}));const n=new Yt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet})),r=e=>{e&&this.logger.debug("PubNub","List files success. There are ".concat(e.count," uploaded files."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}getFileUrl(e){var t;{const n=this.transport.request(new Jt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet})).request()),r=null!==(t=n.queryParameters)&&void 0!==t?t:{},s=Object.keys(r).map(e=>{const t=r[e];return Array.isArray(t)?t.map(t=>"".concat(e,"=").concat(U(t))).join("&"):"".concat(e,"=").concat(U(t))}).join("&");return"".concat(n.origin).concat(n.path,"?").concat(s)}}downloadFile(e,t){return o(this,void 0,void 0,function*(){{if(!this._configuration.PubNubFile)throw new Error("Validation failed: 'PubNubFile' not configured or file upload not supported by the platform.");this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Download file with parameters:"}));const n=new In(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet,PubNubFile:this._configuration.PubNubFile,cryptography:this.cryptography?this.cryptography:void 0,crypto:this._configuration.getCryptoModule()})),r=e=>{e&&this.logger.debug("PubNub","Download file success.")};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):yield this.sendRequest(n).then(e=>(r(e),e))}})}deleteFile(e,t){return o(this,void 0,void 0,function*(){{this.logger.debug("PubNub",()=>({messageType:"object",message:Object.assign({},e),details:"Delete file with parameters:"}));const n=new Qt(Object.assign(Object.assign({},e),{keySet:this._configuration.keySet})),r=t=>{t&&this.logger.debug("PubNub","Delete file success. Deleted file with ".concat(e.id," ID."))};return t?this.sendRequest(n,(e,n)=>{r(n),t(e,n)}):this.sendRequest(n).then(e=>(r(e),e))}})}time(e){return o(this,void 0,void 0,function*(){this.logger.debug("PubNub","Get service time.");const t=new Mn,n=e=>{e&&this.logger.debug("PubNub","Get service time success. Current timetoken: ".concat(e.timetoken))};return e?this.sendRequest(t,(t,r)=>{n(r),e(t,r)}):this.sendRequest(t).then(e=>(n(e),e))})}emitStatus(e){var t;null===(t=this.eventDispatcher)||void 0===t||t.handleStatus(e)}emitEvent(e,t){var n;this._globalSubscriptionSet&&this._globalSubscriptionSet.handleEvent(e,t),null===(n=this.eventDispatcher)||void 0===n||n.handleEvent(t),Object.values(this.eventHandleCapable).forEach(n=>{n!==this._globalSubscriptionSet&&n.handleEvent(e,t)})}set onStatus(e){this.eventDispatcher&&(this.eventDispatcher.onStatus=e)}set onMessage(e){this.eventDispatcher&&(this.eventDispatcher.onMessage=e)}set onPresence(e){this.eventDispatcher&&(this.eventDispatcher.onPresence=e)}set onSignal(e){this.eventDispatcher&&(this.eventDispatcher.onSignal=e)}set onObjects(e){this.eventDispatcher&&(this.eventDispatcher.onObjects=e)}set onMessageAction(e){this.eventDispatcher&&(this.eventDispatcher.onMessageAction=e)}set onFile(e){this.eventDispatcher&&(this.eventDispatcher.onFile=e)}addListener(e){this.eventDispatcher&&this.eventDispatcher.addListener(e)}removeListener(e){this.eventDispatcher&&this.eventDispatcher.removeListener(e)}removeAllListeners(){this.eventDispatcher&&this.eventDispatcher.removeAllListeners()}encrypt(e,t){this.logger.warn("PubNub","'encrypt' is deprecated. Use cryptoModule instead.");const n=this._configuration.getCryptoModule();if(!t&&n&&"string"==typeof e){const t=n.encrypt(e);return"string"==typeof t?t:d(t)}if(!this.crypto)throw new Error("Encryption error: cypher key not set");return this.crypto.encrypt(e,t)}decrypt(e,t){this.logger.warn("PubNub","'decrypt' is deprecated. Use cryptoModule instead.");const n=this._configuration.getCryptoModule();if(!t&&n){const t=n.decrypt(e);return t instanceof ArrayBuffer?JSON.parse((new TextDecoder).decode(t)):t}if(!this.crypto)throw new Error("Decryption error: cypher key not set");return this.crypto.decrypt(e,t)}encryptFile(e,t){return o(this,void 0,void 0,function*(){var n;if("string"!=typeof e&&(t=e),!t)throw new Error("File encryption error. Source file is missing.");if(!this._configuration.PubNubFile)throw new Error("File encryption error. File constructor not configured.");if("string"!=typeof e&&!this._configuration.getCryptoModule())throw new Error("File encryption error. Crypto module not configured.");if("string"==typeof e){if(!this.cryptography)throw new Error("File encryption error. File encryption not available");return this.cryptography.encryptFile(e,t,this._configuration.PubNubFile)}return null===(n=this._configuration.getCryptoModule())||void 0===n?void 0:n.encryptFile(t,this._configuration.PubNubFile)})}decryptFile(e,t){return o(this,void 0,void 0,function*(){var n;if("string"!=typeof e&&(t=e),!t)throw new Error("File encryption error. Source file is missing.");if(!this._configuration.PubNubFile)throw new Error("File decryption error. File constructor not configured.");if("string"==typeof e&&!this._configuration.getCryptoModule())throw new Error("File decryption error. Crypto module not configured.");if("string"==typeof e){if(!this.cryptography)throw new Error("File decryption error. File decryption not available");return this.cryptography.decryptFile(e,t,this._configuration.PubNubFile)}return null===(n=this._configuration.getCryptoModule())||void 0===n?void 0:n.decryptFile(t,this._configuration.PubNubFile)})}}An.decoder=new TextDecoder,An.OPERATIONS=I,An.CATEGORIES=h,An.Endpoint=$,An.ExponentialRetryPolicy=J.ExponentialRetryPolicy,An.LinearRetryPolicy=J.LinearRetryPolicy,An.NoneRetryPolicy=J.None,An.LogLevel=F;class Rn{constructor(e,t){this.decode=e,this.base64ToBinary=t}decodeToken(e){let t="";e.length%4==3?t="=":e.length%4==2&&(t="==");const n=e.replace(/-/gi,"+").replace(/_/gi,"/")+t,r=this.decode(this.base64ToBinary(n));return"object"==typeof r?r:void 0}}class Dn extends An{constructor(e){var t;const n=void 0!==e.subscriptionWorkerUrl,r=D(e),s=Object.assign(Object.assign({},r),{sdkFamily:"Web"});s.PubNubFile=c;const a=re(s,e=>{if(e.cipherKey)return new T({default:new j(Object.assign(Object.assign({},e),e.logger?{}:{logger:a.logger()})),cryptors:[new E({cipherKey:e.cipherKey})]})});let o,l;e.subscriptionWorkerLogVerbosity?e.subscriptionWorkerLogLevel=F.Debug:void 0===e.subscriptionWorkerLogLevel&&(e.subscriptionWorkerLogLevel=F.None),void 0!==e.subscriptionWorkerLogVerbosity&&a.logger().warn("Configuration","'subscriptionWorkerLogVerbosity' is deprecated. Use 'subscriptionWorkerLogLevel' instead."),a.getCryptoModule()&&(a.getCryptoModule().logger=a.logger()),o=new ae(new Rn(e=>R(i.decode(e)),u)),(a.getCipherKey()||a.secretKey)&&(l=new O({secretKey:a.secretKey,cipherKey:a.getCipherKey(),useRandomIVs:a.getUseRandomIVs(),customEncrypt:a.getCustomEncrypt(),customDecrypt:a.getCustomDecrypt(),logger:a.logger()}));let d,h=()=>{},p=()=>{},f=()=>{},g=()=>{};d=new N;let m=new de(a.logger(),s.transport);if(r.subscriptionWorkerUrl)try{const e=new A({clientIdentifier:a._instanceId,subscriptionKey:a.subscribeKey,userId:a.getUserId(),workerUrl:r.subscriptionWorkerUrl,sdkVersion:a.getVersion(),heartbeatInterval:a.getHeartbeatInterval(),announceSuccessfulHeartbeats:a.announceSuccessfulHeartbeats,announceFailedHeartbeats:a.announceFailedHeartbeats,workerOfflineClientsCheckInterval:s.subscriptionWorkerOfflineClientsCheckInterval,workerUnsubscribeOfflineClients:s.subscriptionWorkerUnsubscribeOfflineClients,workerLogLevel:s.subscriptionWorkerLogLevel,tokenManager:o,transport:m,logger:a.logger()});p=t=>e.onPresenceStateChange(t),h=t=>e.onHeartbeatIntervalChange(t),f=t=>e.onTokenChange(t),g=t=>e.onUserIdChange(t),m=e,r.subscriptionWorkerUnsubscribeOfflineClients&&window.addEventListener("pagehide",t=>{t.persisted||e.terminate()},{once:!0})}catch(e){a.logger().error("PubNub",()=>({messageType:"error",message:e}))}else n&&a.logger().warn("PubNub","SharedWorker not supported in this browser. Fallback to the original transport.");const b=new ue({clientConfiguration:a,tokenManager:o,transport:m});if(super({configuration:a,transport:b,cryptography:d,tokenManager:o,crypto:l}),this.File=c,this.onHeartbeatIntervalChange=h,this.onAuthenticationChange=f,this.onPresenceStateChange=p,this.onUserIdChange=g,m instanceof A){m.emitStatus=this.emitStatus.bind(this);const e=this.disconnect.bind(this);this.disconnect=t=>{m.disconnect(),e()}}(null===(t=e.listenToBrowserNetworkEvents)||void 0===t||t)&&(window.addEventListener("offline",()=>{this.networkDownDetected()}),window.addEventListener("online",()=>{this.networkUpDetected()}))}networkDownDetected(){this.logger.debug("PubNub","Network down detected"),this.emitStatus({category:Dn.CATEGORIES.PNNetworkDownCategory}),this._configuration.restore?this.disconnect(!0):this.destroy(!0)}networkUpDetected(){this.logger.debug("PubNub","Network up detected"),this.emitStatus({category:Dn.CATEGORIES.PNNetworkUpCategory}),this.reconnect()}}return Dn.CryptoModule=T,Dn}()},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,g=!1,m=!1,b=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,E||(E=!0,C());else{var t=r(u);null!==t&&M(S,t.startTime-e)}}var C,E=!1,P=-1,O=5,N=-1;function j(){return!!b||!(t.unstable_now()-N<O)}function T(){if(b=!1,E){var e=t.unstable_now();N=e;var n=!0;try{e:{g=!1,m&&(m=!1,v(P),P=-1),f=!0;var i=p;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&j());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===r(c)&&s(c),w(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&M(S,l.startTime-e),n=!1}}break e}finally{h=null,p=i,f=!1}n=void 0}}finally{n?C():E=!1}}}if("function"===typeof k)C=function(){k(T)};else if("undefined"!==typeof MessageChannel){var x=new MessageChannel,_=x.port2;x.port1.onmessage=T,C=function(){_.postMessage(null)}}else C=function(){y(T,0)};function M(e,n){P=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(m?(v(P),P=-1):m=!0,M(S,i-a))):(e.sortIndex=o,n(c,e),g||f||(g=!0,E||(E=!0,C()))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".0c790f51.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="tapp-react:";n.l=(r,s,i,a)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.p="/tapp/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,i,[a,o,l]=r,c=0;if(a.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunktapp_react=self.webpackChunktapp_react||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n(391),r=n(816),s=n.n(r);const i={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a;const o=new Uint8Array(16);const l=[];for(let n=0;n<256;++n)l.push((n+256).toString(16).slice(1));function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}function u(e,t,n){var r,s,i,l;const u=null!==(r=null!==(s=(e=e||{}).random)&&void 0!==s?s:null===(i=(l=e).rng)||void 0===i?void 0:i.call(l))&&void 0!==r?r:function(){if(!a){if("undefined"===typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(o)}();if(u.length<16)throw new Error("Random bytes length must be >= 16");if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError("UUID byte range ".concat(n,":").concat(n+15," is out of buffer bounds"));for(let e=0;e<16;++e)t[n+e]=u[e];return t}return c(u)}const d=function(e,t,n){return!i.randomUUID||t||e?u(e,t,n):i.randomUUID()},h=["M","R","W","S"],p=["2C1","2C2","2C3","2R1","2R2","2E1","1M1"],f={Knight:"W",Archer:"R",Mage:"M",Warlock:"S"},g={Knight:"#ffd966",Archer:"#b6d7a8",Mage:"#6fa8dc",Warlock:"#c27ba0"},m={Knight:"#ac881d",Archer:"#649051",Mage:"#2c679c",Warlock:"#882d5d"},b=["Knight","Archer","Mage","Warlock"],y=[[0,0,-1,2],[2,-1,0,0],[0,20,0,-10]],v=[["Royal Aura: Ignore true damage dealt\nby Magic Weapons.","Castle Armory: At the start of the game,\nand at each Intermission, gain an Armor Token."],["Magical Quiver: Start the game with a\nSpeed Token and a token of your choice.","Nimble Feet: Once per combat, dodge the\ndamage of an attack of your choice."],["Hoarding: At the start of the game,\ngain a random Game and Combat Token.","Enchanted Lifeline: Once per combat,\ninstead of dying block all damage until\nyour next turn. Live on 15."],["Overconfidence: While at or above 5 Life Points,\ngain +2 attack, and below it, gain +2 armor.","Demonic Essence: When you use a Soul weapon,\nheal for a third of the damage of the weapon."],"Empowered Strikes: After you use a card\nfrom your class, your next hit\ndeals +5 damage."],k={MC1:"Piercing Wand",MC2:"Mushroom on a Stick",MC3:"Scepter of Wisdom",MR1:"Ethereal Enhancements",MR2:"Conjuring Staff",ME1:"Glass Orb",MM1:"Mindbreaker",RC1:"Shurikens",RC2:"Throwing Spear",RC3:"Compound Crossbow",RR1:"Luminecent Shotter",RR2:"Terrain Bow",RE1:"Blowdarts",RM1:"Stormshot",WC1:"Copper Ward",WC2:"Smithing Hammer",WC3:"Scimitar of Judgement",WR1:"Thick Cleaver",WR2:"Heavy Axe",WE1:"Sentinel's Sword",WM1:"Vulcan's Greatsword",SC1:"Explosive Darkblade",SC2:"Firespit Scythe",SC3:"Soul Barrier",SR1:"Shadow Dagger",SR2:"Demonic Boomerang",SE1:"Dual Scythes",SM1:"Reaper of Souls",JJ1:"Incantation"},w=["Attack","Armor","Speed","Health","Arcane","Mushroom","Recycle","Life"],S=["#b50000","#ffa444","#7fcf7e","#d64545","#6dc5d6","#ff6969","#6688ff","#ffdd61"],C=["King's Blessing","Super Speed","Arcanography","Ultimate Confrontation"];class E{constructor(e,t){this.id=e,this.name=t,this.uuid=null,this.joined=!1,this.online=!1,this.ingame=!1,this.class=0,this.ability="Empowered Strikes",this.health=100,this.attack=0,this.armor=0,this.speed=0,this.life=10,this.hand=[],this.tokens=[0,0,0,0,0,0,0,0],this.protections=[],this.pos=0}}class P{constructor(e,t){this.card=[e,t],this.x=0,this.y=0,this.side=0,this.dupe=!1,this.skip=!1,this.image=new Image;const n="/tapp";this.image.src=e&&t?"".concat(n,"/images/tapp/").concat(e).concat(t,".webp"):"".concat(n,"/images/back.webp"),this.backImage=new Image,this.backImage.src="".concat(n,"/images/back.webp")}grab(e,t){const n=t.players.length,r=t.hand,s=r>-1?r:0;let i=e-s+1;e-s<0&&(i+=n);let a=[[1,1,1,1,1,1,1],[0,1,1,1,2,2],[1,0,1,2,1,2],[0,1,1,1,2,2]],o=0,l=0;for(;o<i;){let e=a[l][n-2];if(o+e>=i)break;o+=e,l++}this.side=l+1}}class O{constructor(e){this.players=[],this.deck=[],this.played=[[],[]],this.hand=-1,this.recycle=[-1,0,0],this.logs=[],this.updateCallback=e,this.target=0,this.screen=0,this.tempTokens=null,this.clickToken=null,this.selectedCard=null,this.clickBig=!1,this.clickedPlayer=null}log(e){this.logs.push(e),this.updateCallback&&this.updateCallback()}targetId(){for(let e=0;e<this.players.length;e++)if(this.players[e].pos===this.target)return e;return-1}nextTarget(){this.target+=1,this.target===this.players.length&&(this.target-=this.players.length),this.hand>-1&&this.players[this.hand]&&this.target===this.players[this.hand].pos&&(this.target+=1),this.target===this.players.length&&(this.target-=this.players.length)}token(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e,s=String(t);switch(s){case"0":r.attack+=1;break;case"1":r.armor+=1;break;case"2":r.speed+=20;break;case"3":r.health+=10,r.tokens[3]+=1;break;case"4":r.tokens[0]+=1;break;case"5":r.tokens[1]+=1;break;case"6":r.tokens[2]+=1;break;case"7":r.life+=1}if(n){const e=w[parseInt(s)];e&&this.log("> ".concat(m[r.class]).concat(r.name,"#000000 gained a ").concat(e," token"))}}checkBarrier(e){return!!e.protections.includes("SC3")&&(e.protections.splice(e.protections.indexOf("SC3"),1),this.log("> ".concat(m[e.class]).concat(e.name,"'s #000000 Soul Barrier blocked the ability!")),!0)}checkBlock(e){if(e.protections.includes("WR1"))e.protections.splice(e.protections.indexOf("WR1"),1),this.log("> ".concat(m[e.class]).concat(e.name,"'s #000000 Thick Cleaver blocked the attack!"));else if(e.protections.includes("EL")&&!e.protections.includes("ELD"))this.log("> ".concat(m[e.class]).concat(e.name,"'s #000000 Enchanted Lifeline protected them!"));else{if(!e.protections.includes("JA1"))return!1;e.protections.splice(e.protections.indexOf("JA1"),1),this.log("> ".concat(m[e.class]).concat(e.name,"'s #000000 Super Speed dodged the attack!"))}return!0}dmg(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this.checkBlock(n)){"Royal Aura"===n.ability&&"M"===r[0]&&(s=!1);let i=e-(s?0:n.armor)+t.attack;for(i+=f[t.class]===r[0]?2:0,n.protections.includes("RR1")&&n.speed>t.speed&&(i=Math.floor(i/2-(s?0:n.armor)/2)),n.health-=Math.max(i,0);t.protections.includes("ES");)t.attack-=5,t.protections.splice(t.protections.indexOf("ES"),1);if("S"===r[0]&&"Demonic Essence"===t.ability){let n=e+t.attack+2;t.health+=Math.floor(n/3)}"Nimble Feet"===n.ability&&n.protections[0]>-1&&(n.protections[0]=Math.max(i,0))}for(t.protections.includes("MC3")&&(t.attack-=1,t.armor-=1,t.speed-=20,t.protections.splice(t.protections.indexOf("MC3"),1));n.protections.includes("MR1");){if(!this.checkBarrier(t)&&!this.checkBlock(t)){let e=0;n.hand.forEach(t=>{"M"===t.card[0]&&e++}),e>0&&(t.health-=3)}n.protections.splice(n.protections.indexOf("MR1"),1)}t.protections.includes("WC1")&&(t.armor-=4,t.protections.splice(t.protections.indexOf("WC1"),1));const i=[];t.protections.forEach((e,n)=>{"string"===typeof e&&(e.includes("WC2")?(t.armor+=parseInt(e.slice(3)),i.push(n)):e.includes("RR2")?(t.armor-=parseInt(e.slice(3)),i.push(n)):e.includes("SC1")&&(this.checkBarrier(t)||this.checkBlock(t)||(t.health-=4,i.push(n))))});for(let a=i.length-1;a>=0;a--)t.protections.splice(i[a],1);t.protections.includes("EL")&&t.protections.push("ELD"),t.protections.includes("WR1")&&t.protections.splice(t.protections.indexOf("WR1"),1),t.protections.includes("RR1")&&t.protections.splice(t.protections.indexOf("RR1"),1)}ability(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=e[0]+e[1];if(!s){const e=m[t.class],s=m[n.class];t===n?this.log("> ".concat(e).concat(t.name,"#000000 hit themself with ").concat(k[i])):"MC2"===i&&"E"===r?this.log("".concat(e).concat(t.name,"#000000 ate their Mushroom on a Stick")):"JJ1"===i?this.log("".concat(e).concat(t.name,"#000000 used ").concat(C[b.indexOf(t.class)])):this.log("".concat(e).concat(t.name,"#000000 hit ").concat(s).concat(n.name,"#000000 with ").concat(k[i]))}if("M"===e[0]){if("C1"===e[1])this.dmg(9+(this.checkBarrier(n)?0:n.armor),t,n,e,!0);else if("C2"===e[1])"E"===r?t.health+=10:this.dmg(12,t,n,e,!0);else if("C3"===e[1])this.dmg(9,t,n,e,!0),t.attack+=1,t.armor+=1,t.speed+=20,t.protections.push("MC3");else if("R1"===e[1])this.dmg(12,t,n,e,!0),t.protections.push("MR1");else if("R2"===e[1]){let s=null;for(let e=1;e<this.played[0].length;e++){let t=this.played[0][e];if("MR2"!==t.card[0]+t.card[1]&&!t.skip){s=t;break}}if(!s)return void this.dmg(11,t,n,e,!0);"E"!==r&&this.dmg(11,t,n,e,!0);const i=s.card[0]+s.card[1];if("MC1"===i)this.checkBarrier(n)||(n.health-=n.armor);else if("ME1"===i)this.ability(s.card,t,n,r,!0);else if("WC2"===i)this.checkBarrier(n)||(n.protections.push("WC2"+n.armor),n.armor=0,"Royal Aura"===n.ability&&(n.health-=n.armor));else if("WR2"===i)this.checkBarrier(n)||(n.health-=2*Math.floor(t.armor/2));else if("WE1"===i)this.players.forEach(e=>{e===t||this.checkBarrier(e)||(e.health-=5+Math.floor(t.armor/2))});else if("RC1"===i)this.players.forEach(r=>{r!==n&&r.speed<t.speed&&!this.checkBarrier(r)&&this.dmg(11,t,r,e,!0)});else if("RC2"===i)this.checkBarrier(n)||(n.health-=Math.floor(t.speed/15));else if("RC3"===i)this.checkBarrier(n)||(n.health-=11+t.attack+("Mage"===t.class?2:0));else if("RE1"===i){if(!this.checkBarrier(n)){"Royal Aura"===n.ability&&(n.health-=n.armor);for(let e=0;e<Math.floor(t.speed/30)+1;e++)n.health-=11+t.attack+("Mage"===t.class?2:0)}}else if("RM1"===i)this.players.forEach(e=>{e===t||this.checkBarrier(e)||(e.health-=2+Math.floor(t.speed/10))});else if("SC2"===i)this.players.forEach(n=>{n===t||this.checkBarrier(n)||this.dmg(3,t,n,e,!0)});else if("SR1"===i)t.health+=Math.floor((11+t.attack+("Mage"===t.class?2:0))/2);else if("SR2"===i)11+t.attack+("Mage"===t.class?2:0)>14&&this.players.forEach(n=>{n===t||this.checkBarrier(n)||this.dmg(4,t,n,e,!0)});else if("SE1"===i)this.checkBarrier(n)||this.dmg(11,t,this.players[parseInt(r)],e,!0);else{let e=n.health;this.ability(s.card,t,n,r,!0),n.health=e}}else if("E1"===e[1]){const e=r.split(";").slice(0,-1);this.players.forEach(e=>{e.protections.includes("SC1")&&(this.checkBarrier(n)||this.checkBlock(n)||(n.health-=4,e.protections.splice(e.protections.indexOf("SC1"),1)))}),e.forEach(e=>{const t=e.split(","),n=parseInt(t[0]);if(isNaN(n))return;const r=this.players[n];if(this.checkBarrier(r))return;const s=t[1],i=r.hand.findIndex(e=>e.card[0]+e.card[1]===s);if(i>-1){const e=r.hand[i];e.x=0,e.y=0,e.image.src="".concat("/tapp","/images/tapp/").concat(e.card[0]).concat(e.card[1],".webp"),this.played[0].push(e),this.ability(e.card,r,r,t[2]),r.hand.splice(i,1)}})}else if("M1"===e[1]&&(this.dmg(17,t,n,e,!0),n!==t&&n.hand.length>0&&!this.checkBarrier(n))){const e=parseInt(r)||0;if(n.hand[e]){const r=n.hand.splice(e,1)[0];r.grab(t.id,this),t.hand.push(r)}}}else if("W"===e[0])if("C1"===e[1])this.dmg(11,t,n,e),t.armor+=4,t.protections.push("WC1");else if("C2"===e[1])this.checkBarrier(n)||(n.protections.push("WC2"+n.armor),n.armor=0),this.dmg(12,t,n,e);else if("C3"===e[1])this.dmg(11,t,n,e),t.health+=t.armor;else if("R1"===e[1])this.dmg(12,t,n,e),t.protections.push("WR1");else if("R2"===e[1]){let r=this.checkBarrier(n)?0:2*Math.floor(t.armor/2);this.dmg(13+r,t,n,e)}else"E1"===e[1]?(this.dmg(7,t,n,e),this.players.forEach(e=>{if(e!==t&&!this.checkBarrier(e)&&!this.checkBlock(e))for(e.health-=5+Math.floor(e.armor/2);e.protections.includes("MR1");){if(!this.checkBarrier(t)&&!this.checkBlock(t)){let n=0;e.hand.forEach(e=>{"M"===e.card[0]&&n++}),n>0&&(t.health-=3)}e.protections.splice(e.protections.indexOf("MR1"),1)}})):"M1"===e[1]&&(this.dmg(18,t,n,e),t.health+=10+t.armor);else if("R"===e[0])if("C1"===e[1])this.dmg(10,t,n,e),this.players.forEach(r=>{r!==n&&r.speed<t.speed&&!this.checkBarrier(r)&&this.dmg(10,t,r,e)});else if("C2"===e[1]){let r=this.checkBarrier(n)?0:Math.floor(t.speed/15);this.dmg(11+r,t,n,e)}else if("C3"===e[1]){let r=t.attack+("Archer"===t.class?8:6);this.dmg(6+(this.checkBarrier(n)?0:r),t,n,e)}else if("R1"===e[1])this.dmg(12,t,n,e),t.protections.push("RR1");else if("R2"===e[1]){let r=Math.floor(t.speed/10);this.dmg(12,t,n,e),t.armor+=r,t.protections.push("RR2"+r)}else if("E1"===e[1])if(this.checkBarrier(n))this.dmg(6,t,n,e);else for(let a=0;a<Math.floor(Math.max(t.speed,0)/30)+2;a++)this.dmg(6,t,n,e,!0);else"M1"===e[1]&&(this.dmg(19,t,n,e),this.players.forEach(e=>{if(e!==t&&!this.checkBarrier(e)&&!this.checkBlock(e))for(e.health-=2+Math.floor(t.speed/10);e.protections.includes("MR1");){if(!this.checkBarrier(t)&&!this.checkBlock(t)){let n=0;e.hand.forEach(e=>{"M"===e.card[0]&&n++}),n>0&&(t.health-=3)}e.protections.splice(e.protections.indexOf("MR1"),1)}}));else if("S"===e[0])if("C1"===e[1])this.dmg(12,t,n,e),t.protections.push("SC1");else if("C2"===e[1])this.dmg(11,t,n,e),this.players.forEach(e=>{if(e!==t&&!this.checkBarrier(e)&&!this.checkBlock(e))for(e.health-=3;e.protections.includes("MR1");){if(!this.checkBarrier(t)&&!this.checkBlock(t)){let n=0;e.hand.forEach(e=>{"M"===e.card[0]&&n++}),n>0&&(t.health-=3)}e.protections.splice(e.protections.indexOf("MR1"),1)}});else if("C3"===e[1])this.dmg(12,t,n,e),t.protections.push("SC3");else if("R1"===e[1]){let r=15+t.attack+("Warlock"===t.class?2:0);t.health+=Math.floor(r/2),this.dmg(15,t,n,e)}else if("R2"===e[1])14+t.attack+("Warlock"===t.class?2:0)>14&&this.players.forEach(e=>{e===t||this.checkBarrier(e)||this.checkBlock(e)||(e.health-=4)}),this.dmg(14,t,n,e);else if("E1"===e[1]){this.dmg(8,t,n,e,!0);const s=this.players[parseInt(r)];s&&!this.checkBarrier(s)&&(this.dmg(8,t,s,e,!0),this.log("> ".concat(m[t.class]).concat(t.name,"#000000 hit ").concat(m[s.class]).concat(s.name,"#000000 with Dual Scythes")))}else"M1"===e[1]&&(this.dmg(22,t,n,e),this.players.forEach(e=>{e===t||this.checkBarrier(e)||(e.life-=1,"Overconfidence"===e.ability&&e.life<5&&e.life+1>4&&(e.attack-=2,e.armor+=2))}));if("J"===e[0])if("Knight"===t.class)t.health+=15,t.attack+=2,t.protections.push("JK1");else if("Archer"===t.class)t.protections.push("JA1"),t.protections.push("JA1");else if("Mage"===t.class){const e=r.split(";");this.token(t,parseInt(e[0])),this.token(t,parseInt(e[1]))}else"Warlock"===t.class&&(this.players.forEach(e=>e.health=50),t.attack+=1);t.health=Math.min(100+10*t.tokens[3],t.health),f[t.class]===e[0]&&"Empowered Strikes"===t.ability&&(t.attack+=5,t.protections.push("ES")),"Enchanted Lifeline"===n.ability&&n.health<=0&&!n.protections.includes("EL")&&(n.health=15,n.protections.push("EL"),this.log("".concat(m[n.class]).concat(n.name,"#000000 Enchanted Lifeline saved them!")))}processMessage(e){if(e){if(e.startsWith("User")){const t=e.slice(4).split(";"),n=parseInt(t.shift()),r=this.players[n];if(!r)return;r.ingame=!0,r.name=t.shift();const s=parseInt(t.shift());for(r.class=b[s],r.armor=parseInt(t.shift()),r.speed=parseInt(t.shift()),r.attack=parseInt(t.shift()),r.ability=t.shift(),r.health=100,"Nimble Feet"===r.ability&&r.protections.push(0);t.length>0;){let e=t.shift();void 0!==e&&""!==e&&this.token(r,e,!1)}const i=this.players.filter(e=>e.ingame);i.sort((e,t)=>t.speed-e.speed),i.forEach((e,t)=>e.pos=t),this.hand>-1&&(this.target=this.players[this.hand].pos,this.nextTarget())}else if(e.startsWith("Grab")){const t=e.slice(4).split(";"),n=parseInt(t[0]),r=parseInt(t[1]),s=this.players[n];if(0===r){if(this.deck.length>0){const e=this.deck.pop();e.grab(n,this),s.hand.push(e)}}else if(this.played[1].length>r-1){const e=this.played[1][r-1];if(e)if(e.grab(n,this),s.hand.push(e),this.deck.length>0){const e=this.deck.pop();e.image.src="".concat("/tapp","/images/tapp/").concat(e.card[0]).concat(e.card[1],".webp"),this.played[1][r-1]=e}else this.played[1][r-1]=null}this.recycle[0]>-1&&(this.recycle[2]+=1,this.recycle[1]<=this.recycle[2]&&(this.recycle=[-1,0,0],this.log("> ".concat(m[s.class]).concat(s.name," #000000finished using their Recycle Token."))))}else if(e.startsWith("Play")){const t=e.slice(4).split(";"),n=parseInt(t[0]),r=t[1],s=t[2],i=t.slice(3).join(";"),a=this.players[n],o=a.hand.findIndex(e=>e.card[0]+e.card[1]===r);if(o>-1){const e=a.hand[o];if(e.x=0,e.y=0,e.image.src="".concat("/tapp","/images/tapp/").concat(e.card[0]).concat(e.card[1],".webp"),"D"===s)e.skip=!0,this.played[0].unshift(e),this.log("".concat(m[a.class]).concat(a.name,"#000000 discarded a ").concat(k[r])),this.recycle[0]>-1&&(this.recycle[1]+=1);else{this.played[0].unshift(e);const t=this.players[parseInt(s)];t&&this.ability(e.card,a,t,i)}a.hand.splice(o,1)}}else if(e.startsWith("Tokn")){const t=e.slice(4).split(";"),n=t[0],r=parseInt(t[1]),s=this.players[r];if("P"===n){const e=parseInt(t[2]);if(0===e){const e=t[3],n=t[4],i=new P(e,n);i.dupe=!0,i.grab(r,this),s.hand.push(i),s.tokens[0]-=1}else 1===e?(s.health+=20,s.tokens[1]-=1,s.health=Math.min(100+10*s.tokens[3],s.health)):2===e?(s.tokens[2]-=1,this.recycle=[r,0,0]):3===e&&(s.health+=parseInt(t[3]),s.protections[0]=-1);e<3&&this.log("> ".concat(m[s.class]).concat(s.name,"#000000 used a ").concat(w[e+4]," token"))}else"G"===n&&(r===this.hand&&1===this.screen&&(this.screen=2),this.token(s,t[2]))}else if(e.startsWith("Shfl")){this.deck=[];const t=e.split(";;");t[0].slice(4).split(";").filter(e=>e).map(e=>e.split(",")).forEach(e=>this.deck.push(new P(e[0],e[1]))),this.played=[[],[]];for(let e=0;e<3;e++){const e=this.deck.pop();e&&(e.image.src="".concat("/tapp","/images/tapp/").concat(e.card[0]).concat(e.card[1],".webp"),this.played[1].push(e))}const n=[...this.players];if(n.sort((e,t)=>e.health===t.health?t.speed-e.speed:t.health-e.health),n.forEach((e,t)=>e.pos=t),this.players.forEach(e=>{for(e.health=100+10*e.tokens[3],e.life-=2*e.pos,"Overconfidence"===e.ability&&e.life<5&&e.life+2*e.pos>4&&(e.attack-=2,e.armor+=2),e.protections.includes("JK1")&&(e.attack-=2),"Castle Armory"===e.ability&&(e.armor+=1),e.protections.includes("MC3")&&(e.attack-=1,e.armor-=1,e.speed-=20),e.protections.includes("WC1")&&(e.armor-=4);e.protections.includes("ES");)e.attack-=5,e.protections.splice(e.protections.indexOf("ES"),1);e.protections.forEach(t=>{"string"===typeof t&&t.includes("WC2")&&(e.armor+=parseInt(t.slice(3))),"string"===typeof t&&t.includes("RR2")&&(e.armor-=parseInt(t.slice(3)))}),e.protections=[],"Nimble Feet"===e.ability&&e.protections.push(0)}),this.log("The deck was reshuffled!"),this.players[this.hand]&&"Knight"!==this.players[this.hand].class){const e=t[1].split(";")[this.hand];this.screen=1,this.tempTokens=e.split(",")}else this.screen=2;this.players.forEach((e,n)=>{if("Knight"===e.class){const r=t[1].split(";")[n].split(",")[0];this.token(e,r)}})}else if(e.startsWith("Bnty")){const t=e.slice(4).split(";"),n=parseInt(t[0]),r=parseInt(t[1]),s=parseInt(t[2]);if(this.deck[r]){const e=this.deck[r];e.grab(n,this),this.players[n].hand.push(e),this.deck[r]=null}if(s===this.players.length-1){const e=[...this.players];e.sort((e,t)=>t.speed-e.speed),e.forEach((e,t)=>e.pos=t),this.hand>-1&&(this.target=this.players[this.hand].pos,this.nextTarget()),this.deck=this.deck.filter(e=>null!==e),this.screen=0}}this.updateCallback&&this.updateCallback()}}}const N=(()=>{if("undefined"!==typeof window&&window.sessionStorage){let e=window.sessionStorage.getItem("tapp_uuid");return e||(e=d(),window.sessionStorage.setItem("tapp_uuid",e)),e}return d()})(),j=new(s())({publishKey:"pub-c-6d5bcb69-9b5e-4028-8d71-16d663175bc2",subscribeKey:"sub-c-0253bc9a-906b-11ec-918e-02d5075437d9",uuid:N});var T=n(579);const x=t=>{let{onJoin:n,onCreate:r}=t;const[s,i]=(0,e.useState)("MAIN"),[a,o]=(0,e.useState)(""),[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)(2);return"CREATE"===s?(0,T.jsx)("div",{className:"screen menu",children:(0,T.jsxs)("div",{className:"menu-box",children:[(0,T.jsx)("h1",{style:{fontSize:"clamp(2.5rem, 10vw, 4rem)",margin:0},children:"CREATE GAME"}),(0,T.jsxs)("p",{style:{fontSize:"clamp(1.2rem, 5vw, 2rem)"},children:["Players: ",u]}),(0,T.jsxs)("div",{style:{margin:"20px",display:"flex",gap:"20px",justifyContent:"center"},children:[(0,T.jsx)("button",{onClick:()=>d(2),style:{minWidth:"60px",fontSize:"clamp(1.2rem, 4vw, 1.5rem)"},children:"2"}),(0,T.jsx)("button",{onClick:()=>d(3),style:{minWidth:"60px",fontSize:"clamp(1.2rem, 4vw, 1.5rem)"},children:"3"}),(0,T.jsx)("button",{onClick:()=>d(4),style:{minWidth:"60px",fontSize:"clamp(1.2rem, 4vw, 1.5rem)"},children:"4"})]}),(0,T.jsxs)("button",{onClick:()=>c(!l),style:{fontSize:"clamp(1rem, 4vw, 1.5rem)",marginBottom:"20px",width:"100%",maxWidth:"300px",padding:"10px"},children:["Incantations: ",l?"On":"Off"]}),(0,T.jsx)("br",{}),(0,T.jsxs)("div",{style:{display:"flex",gap:"20px",justifyContent:"center"},children:[(0,T.jsx)("button",{onClick:()=>r(u,l),style:{fontSize:"clamp(1.2rem, 4vw, 1.5rem)"},children:"Start"}),(0,T.jsx)("button",{onClick:()=>i("MAIN"),style:{fontSize:"clamp(1.2rem, 4vw, 1.5rem)"},children:"Back"})]})]})}):(0,T.jsx)("div",{className:"screen menu",children:(0,T.jsxs)("div",{className:"menu-box",children:[(0,T.jsx)("h1",{style:{fontSize:"clamp(4rem, 15vw, 6rem)",margin:"0 0 20px 0"},children:"TAPP"}),(0,T.jsxs)("div",{style:{margin:"20px 0"},children:[(0,T.jsx)("label",{style:{fontSize:"clamp(1.2rem, 4vw, 1.5rem)"},children:"GAME ID:"}),(0,T.jsx)("br",{}),(0,T.jsx)("input",{value:a,onChange:e=>o(e.target.value),maxLength:4,style:{fontSize:"clamp(1.5rem, 5vw, 2rem)",width:"80%"}})]}),(0,T.jsx)("button",{onClick:()=>n(a),style:{fontSize:"clamp(1.2rem, 4vw, 1.5rem)"},children:"Join Game"}),(0,T.jsx)("br",{}),(0,T.jsx)("br",{}),(0,T.jsx)("button",{onClick:()=>i("CREATE"),style:{fontSize:"clamp(0.8rem, 3vw, 1rem)",opacity:.8},children:"Create New"})]})})};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function M(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}function I(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){I(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const D=e=>{let{x:t,y:n,w:r,h:s,color:i,children:a,style:o}=e;return(0,T.jsx)("div",{style:R({position:"absolute",left:"".concat(t,"%"),top:"".concat(n,"%"),width:"".concat(r,"%"),height:"".concat(s,"%"),backgroundColor:"#000000",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center"},o),children:(0,T.jsx)("div",{style:{width:"calc(100% - 6px)",height:"calc(100% - 6px)",backgroundColor:i,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",overflow:"hidden",position:"relative"},children:a})})},F=t=>{let{onConfirm:n}=t;const[r,s]=(0,e.useState)(0),[i,a]=(0,e.useState)("Player"),[o,l]=(0,e.useState)(0),[c,u]=(0,e.useState)(0),[d,h]=(0,e.useState)(0),p=2===c?"Empowered Strikes":v[r][c].split(":")[0];let f=y[0][r]+o;"Overconfidence"===p&&(f+=2);const m=y[1][r];let k=2-o+m;"Castle Armory"===p&&(k+=1);const S=y[2][r],C=30-15*Math.abs(o)+S;return(0,T.jsxs)("div",{className:"screen class-select",style:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},children:[(0,T.jsx)("div",{style:{position:"absolute",left:"20%",top:"16%",width:"20%",height:"14%",backgroundColor:"#c8f0ff",border:"3px solid #000",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,T.jsx)("span",{style:{fontSize:"clamp(1rem, 3vw, 2rem)"},children:"Class"})}),(0,T.jsx)(D,{x:20,y:52,w:20,h:55,color:"#c8f0ff",children:b.map((e,t)=>(0,T.jsx)("div",{onClick:()=>{s(t),u(0)},style:{width:"83.33%",height:"18%",backgroundColor:g[e],border:"3px solid #000",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:r===t?"#ff0000":"#000000",fontSize:"clamp(0.8rem, 2.5vw, 1.5rem)",textAlign:"center"},children:e},e))}),(0,T.jsx)("div",{style:{position:"absolute",left:"40%",top:"16%",width:"16.66%",height:"14%",backgroundColor:"#c8f0ff",border:"3px solid #000",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,T.jsx)("span",{style:{fontSize:"clamp(1rem, 3vw, 2rem)"},children:"Attack"})}),(0,T.jsx)(D,{x:40,y:52,w:16.66,h:55,color:"#c8f0ff",children:[2,1,0,-1,-2].map(e=>(0,T.jsx)("div",{onClick:()=>l(e),style:{width:"85.7%",height:"13%",backgroundColor:"#ffffff",border:"3px solid #000",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:o===e?"#ff0000":"#000000",fontSize:"clamp(1rem, 3vw, 1.5rem)"},children:e},e))}),(0,T.jsx)("div",{style:{position:"absolute",left:"70%",top:"16%",width:"40%",height:"14%",backgroundColor:"#c8f0ff",border:"3px solid #000",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,T.jsx)("span",{style:{fontSize:"clamp(1rem, 3vw, 2rem)"},children:"Ability"})}),(0,T.jsx)(D,{x:70,y:52,w:40,h:55,color:"#c8f0ff",children:[v[r][0],v[r][1],v[4]].map((e,t)=>(0,T.jsx)("div",{onClick:()=>u(t),style:{width:"92.5%",height:"28%",backgroundColor:"#ffffff",border:"3px solid #000",padding:"5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",cursor:"pointer",color:c===t?"#ff0000":"#000000",fontSize:"clamp(0.6rem, 1.4vw, 1.2rem)",whiteSpace:"pre-wrap",lineHeight:"1.1",overflow:"hidden"},children:e},t))}),1===r&&0===c&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{style:{position:"absolute",left:"95%",top:"19.5%",width:"9%",height:"7%",backgroundColor:"#c8f0ff",border:"3px solid #000",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"clamp(0.6rem, 1.5vw, 1rem)"},children:"Bonus"}),w.map((e,t)=>(0,T.jsx)("div",{onClick:()=>h(t),style:{position:"absolute",left:"95%",top:"".concat(27.5+7*t,"%"),width:"9%",height:"6%",backgroundColor:"#000",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:(0,T.jsx)("div",{style:{width:"calc(100% - 6px)",height:"calc(100% - 6px)",backgroundColor:"#fff",color:d===t?"#ff0000":"#000000",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"clamp(0.5rem, 1.2vw, 0.8rem)",overflow:"hidden"},children:e})},e))]}),(0,T.jsx)(D,{x:20,y:86,w:20,h:10,color:"#c8f0ff",children:(0,T.jsx)("input",{value:i,onChange:e=>a(e.target.value),style:{width:"90%",fontSize:"clamp(1rem, 2.5vw, 1.5rem)",borderBottom:"2px solid black",fontFamily:"inherit",margin:0,background:"transparent"},placeholder:"Name"})}),(0,T.jsx)(D,{x:47.5,y:86,w:34,h:10,color:"#c8f0ff",children:(0,T.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-around",fontSize:"clamp(0.8rem, 2.2vw, 1.5rem)"},children:[(0,T.jsxs)("span",{children:["Dmg: ",f]}),(0,T.jsxs)("span",{children:["Arm: ",k]}),(0,T.jsxs)("span",{children:["Spd: ",C]})]})}),(0,T.jsx)("div",{onClick:()=>{n({name:i||"Player",classIndex:r,armor:k,speed:C,attack:f,ability:p,bonusToken:1===r&&0===c?d:null})},style:{position:"absolute",left:"77.5%",top:"86%",width:"25%",height:"10%",transform:"translate(-50%, -50%)",backgroundColor:"#000",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,T.jsxs)("div",{style:{width:"calc(100% - 6px)",height:"calc(100% - 6px)",backgroundColor:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"clamp(0.9rem, 2.5vw, 1.5rem)",textAlign:"center"},children:["Continue as ",i]})})]})},U=t=>{let{gameStateObj:n,myHandIndex:r,sendAction:s}=t;const i=(0,e.useRef)(null),a=function(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#ffffff";e.fillStyle="#000000",e.fillRect(t-r/2,n-s/2,r,s),e.fillStyle=i,e.fillRect(t-r/2+3,n-s/2+3,r-6,s-6)},o=function(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000000";e.font="".concat(s,"px 'Big Shoulders Display'"),e.fillStyle=i,e.textAlign="center",e.textBaseline="middle";const a=(t+"").split("\n");for(let o=0;o<a.length;o++)e.fillText(a[o],n,r+(o-(a.length-1)/2)*s)},l=(e,t,n)=>t-n/2<e&&e<t+n/2,c=(e,t,r)=>{let s="",i=e.card[0]+e.card[1];const a=n.players;if("MR2"===i){const e=n.played[0];for(let t=0;t<e.length;t++){const n=e[t];if(n.card[0]+n.card[1]!=="MR2"&&!n.skip){i=n.card[0]+n.card[1];break}}}if("MM1"===i)a[r].hand.length>0&&(s=Math.floor(Math.random()*a[r].hand.length));else if("ME1"===i){let n=[];for(let e=0;e<a.length;e++)n.push([...a[e].hand]);const r=n[t],i=r.findIndex(t=>t.card[0]===e.card[0]&&t.card[1]===e.card[1]);i>-1&&r.splice(i,1);for(let e=0;e<n.length;e++)n[e]=n[e].filter(e=>e.card[0]+e.card[1]!=="JJ1");let o=[t];for(let e=0;e<o.length;e++)for(let t=0;t<a.length;t++)if(n[t].length>0&&t!==o[e]){const r=Math.floor(Math.random()*n[t].length),i=n[t][r],a=i.card[0]+i.card[1];if(["ME1","MR2"].includes(a))s+=t+","+a+",;",o.push(t);else{let n=c(new P(i.card[0],i.card[1]),t,t);"MC2"===a?n="E":"SE1"===a&&(n=o[e]),s+=t+","+a+","+n+";"}n[t].splice(r,1)}}else"JJ1"===i&&"Mage"===a[t].class&&(s=Math.floor(4*Math.random())+";"+(4+Math.floor(4*Math.random())));return s},u=(e,t)=>{const a=i.current.getBoundingClientRect(),o=e.clientX-a.left,u=e.clientY-a.top,d=a.width,h=a.height,p=o,f=u,g=n.players[r];if(!g)return;if(!t&&n.clickBig&&(n.clickBig=!1),n.clickedPlayer&&(n.clickedPlayer=null),1===n.screen&&n.tempTokens){for(let e=0;e<3;e++)l(p,.45*d,.3*d)&&l(f,h*(.35+.15*e),.125*h)&&s("ToknG;".concat(r,";").concat(n.tempTokens[e]));return}if(2===n.screen){let e=0;return n.deck.forEach(t=>{null===t&&e++}),void n.players.forEach((t,i)=>{const a=d*((2*i-n.players.length+6.625)/15);l(p,a,d/8)&&l(f,h/2,h/4)&&e===g.pos&&s("Bnty".concat(r,";").concat(i,";").concat(g.pos))})}if(l(p,59*d/64,3*d/32))for(let r=0;r<3;r++)if(l(f,h*(7+r)/15+h/320,h/20)&&g.tokens[r]>0)return void(n.clickToken=n.clickToken===r?null:r);let m=[];n.selectedCard&&m.push(n.selectedCard),m=m.concat([...g.hand].reverse());if(!m.some(e=>!!e&&(!(!l(p,e.x,d/8)||!l(f,e.y,h/4))&&(n.selectedCard!==e?(n.selectedCard=e,n.clickBig=!!t):(n.selectedCard=null,n.clickBig=!1),!0)))&&(t||n.players.forEach((e,t)=>{if(l(p,7*d/8,d/4)&&l(f,h/15*(t+2),h/15)){const i=n.selectedCard;i&&i.card[0]+i.card[1]==="SE1"&&-1===n.recycle[0]?(s("Play".concat(r,";SE1;").concat(n.targetId(),";").concat(t)),n.nextTarget(),n.selectedCard=null):n.clickedPlayer=e}if(t!==r&&e.hand.length>0){if(2===n.players.length||(t-r+n.players.length)%n.players.length===1){const i=3*d/8,a=h/8,o=e.hand;let c=o.length>8?(o.length-1)*d/2/o.length+d/9:(o.length-1)*d/16+d/9;if(l(p,i,c)&&l(f,a,h/4.5)){const i=n.selectedCard;i&&i.card[0]+i.card[1]==="SE1"&&-1===n.recycle[0]?(s("Play".concat(r,";SE1;").concat(n.targetId(),";").concat(t)),n.nextTarget(),n.selectedCard=null):n.clickedPlayer=e}}}}),!t)){if(l(p,.875*d,d/6)){if(l(f,h/1.2,h/12))if(n.recycle[0]>-1)n.log("#000000You may not play while using a Recycle Token!");else if(1===n.clickToken||2===n.clickToken)s("ToknP;".concat(r,";").concat(n.clickToken)),n.clickToken=null;else if(0===n.clickToken){if(n.selectedCard){const e=n.selectedCard;e.card[0]+e.card[1]!=="JJ1"&&(s("ToknP;".concat(r,";0;").concat(e.card[0],";").concat(e.card[1])),n.clickToken=null)}}else if(null===n.selectedCard&&"Nimble Feet"===g.ability&&g.protections[0]>0)s("ToknP;".concat(r,";3;").concat(g.protections[0]));else if(n.selectedCard){const e=n.selectedCard,t=n.targetId();let i=c(e,r,t);const a=e.card[0]+e.card[1];"MC2"===a&&l(p,551*d/600,.08*d)&&(i="E"),s("Play".concat(r,";").concat(a,";").concat(t,";").concat(i)),n.nextTarget(),n.selectedCard=null}if(l(f,h/1.4,h/12))if(n.selectedCard)if(n.recycle[0]>-1&&n.recycle[1]>=3)n.log("#000000You may only discard up to three with a Recycle Token!");else if(n.recycle[0]>-1&&n.recycle[2]>0)n.log("#000000You may not discard after drawing while using a Recycle Token!");else{const e=n.selectedCard;s("Play".concat(r,";").concat(e.card[0]).concat(e.card[1],";D;")),n.selectedCard=null}else{for(let r=0;r<n.players.length;r++)if(n.players[r].hand.length>3)return void n.log("#000000All players must have three cards to reshuffle!");const e=[...n.played[0],...n.played[1],...n.deck].filter(e=>null!==e&&void 0!==e);for(let n=e.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}let t="Shfl";for(let n=0;n<e.length;n++)e[n].dupe||(t+=e[n].card[0]+","+e[n].card[1]+";");for(let r=0;r<n.players.length;r++){let e=[];for(;e.length<3;){let t=Math.floor(8*Math.random());-1===e.indexOf(t)&&e.push(t)}t+=";"+e[0]+","+e[1]+","+e[2]}s(t)}}for(let e=0;e<3;e++){l(p,(14+9*e)*d/72,d/9)&&l(f,31*h/64,h/4.5)&&(g.hand.length<5?s("Grab".concat(r,";").concat(e+1)):n.log("#000000Your hand is full!"))}l(p,11*d/36,d/9)&&l(f,13*h/36,2*h/9)&&(g.hand.length<5?s("Grab".concat(r,";0")):n.log("#000000Your hand is full!"))}};return(0,e.useEffect)(()=>{const e=i.current,t=e.getContext("2d");let s;const l=new Image;l.src="/tapp/images/deck.webp";const c=new Image;c.src="/tapp/images/blank.webp";const u=new Image;u.src="/tapp/images/selected.webp";const d=()=>{const i=e.getBoundingClientRect(),h=window.devicePixelRatio||1;e.width=i.width*h,e.height=i.height*h,t.scale(h,h),t.imageSmoothingEnabled=!1;const p=i.width,f=i.height,g=p/2<f?p/2:f;if(a(t,p/2,f/2,p,f,"#dcdcdc"),a(t,7*p/8,f/2,p/4,f),o(t,n.gameId?n.gameId:"ID: ???",7*p/8,15*f/16,g/15),o(t,"Deck: ".concat(n.deck.length),7*p/8,f/15,g/20),n.players.forEach((e,s)=>{let i="#000000";s===r?i="#2d7d07":s===n.targetId()?i="#ff4242":e.ingame||(i="#848484"),o(t,"".concat(e.name,": ").concat(e.health," HP"),7*p/8,f/15*(s+2),g/20,i)}),r>-1){const e=n.players[r];o(t,"Atk: ".concat(e.attack),13*p/16,7*f/15+g/80,g/20),o(t,"Arm: ".concat(e.armor),13*p/16,8*f/15+g/80,g/20),o(t,"Spd: ".concat(e.speed),13*p/16,3*f/5+g/80,g/20),["Arcane: ","Mush: ","Recyc: "].forEach((r,s)=>{let i=n.clickToken===s?"#ff0000":"#000000";o(t,r+e.tokens[s],59*p/64,f*(7+s)/15,g/20,i)});const s=n.selectedCard,i=s?s.card[0]+s.card[1]:null,l=!s&&!n.clickToken&&"Nimble Feet"===e.ability&&e.protections[0]>0;if("MC2"===i&&null===n.clickToken)a(t,499*p/600,f/1.2,.08*p,f/12,"#ff2020"),a(t,551*p/600,f/1.2,.08*p,f/12,"#50ff50"),o(t,"Play",499*p/600,f/1.2,g/20),o(t,"Eat",551*p/600,f/1.2,g/20);else{let r="#ff2020";s||null!==n.clickToken||l||(r="#ffc0c0"),a(t,.875*p,f/1.2,p/6,f/12,r);let c="Play";null!==n.clickToken?c="Use":l?c="Dodge (".concat(e.protections[0],")"):"SE1"===i&&(c="Select Hand"),o(t,c,.875*p,f/1.2,g/20)}a(t,.875*p,f/1.4,p/6,f/12,"#2020ff"),o(t,n.selectedCard?"Discard":"Reshuffle",.875*p,f/1.4,g/20,"#ffffff")}if(1===n.screen)a(t,3*p/8,f/2,p/2,f/2,"#f0f0f0"),o(t,"Select\nToken",.2125*p,f/2,g/8),n.tempTokens&&n.tempTokens.forEach((e,n)=>{const r=parseInt(e);a(t,.45*p,f*(.35+.15*n),.3*p,f/8,S[r]),o(t,w[r],.45*p,f*(.35+.15*n),g/12)});else if(2===n.screen){let e=0;n.deck.forEach(t=>{null===t&&e++});const s=n.players[r],i=s&&s.pos===e;a(t,3*p/8,5*f/12,p*(2*n.players.length+1)/15,f/1.5,"#f0f0f0"),o(t,"Bounty",3*p/8,11*f/48,g/8),n.players.forEach((e,r)=>{const s=p*(5/16+(2*r+1-n.players.length)/15),a=3*f/8,o=n.deck[r];null===o||void 0===o?t.drawImage(c,s,a,p/8,f/4):i?t.drawImage(o.image,s,a,p/8,f/4):t.drawImage(o.backImage,s,a,p/8,f/4)})}else{n.deck.length>0&&t.drawImage(l,p/4,f/4,p/9,f/4.5),n.played[0].length>0?t.drawImage(n.played[0][0].image,7*p/18,f/4,p/9,f/4.5):t.drawImage(c,7*p/18,f/4,p/9,f/4.5);for(let e=0;e<3;e++){const r=n.played[1][e],s=(14+9*e)*p/72;r?t.drawImage(r.image,s,31*f/64,p/9,f/4.5):t.drawImage(c,s,31*f/64,p/9,f/4.5)}if(n.players.forEach((e,s)=>{const i=e.hand;s===r?i.forEach((e,n)=>{const r=n+1,s=i.length;e.x=3*p/8+p/16*((s+1)/2-r),e.y=27*f/32,t.drawImage(e.image,e.x-p/16,e.y-f/8,p/8,f/4)}):2!==n.players.length&&(s-r+n.players.length)%n.players.length!==1||i.forEach((e,n)=>{const r=n+1,s=i.length,a=3*p/8+p/16*((s+1)/2-r),o=f/8;t.drawImage(e.backImage,a-p/18,o-f/9,p/9,f/4.5)})}),n.selectedCard){const e=n.selectedCard;t.drawImage(u,e.x-p/16-4,e.y-f/8-4,p/8+8,f/4+8),t.drawImage(e.image,e.x-p/16,e.y-f/8,p/8,f/4),n.clickBig&&t.drawImage(e.image,3*p/16,f/32,3*p/8,3*f/4)}}if(n.clickedPlayer){const e=n.clickedPlayer;let r="#ffffff";"Knight"===e.class?r="#ffd966":"Archer"===e.class?r="#b6d7a8":"Mage"===e.class?r="#6fa8dc":"Warlock"===e.class&&(r="#c27ba0"),a(t,3*p/8,f/2,p/2,f/2,r),o(t,e.name,3*p/8,.31*f,g/12),o(t,"Class: "+e.class,p/4,.6*f,g/18),o(t,"Life Points: "+e.life,p/2,.6*f,g/20),o(t,"Ability: "+e.ability,3*p/8,.68*f,g/20),o(t,"Health: "+e.health,7*p/24,.4*f,g/20),o(t,"Attack: "+e.attack,7*p/24,.48*f,g/20),o(t,"Armor: "+e.armor,11*p/24,.4*f,g/20),o(t,"Speed: "+e.speed,11*p/24,.48*f,g/20)}s=requestAnimationFrame(d)};return d(),()=>cancelAnimationFrame(s)},[n,r]),(0,T.jsx)("canvas",{ref:i,onClick:e=>u(e,!1),onContextMenu:e=>{e.preventDefault(),u(e,!0)},style:{width:"100%",height:"100%",display:"block"}})},L=()=>{const[t,n]=(0,e.useState)(!1);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("h1",{children:["How to Play",(0,T.jsx)("button",{type:"button",onClick:()=>n(!t),style:{border:"none",background:"none",cursor:"pointer",marginLeft:"10px"},"aria-label":"How to Play",children:(0,T.jsx)("i",{className:"arrow ".concat(t?"rotate-down":"rotate-right"),id:"arrow"})})]}),(0,T.jsxs)("div",{id:"content",className:t?"expand":"contract",style:{maxHeight:t?"100em":"0",display:"block",overflow:"hidden"},children:[(0,T.jsx)("h3",{children:"Controls:"}),(0,T.jsxs)("p",{children:['- Click "Create Game" or enter a game code to begin.',(0,T.jsx)("br",{}),"- On the character building screen, build a character and type a name.",(0,T.jsx)("br",{}),"- Click the deck or one of three cards to draw a card.",(0,T.jsx)("br",{}),"- Click a card in your hand to select it and use the controls on the side to play.",(0,T.jsx)("br",{}),"- Right click a card to enlarge it.",(0,T.jsx)("br",{}),"- Click on an opponent's hand or name to view their stats.",(0,T.jsx)("br",{})]}),(0,T.jsx)("h3",{children:"Building Phase:"}),(0,T.jsxs)("p",{children:["- Start by choosing your class, bonus attack, and ability. Then, perform all actions relating to your class and ability.",(0,T.jsx)("br",{}),"- After this is done, each player may draw five cards and discard one, leaving them with four to begin the game."]}),(0,T.jsx)("h3",{children:"Combat Phase:"}),(0,T.jsxs)("p",{children:["- Each player begins with 100 hitpoints, and loses them as they are damaged.",(0,T.jsx)("br",{}),"- In order of speed, players begin their turn by discarding as desired, then drawing once if they have less than five cards.",(0,T.jsx)("br",{}),"- Players attack the player with the next lowest speed, looping around and skipping themself.",(0,T.jsx)("br",{}),"- After attacking, the weapon's ability activates, and the card is discarded. Numbers always round down.",(0,T.jsx)("br",{}),"- This phase ends when the deck runs out or a player loses all their hitpoints."]}),(0,T.jsx)("h3",{children:"Intermission Phase:"}),(0,T.jsxs)("p",{children:["- The player with the most hitpoints loses 0 Life Points. Each next place loses 2 more. Ties go to the faster player.",(0,T.jsx)("br",{}),"- All players discard until they have 3 cards.",(0,T.jsx)("br",{}),"- The winner draws cards equal to the amount of players, keeps one, and passes the rest to second place. Repeat.",(0,T.jsx)("br",{}),"- Each player draws three tokens, and keeps one. Mages gain an extra random token as well.",(0,T.jsx)("br",{}),"- The deck is reshuffled (players keep cards in their hand) and another combat phase begins."]})]})]})};const z=function(){const{gameState:t,gameStateObj:n,gameId:r,myHandIndex:s,logMessages:i,joinGame:a,createGame:o,sendAction:l}=(()=>{const[t,n]=(0,e.useState)(0),[r,s]=(0,e.useState)(null),[i,a]=(0,e.useState)("MENU"),o=(0,e.useRef)(new O(()=>n(e=>e+1)));(0,e.useEffect)(()=>{const e={message:e=>{const t=e.message;if("string"===typeof t)if(t.startsWith("TP")){if(t.startsWith("TP-JL"))return;0===o.current.deck.length&&l(t.slice(2))}else if(t.startsWith("Join")){var n;const e=t.slice(4).split(";"),r=parseInt(e[0]),s=null===(n=e[1])||void 0===n?void 0:n.trim();if(o.current.players[r]){o.current.players[r].online=!0,o.current.players[r].joined=!0,o.current.players[r].uuid=s;const e=o.current.players.filter(e=>e.online).length;o.current.log("Player ".concat(r+1," joined the game. (").concat(e,"/").concat(o.current.players.length,")")),s===N&&(o.current.hand=r,o.current.players[r].ingame?a("GAME"):a("LOBBY"))}}else if(t.startsWith("User")){o.current.processMessage(t);const e=t.slice(4).split(";");parseInt(e[0])===o.current.hand&&a("GAME")}else if(t.startsWith("Leve")){const e=t.slice(4),n=o.current.players.find(t=>t.uuid===e);if(n){n.online=!1,n.uuid=null;const e=o.current.players.filter(e=>e.online).length;o.current.log("".concat(n.name," left the game. (").concat(e,"/").concat(o.current.players.length,")"))}}else o.current.processMessage(t)},presence:e=>{if("leave"===e.action&&e.subscribedChannel.includes("-JL")){const t=o.current.gameId;t&&j.publish({channel:"TP-JL"+t,message:"Leve"+e.uuid},e=>{e.error&&console.log(e)})}}};return j.addListener(e),()=>{j.removeListener(e)}},[]);const l=e=>{try{const t=e.split(";;"),r=t[0].split(";").filter(e=>e).map(e=>e.split(","));let s=t[1]?parseInt(t[1].trim()):2;const i=o.current;i.players=[];for(let e=0;e<s;e++)i.players.push(new E(e,"Player ".concat(e+1)));i.deck=[],r.forEach(e=>{e[0]&&e[1]&&i.deck.push(new P(e[0],e[1]))}),i.played=[[],[]];for(let e=0;e<3;e++)if(i.deck.length>0){const e=i.deck.pop();e.image.src="".concat("/tapp","/images/tapp/").concat(e.card[0]).concat(e.card[1],".webp"),i.played[1].push(e)}for(let e=0;e<i.players.length;e++)for(let t=0;t<5;t++)if(i.deck.length>0){let t=i.deck.pop();t.grab(e,i),i.players[e].hand.push(t)}n(e=>e+1)}catch(t){console.error(t)}},c=async(e,t)=>{try{const s=(await j.history({channel:e,count:100,reverse:!0})).messages;for(let e=0;e<s.length;e++){const t=s[e].entry;t.startsWith("TP")&&!t.startsWith("TP-JL")&&0===o.current.deck.length&&l(t.slice(2))}for(let e=0;e<s.length;e++){const t=s[e].entry;if(t.startsWith("Join")){var r;const e=t.slice(4).split(";"),n=parseInt(e[0]),s=null===(r=e[1])||void 0===r?void 0:r.trim();if(o.current.players[n]){const e=o.current.players[n];e.online=!0,e.joined=!0,e.uuid=s;const t=o.current.players.filter(e=>e.online).length;o.current.log("Player ".concat(n+1," joined the game. (").concat(t,"/").concat(o.current.players.length,")"))}}else if(t.startsWith("Leve")){const e=t.slice(4),n=o.current.players.find(t=>t.uuid===e);if(n){n.online=!1,n.uuid=null;const e=o.current.players.filter(e=>e.online).length;o.current.log("".concat(n.name," left the game. (").concat(e,"/").concat(o.current.players.length,")"))}}else t.startsWith("User")&&o.current.processMessage(t)}let i=-1;const a=o.current.players;for(let e=0;e<a.length;e++)if(a[e].uuid===N){i=e;break}if(-1===i){i=0;for(let e=0;e<a.length;e++)a[e].joined&&i++;if(i===a.length){i=-1;for(let e=0;e<a.length;e++)if(!a[e].online){i=e;break}if(-1===i)return void alert("Game is full!")}}await j.history({channel:"TP"+t,count:100,reverse:!0}).then(e=>{e.messages.forEach(e=>o.current.processMessage(e.entry))}),n(e=>e+1),j.publish({channel:"TP-JL"+t,message:"Join".concat(i,";").concat(N)})}catch(s){console.error("History fetch failed",s)}};return{gameState:i,gameStateObj:o.current,gameId:r,players:o.current.players,myHandIndex:o.current.hand,logMessages:o.current.logs.map((e,t)=>({raw:e,key:t})),joinGame:e=>{s(e),o.current.gameId=e,j.subscribe({channels:["TP"+e,"TP-JL"+e],withPresence:!0}),c("TP-JL"+e,e)},createGame:(e,t)=>{const n=Math.floor(8999*Math.random()+1e3);s(n),o.current.gameId=n;let r=[];h.forEach(e=>{p.forEach(t=>{const n=parseInt(t.slice(0,1)),s=t.slice(1);for(let i=0;i<n;i++)r.push("".concat(e,",").concat(s))})}),t&&(r.push("J,J1"),r.push("J,J1")),r.sort(()=>Math.random()-.5);const i=r.join(";"),a="TP".concat(i,";;").concat(e);l(a.slice(2)),j.subscribe({channels:["TP"+n,"TP-JL"+n]}),setTimeout(()=>{j.publish({channel:"TP-JL"+n,message:a}),c("TP-JL"+n,n)},500)},sendAction:e=>{r&&j.publish({channel:"TP"+r,message:e})}}})();return(0,T.jsxs)("div",{className:"App",children:[(0,T.jsxs)("nav",{style:{padding:"10px 20px",background:"#333",color:"#fff",fontSize:"1.2rem"},children:["GAME DESIGN CLUB ",r?"| Game ID: ".concat(r):""]}),(0,T.jsxs)("section",{className:"game-section",children:[(0,T.jsxs)("article",{className:"threefourth",id:"canvasWrap",children:[(0,T.jsx)(U,{gameStateObj:n,myHandIndex:s,sendAction:l}),"GAME"!==t&&(0,T.jsxs)("div",{className:"overlay-container",children:["MENU"===t&&(0,T.jsx)(x,{onJoin:a,onCreate:o}),"LOBBY"===t&&(0,T.jsx)(F,{onConfirm:e=>{let t="User".concat(s,";").concat(e.name,";").concat(e.classIndex,";").concat(e.armor,";").concat(e.speed,";").concat(e.attack,";").concat(e.ability);2===e.classIndex&&(t+=";"+Math.floor(8*Math.random())),"Hoarding"===e.ability&&(t+=";"+Math.floor(4*Math.random())+";"+(Math.floor(4*Math.random())+4)),"Magical Quiver"===e.ability&&(t+=";2;"+(null!==e.bonusToken?e.bonusToken:0)),l(t)}})]})]}),(0,T.jsx)("article",{className:"fourth",children:(0,T.jsx)("log",{id:"log",children:i.map(e=>(0,T.jsx)("div",{children:(0,T.jsx)("span",{dangerouslySetInnerHTML:{__html:e.raw.replace(/>/g,"&gt;").replace(/#[0-9a-f]{6}/g,"")}})},e.key))})})]}),(0,T.jsx)("section",{style:{maxWidth:"600px",margin:"auto",textAlign:"center",padding:"0 20px"},children:(0,T.jsxs)("article",{children:[(0,T.jsx)("h1",{children:"TAPP"}),(0,T.jsx)("h4",{children:"TAPP is a game of strategy which focuses on building a unique character and battling opponents over a series of rounds. Every game is always unique!"}),(0,T.jsxs)("p",{style:{opacity:"60%"},children:[(0,T.jsx)("a",{href:"./downloads/cards.zip",download:"TAPP Cards",style:{color:"inherit"},children:"Click to Download the Card Designs"}),(0,T.jsx)("br",{}),(0,T.jsx)("a",{href:"https://docs.google.com/spreadsheets/d/1Ut25LnsZv1SjcmGxaavKhANNh-YHvjs9GYHRkQPpD0U/edit?usp=sharing",target:"_blank",rel:"noreferrer",style:{color:"inherit"},children:"Click to View the Game Sheet"})]})]})}),(0,T.jsx)("section",{style:{marginTop:"20px"},children:(0,T.jsx)("article",{style:{width:"100%",padding:"0 40px",boxSizing:"border-box"},children:(0,T.jsx)(L,{})})}),(0,T.jsx)("section",{style:{padding:"0 40px"},children:(0,T.jsxs)("article",{style:{width:"100%"},children:[(0,T.jsx)("h1",{children:"Development"}),(0,T.jsx)("h3",{children:"Initial Idea"}),(0,T.jsxs)("p",{children:["\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0In early October of 2020, we decided to begin on our first real club game, after going through a few ideas and play testing a few games. The main goal of the game was to increase your own character's power level in order to eliminate your opponents' health. There were originally two phases: Team Building and Combat Phase. Team Building would be where players choose their character's attributes, and gain their weapons. Combat Phase would be where players fight each other, dealing damage, which would eventually result in Life Point damage.",(0,T.jsx)("br",{}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Four classes were developed: Knight, Archer, Mage, Berserker. Each had preset attributes, and each had limitations to certain abilities. There was a deck of 52 cards, comprised of 4 rarities of weapons from each class, some with special abilities. Each weapon could be used a certain amount of times before being destroyed."]}),(0,T.jsx)("h3",{children:"Overhauling the Game"}),(0,T.jsxs)("p",{children:["\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0After around a month of play testing, a new idea was proposed which would completely change the game: instead of each weapon having multiple uses, they could only be used once. This may not at first seem like much, but it turned the game from playing the same weapon over and over to a much more interactive and engaging card game. This also resulted in many weapons with abilities based on usage being completely redesigned. Classes were then changed to have lower attribute increases and decreases, but each class had a choice of abilities to distinguish it from the others. Additionally, Berserker was renamed to Warlock, gaining the Soul type, a distinguished type focusing on high damage.",(0,T.jsx)("br",{}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Tokens were added to the game, giving either a permenant stat increase or a temperary boost. Attacks became structured to reduce targetting which made the game unplayable in some cases and an Intermision phase was added to upgrade characters after each round. Additionally, Incantations were added, which was a card which changed based on the class of the user. All of this resulted in a much more fun game which could be played repeatedly, and be different each time."]}),(0,T.jsx)("h3",{children:"Finalizing"}),(0,T.jsx)("p",{children:"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0A few months later, after a lot of playtesting, weapon changes, and abilitiy changes the game finally reached a finalized state. Additionally, by this point, a set of three face up cards were included with the draw pile, allowing for further specialization, and an online version was developed to aid playing during the pandemic. Cards images were developed for every weapon, and the game was finally finished in March of 2021."})]})}),(0,T.jsx)("footer",{style:{padding:"20px",textAlign:"center",background:"#eee",marginTop:"40px"},children:"\xa9 Game Design Club"})]})},B=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:i,getTTFB:a}=t;n(e),r(e),s(e),i(e),a(e)})};t.createRoot(document.getElementById("root")).render((0,T.jsx)(e.StrictMode,{children:(0,T.jsx)(z,{})})),B()})()})();
//# sourceMappingURL=main.abc9e5a2.js.map